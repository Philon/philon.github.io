<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo48x48.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo48x48.png">
  <link rel="mask-icon" href="/images/logo.png" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ixx.life","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
<meta property="og:type" content="website">
<meta property="og:title" content="è‡ªå¢äººç”Ÿ">
<meta property="og:url" content="https://ixx.life/page/13/index.html">
<meta property="og:site_name" content="è‡ªå¢äººç”Ÿ">
<meta property="og:description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Philon">
<meta property="article:tag" content="è‡ªå¾‹ arts ç¼–ç¨‹ å¼€å‘ c&#x2F;c++ java web go è¯»ä¹¦ å†™ä½œ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ixx.life/page/13/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>è‡ªå¢äººç”Ÿ</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">è‡ªå¢äººç”Ÿ</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä½•ä»¥è§£å¿§ï¼Œå”¯æœ‰ i++</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-books">

    <a href="/books/" rel="section"><i class="fa  fa-book fa-fw"></i>è¯»ä¹¦å†™ä½œ</a>

  </li>
        <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-pen fa-fw"></i>å­¦ä¹ ç¬”è®°</a>

  </li>
        <li class="menu-item menu-item-leetcode">

    <a href="/leetcode/" rel="section"><i class="fa fa-fire fa-fw"></i>LeetCode</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/31/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/31/" class="post-title-link" itemprop="url">åˆ«ç¢°ä»£ç ï¼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-05 07:50:47" itemprop="dateCreated datePublished" datetime="2019-03-05T07:50:47+08:00">2019-03-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/31/" class="post-meta-item leancloud_visitors" data-flag-title="åˆ«ç¢°ä»£ç ï¼" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/31/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/31/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_31/">Donâ€™t Touch that Code!</a></p>
<p>åœ¨æˆ‘ä»¬æ¯ä¸ªäººèº«ä¸Šéƒ½å‘ç”Ÿè¿‡ã€‚ä½ çš„ä»£ç æ”¾åˆ°é¢„æ¼”æœåŠ¡å™¨ä¸Šç”¨äºç³»ç»Ÿæµ‹è¯•ï¼Œç„¶åæµ‹è¯•ç»ç†åé¦ˆå¥¹å‘ç°äº†ä¸ªé—®é¢˜ã€‚ä½ çš„ç¬¬ä¸€ååº”å°±æ˜¯â€œå¿«ï¼Œè®©æˆ‘ä¿®å¤å®ƒâ€”â€”æˆ‘çŸ¥é“é”™è¯¯åœ¨å“ªå„¿ã€‚â€</p>
<p>ä»æ›´å¤§çš„æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå°½ç®¡ï¼Œä½œä¸ºä¸€ä¸ªå¼€å‘è€…çŠ¯çš„é”™ï¼Œä½ è§‰å¾—ä½ åº”è¯¥å»è®¿é—®é¢„æ¼”æœåŠ¡å™¨ã€‚</p>
<p>å¤§å¤šæ•°åŸºäºwebçš„å¼€å‘ç¯å¢ƒä¸­ï¼Œæ¶æ„å¯ä»¥åƒè¿™æ ·åˆ†è§£ï¼š</p>
<ul>
<li>æœ¬åœ°å¼€å‘ï¼Œå¹¶åœ¨å¼€å‘è€…æœºå™¨ä¸Šå®Œæˆå•å…ƒæµ‹è¯•</li>
<li>æ‰‹åŠ¨æˆ–è‡ªåŠ¨å®Œæˆåœ¨å¼€å‘æœåŠ¡å™¨ä¸Šé›†æˆæµ‹è¯•</li>
<li>QAå›¢é˜Ÿå’Œç”¨æˆ·è®¿é—®é¢„æ¼”æœåŠ¡å™¨å®Œæˆæµ‹è¯•</li>
<li>(å‘å¸ƒåˆ°)ç”Ÿäº§æœåŠ¡å™¨</li>
</ul>
<p>æ˜¯çš„ï¼Œé‚£é‡Œè¿˜æœ‰å…¶å®ƒçš„æœåŠ¡å™¨å’ŒæœåŠ¡ï¼Œå°±åƒæºç æ§åˆ¶å’Œç¥¨æ®ï¼Œä½†ä½ è·å¾—äº†æ³¨æ„ã€‚ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œä¸€ä¸ªç¨‹åºå‘˜â€”â€”ç”šè‡³æ˜¯ä¸€ä¸ªæœ‰èµ„å†çš„ç¨‹åºå‘˜â€”â€”åº”è¯¥æ°¸è¿œä¸è¦è®¿é—®é™¤äº†å¼€å‘æœåŠ¡å™¨æ„å¤–çš„ä¸œè¥¿ã€‚å¾ˆå¤šå¼€å‘æ˜¯åœ¨å¼€å‘è€…æœ¬åœ°æœºå™¨ç”¨ä»–ä»¬å–œæ¬¢çš„IDEã€è™šæ‹Ÿæœºä¸Šå®Œæˆçš„ï¼Œä¸ºäº†å¥½è¿ï¼Œè¿˜ä¼šæ’’ä¸Šé€‚é‡çš„é»‘é­”æ³•ã€‚</p>
<p>ä¸€æ—¦è¿›å…¥SCCæ£€æŸ¥ï¼Œä¸è®ºæ˜¯è‡ªåŠ¨è¿˜æ˜¯æ‰‹åŠ¨ï¼Œéƒ½åº”è¯¥å°†å…¶ä»å¼€å‘æœåŠ¡å™¨è½¬äº¤å‡ºå»ï¼Œå¹¶å¯ä»¥åœ¨å…¶å®ƒåœ°æ–¹è¢«æµ‹è¯•å’Œè°ƒæ•´ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡å·¥ä½œæ­£å¸¸ã€‚å°½ç®¡ï¼Œä»è¿™ç‚¹æ¥çœ‹ï¼Œå¼€å‘è€…åœ¨æ­¤è¿‡ç¨‹ä¸­åªèƒ½æ˜¯ä¸€ä¸ªè§‚ä¼—ã€‚</p>
<p>é¢„æ¼”ç»ç†åº”è¯¥ä¸ºQAå›¢é˜Ÿæ‰“åŒ…å¹¶è½¬ç§»ä»£ç åˆ°é¢„æ¼”æœåŠ¡å™¨ã€‚å°±åƒå¼€å‘è€…ä¸éœ€è¦è®¿é—®ä»»ä½•å¼€å‘æœåŠ¡å™¨æ„å¤–çš„äº‹æƒ…ä¸€æ ·ï¼ŒQAå›¢é˜Ÿå’Œç”¨æˆ·ä¹Ÿè¦ç¢°ä»»ä½•åœ¨å¼€å‘æœåŠ¡å™¨ä¸Šçš„ä¸œè¥¿ã€‚å¦‚æœå®ƒå‡†å¤‡æ¥å—æµ‹è¯•ï¼Œåˆ‡å‡ºå‘å¸ƒ(åˆ†æ”¯)å¹¶ç§»äº¤ï¼Œä¸è¦å†è®©ç”¨æˆ·åˆ°å¼€å‘æœåŠ¡å™¨ä¸Šâ€œåªæ˜¯çœ‹ä¸€ç‚¹ä¸œè¥¿ï¼ŒçœŸçš„å¾ˆå¿«â€ã€‚è®°ä½ï¼Œé™¤éæ•´ä¸ªå·¥ç¨‹ä»£ç éƒ½æ˜¯ä½ å†™çš„ï¼Œå¦åˆ™å…¶ä»–äººä¼šåœ¨ä¸Šé¢æ”¹ä»£ç ï¼Œå¹¶ä¸”ä»–ä»¬å¯èƒ½å¹¶æ²¡æœ‰å‡†å¤‡å¥½è®©ç”¨æˆ·çœ‹ã€‚å‘å¸ƒç»ç†æ‰æ˜¯å”¯ä¸€åº”è¯¥è®¿é—®è¿™ä¸¤è€…çš„äººã€‚</p>
<p>åœ¨ä»»ä½•ï¼Œæ‰€æœ‰æƒ…å†µä¸‹â€”â€”éƒ½ä¸åº”è¯¥â€”â€”è®©ä¸€ä¸ªå¼€å‘äººå‘˜å»è®¿é—®ç”Ÿäº§æœåŠ¡å™¨ã€‚å¦‚æœåˆé—®é¢˜ï¼Œä½ çš„æŠ€æœ¯æ”¯æŒäººå‘˜è¦ä¹ˆä¿®å¤å®ƒï¼Œè¦ä¹ˆè¯·æ±‚ä¿®å¤å®ƒã€‚åœ¨SCCæ£€å…¥ä¹‹åï¼Œå®ƒä»¬å°†åœ¨æ­¤æ»šåŠ¨ä¸€ä¸ªè¡¥ä¸ã€‚æˆ‘æ›¾ç›®ç¹è¿‡ä¸€äº›è¶…å¤§å‹çš„ç¼–ç¨‹ç¾éš¾å‘ç”Ÿï¼Œç”±äºæŸäº›äºº(å’³å’³)è¿åäº†è¿™æ¡è§„åˆ™ã€‚å¦‚æœå®ƒç ´æ‰äº†ï¼Œç”Ÿäº§å¯ä¸æ˜¯ä¿®å¤å®ƒçš„åœ°æ–¹ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/books/%E4%B9%8C%E5%90%88%E4%B9%8B%E4%BC%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/books/%E4%B9%8C%E5%90%88%E4%B9%8B%E4%BC%97/" class="post-title-link" itemprop="url">ä¸‰äººä¸ºè™-ã€Šä¹Œåˆä¹‹ä¼—ã€‹è¯»ä¹¦æ„Ÿæ‚Ÿ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-03 22:54:59" itemprop="dateCreated datePublished" datetime="2019-03-03T22:54:59+08:00">2019-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">è¯»ä¹¦</span></a>
                </span>
            </span>

          
            <span id="/books/%E4%B9%8C%E5%90%88%E4%B9%8B%E4%BC%97/" class="post-meta-item leancloud_visitors" data-flag-title="ä¸‰äººä¸ºè™-ã€Šä¹Œåˆä¹‹ä¼—ã€‹è¯»ä¹¦æ„Ÿæ‚Ÿ" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/books/%E4%B9%8C%E5%90%88%E4%B9%8B%E4%BC%97/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/books/%E4%B9%8C%E5%90%88%E4%B9%8B%E4%BC%97/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æˆ‘å¤§æ¦‚æ˜¯åœ¨æŸä¸ªæ’­å®¢èŠ‚ç›®ä¸­å¬åˆ°æœ¬ä¹¦çš„åå­—ï¼ŒåŒæ—¶å› ä¸ºå¯¹æ–‡é©ã€ç½‘ç»œå–·å­ã€æ¸¸è¡Œç¤ºå¨ã€æ‰“ç ¸ç­‰å†å²æˆ–ç°è±¡å¤šå°‘æœ‰äº›å…´è¶£ï¼Œä¾¿æ€€ç€å¥½å¥‡å¿ƒç¿»å¼€äº†è¿™æœ¬ä¹¦ã€‚ä»ã€Šä¹Œåˆä¹‹ä¼—ï¼šå¤§ä¼—å¿ƒç†ç ”ç©¶ã€‹çš„ä¹¦åéƒ½èƒ½çŒœåˆ°ï¼Œè¿™æœ¬ä¹¦å°±æ˜¯è®²ç¾¤ä¼—è¡Œä¸ºå’Œå¿ƒç†çš„ï¼Œä¸è®ºé¢˜æå’Œè§’åº¦éƒ½èƒ½ï¼Œæˆ–å¤šæˆ–å°‘æœ‰äº›å‘äººæ·±çœçš„åœ°æ–¹ã€‚æ‰€ä»¥ï¼Œæƒ³è¦å¯¹æŸäº›ç¾¤ä½“å¿ƒç†å¤šäº›æ´å¯ŸåŠ›ï¼Œè¿™æœ¬ä¹¦è¿˜æ˜¯å€¼å¾—ä¸€è¯»çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œä»æ–‡ä½“å†…å®¹è€Œè¨€ï¼Œæˆ‘æ„Ÿè§‰è¿™æœ¬ä¹¦å°±æƒ³ä¸€æœ¬å¿ƒç†å­¦è®ºæ–‡ï¼Œä¸ä¹å¾ˆå¤šæ¯ç‡¥çš„é•¿ç¯‡è®ºè¿°ï¼Œé£Ÿä¹‹æ— å‘³ã€‚å¦‚æœæˆ‘æ˜¯ä¸€åå¿ƒç†å­¦å®¶æˆ–è€…ç¤¾ä¼šå­¦å®¶ï¼Œé‚£è¿™æœ¬ä¹¦ä¹Ÿè®¸èƒ½æŒç»­æŒ‘é€—æˆ‘çš„ç²¾ç¥å‘³è•¾ï¼Œå¯ååæˆ‘å°±æ˜¯ä¸ªé—¨å¤–æ±‰ï¼Œé‚£äº›é•¿ç¯‡å¤§è®ºé™¤äº†å¸®åŠ©æˆ‘å¢åŠ ä¸ä¸ç¡æ„å¤–ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆèƒ½å¸å¼•æˆ‘çš„åœ°æ–¹ã€‚</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/books/%E4%B9%8C%E5%90%88%E4%B9%8B%E4%BC%97/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/GoInAction/chapter7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/GoInAction/chapter7/" class="post-title-link" itemprop="url">ä¸ƒï¼šå¹¶å‘æ¨¡å¼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-03 16:13:01" itemprop="dateCreated datePublished" datetime="2019-03-03T16:13:01+08:00">2019-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E3%80%8AGO%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">ã€ŠGOè¯­è¨€å®æˆ˜ã€‹å­¦ä¹ ç¬”è®°</span></a>
                </span>
            </span>

          
            <span id="/GoInAction/chapter7/" class="post-meta-item leancloud_visitors" data-flag-title="ä¸ƒï¼šå¹¶å‘æ¨¡å¼" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/GoInAction/chapter7/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/GoInAction/chapter7/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æˆ‘ä»¬å¯ä»¥é€šè¿‡goroutineå’Œchannelæœºåˆ¶éå¸¸æ–¹ä¾¿åœ°ç¼–å†™å¹¶å‘ä¸šåŠ¡ï¼Œä½†å°±å’Œé¢å‘å¯¹è±¡ä¸è®¾è®¡æ¨¡å¼çš„å…³ç³»ä¸€æ ·ï¼Œæ˜¯ä¸€ç§æ€æƒ³å…·ä½“è½å®åˆ°è¡ŒåŠ¨æ–¹é’ˆçš„è¿‡ç¨‹ï¼Œåœ¨ç‰›é€¼çš„æˆ˜ç•¥ï¼Œæ²¡æœ‰åŸºæœ¬çš„æˆ˜æœ¯æŒ‡å¯¼ï¼Œä¹Ÿåªæ˜¯ç©ºè°ˆã€‚</p>
<p>å› æ­¤ï¼Œç¬¬ä¸ƒç« å¹¶å‘æ¨¡å¼ï¼Œå¹¶æ²¡æœ‰å¤ªå¤šè¯­æ³•ä¸Šçš„æ–°ä¸œè¥¿ï¼Œè€Œæ˜¯åˆ©ç”¨goroutineå’Œchannelä»‹ç»äº†ä¸‰ç§å¹¶å‘æ¨¡å¼ï¼Œåˆ†åˆ«é€‚ç”¨äºä¸‰ç§ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<ol>
<li>runnerâ€”â€”ç»™æ¯ä¸ªå¹¶å‘ä»»åŠ¡è®¾ç½®deadlineï¼Œç®¡ç†å¹¶å‘ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>poolâ€”â€”åˆ©ç”¨æœ‰ç¼“å†²é€šé“åˆ›å»ºèµ„æºæ± ï¼Œç»Ÿä¸€ç®¡ç†å¹¶å‘æ—¶çš„èµ„æºè®¿é—®</li>
<li>workâ€”â€”åˆ©ç”¨æ— ç¼“å†²é€šé“åˆ›å»ºgoroutineæ± ï¼Œç»Ÿä¸€ç®¡ç†å¹¶å‘</li>
</ol>
<h2 id="runner"><a href="#runner" class="headerlink" title="runner"></a>runner</h2><p>å…ˆå‡è®¾ä¸€ä¸ªåœºæ™¯éœ€æ±‚ï¼Œæ¯”å¦‚httpæœåŠ¡çš„å¹¶å‘ï¼Œæˆ‘ä»¬è¦ä¸ºæ¯ä¸ªæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„å¹¶å‘å“åº”ä»»åŠ¡ï¼Œä½†è¿™ä¸ªæœ€å¥½åœ¨æŸä¸ªè§„å®šçš„æ—¶é—´å†…å®Œæˆå“åº”ï¼Œå¦åˆ™å°±å¼ºåˆ¶å®ƒé€€å‡ºï¼Œè¿™æ ·å¯ä»¥å¾ˆå¥½åœ°é¿å…æŸäº›æƒ…å†µä¸‹ï¼Œä¸€äº›å¹¶å‘ä»»åŠ¡å¡æ­»çš„æƒ…å†µï¼ŒåŒæ—¶å¯ä»¥å¾ˆå¥½åœ°ç®¡ç†æ¯ä¸ªå¹¶å‘çš„ç”Ÿå‘½å‘¨æœŸã€‚  </p>
<p>runnerå°±æ˜¯ä¸ºè¿™æ ·çš„åœºæ™¯åº”ç”¨è€Œç”Ÿçš„ï¼Œrunnerå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè¿è¡Œç®¡ç†å™¨ï¼Œæ‰€æœ‰çš„å¹¶å‘ä»»åŠ¡éƒ½è¦å«ç»™å®ƒè´Ÿè´£ç®¡ç†ï¼Œå®ƒè´Ÿè´£å¹¶å‘ä»»åŠ¡çš„å¯åŠ¨ã€è¶…æ—¶ç›‘æ§ã€å¼ºåˆ¶ä¸­æ–­ç­‰ã€‚</p>
<p>(ç”±äºæˆ‘ä¸ªäººåœ¨é˜…è¯»åŸè‘—çš„æ—¶å€™æ˜¯å…ˆè®²runnerçš„å†…éƒ¨å®ç°ï¼Œå†çœ‹å®é™…åº”ç”¨ï¼Œæ€»æ„Ÿè§‰äº‘é‡Œé›¾é‡Œçš„ï¼Œè§‰å¾—è¿˜æ˜¯å…ˆé€šç¯‡çœ‹ä¸€ä¸‹å¦‚ä½•è¿ç”¨runnerï¼Œå†æ¥çœ‹å…¶å†…éƒ¨çš„å®ç°ï¼Œå¯èƒ½æ•ˆæœä¼šå¥½ä¸€ç‚¹)</p>
<p>å…ˆæ¥çœ‹runnerçš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testRunner</span><span class="params">()</span></span> &#123;</span><br><span class="line">  log.Println(<span class="string">&quot;Runner test starting work...&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–°å»ºä¸€ä¸ªrunnerï¼Œå¹¶å¼ºåˆ¶æ¯ä¸ªå¹¶å‘ä»»åŠ¡çš„è¶…æ—¶æ—¶é—´ä¸º5ç§’</span></span><br><span class="line">  r := runner.New(<span class="number">3</span> * time.Second)</span><br><span class="line">  <span class="comment">// å¾ªç¯åˆ›å»º10ä¸ªå¹¶å‘ä»»åŠ¡ï¼Œå¹¶å°†å…¶ä¸¢ç»™runnerç®¡ç†</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">    r.Add(<span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿï¼Œæ¯ä¸ªå¹¶å‘ä»»åŠ¡éƒ½æ˜¯ç¡çœ å®ƒè‡ªèº«idçš„ç§’æ•°</span></span><br><span class="line">      log.Printf(<span class="string">&quot;Processor - Task #%d.\n&quot;</span>, id)</span><br><span class="line">      time.Sleep(time.Duration(id) * time.Second)</span><br><span class="line">      log.Printf(<span class="string">&quot;Task #%d done.\n&quot;</span>, id)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸€æ¬¡æ€§å¯åŠ¨runnerå†…éƒ¨çš„å…¨éƒ¨å¹¶å‘ä»»åŠ¡</span></span><br><span class="line">  <span class="keyword">if</span> err := r.Start(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> err &#123;</span><br><span class="line">    <span class="keyword">case</span> runner.ErrTimeout:</span><br><span class="line">      <span class="comment">// å½“å¹¶å‘ä»»åŠ¡ä¸­æœ‰ä»»åŠ¡æ‰§è¡Œè¶…æ—¶ï¼Œå°±ç«‹å³è¿”å›</span></span><br><span class="line">      log.Println(<span class="string">&quot;Terminating due to timeout.&quot;</span>)</span><br><span class="line">      os.Exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">case</span> runner.ErrInterrupt:</span><br><span class="line">      <span class="comment">// å½“ç¨‹åºè¢«ctrl+cæ—¶ï¼Œå¼ºåˆ¶ç»“æŸæ‰€æœ‰å¹¶å‘ä»»åŠ¡</span></span><br><span class="line">      log.Println(<span class="string">&quot;Terminating due to interrupt.&quot;</span>)</span><br><span class="line">      os.Exit(<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  log.Println(<span class="string">&quot;Process end.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------ç¨‹åºè¾“å‡º---------------</span></span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">41</span> Runner test starting work...</span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">41</span> Processor - Task #<span class="number">2.</span></span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">41</span> Processor - Task #<span class="number">4.</span></span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">41</span> Processor - Task #<span class="number">3.</span></span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">41</span> Processor - Task #<span class="number">0.</span></span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">41</span> Task #<span class="number">0</span> done.</span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">41</span> Processor - Task #<span class="number">1.</span></span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">42</span> Task #<span class="number">1</span> done.</span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">43</span> Task #<span class="number">2</span> done.</span><br><span class="line"><span class="comment">// ----ç¬¬3ä¸ªåŠä»¥åçš„ä»»åŠ¡å› ä¸ºè¦ç¡3ç§’ä»¥ä¸Šï¼Œè‚¯å®šä¼šè¶…æ—¶----</span></span><br><span class="line"><span class="number">2019</span>/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">44</span> Terminating due to timeout.</span><br><span class="line"><span class="comment">// ----å¦‚ä½•è¿è¡Œè¿‡ç¨‹ä¸­æŒ‰ctrl+cï¼Œä¼šå®‰å…¨é€€å‡ºå¹¶æç¤º----</span></span><br><span class="line">^C2019/<span class="number">03</span>/<span class="number">03</span> <span class="number">14</span>:<span class="number">49</span>:<span class="number">36</span> Terminating due to interrupt.</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œrunnerå°±æ˜¯ä¸€ä¸ªç±»å‹ï¼Œéœ€è¦ç”¨å…¶åˆ›å»ºå¯¹è±¡åæ‰èƒ½å…·ä½“ä½¿ç”¨ã€‚è€Œåœ¨å¤–éƒ¨ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰å¥½æ¯ä¸ªä»»åŠ¡çš„å‡½æ•°ï¼Œå¹¶ç®€å•çš„å°†å®ƒä»¬æ·»åŠ åˆ°runnerå½“ä¸­å³å¯ï¼Œå‰©ä¸‹çš„å…¨éƒ¨äº¤ç”±runnerè‡ªè¡Œç®¡ç†ã€‚</p>
<p>ç°åœ¨å†æ¥çœ‹çœ‹runnerç±»å‹æ˜¯å¦‚ä½•å®ç°çš„ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Runner åœ¨æŒ‡å®šçš„è¶…æ—¶æ—¶é—´å†…å®Œæˆä¸€ç»„ä»»åŠ¡</span></span><br><span class="line"><span class="comment">// å¹¶ä¸”åœ¨è¿™ä¸ªæ—¶é—´å‘¨æœŸå†…æ¥æ”¶ç³»ç»Ÿçš„ä¸­æ–­ä¿¡å·æ¥ç»“æŸè¿™ç»„ä»»åŠ¡</span></span><br><span class="line"><span class="keyword">type</span> Runner <span class="keyword">struct</span> &#123;</span><br><span class="line">  <span class="comment">// ä»ç³»ç»Ÿæ¥æ”¶ä¸­æ–­ä¿¡å·çš„é€šé“</span></span><br><span class="line">  interrupt <span class="keyword">chan</span> os.Signal</span><br><span class="line">  <span class="comment">// ä»»åŠ¡å·²å®Œæˆçš„æŠ¥å‘Šé€šé“</span></span><br><span class="line">  complete <span class="keyword">chan</span> error</span><br><span class="line">  <span class="comment">// ä»»åŠ¡è¶…æ—¶çš„æŠ¥å‘Šé€šé“</span></span><br><span class="line">  timeout &lt;-<span class="keyword">chan</span> time.Time</span><br><span class="line">  <span class="comment">// ä»»åŠ¡åˆ—è¡¨</span></span><br><span class="line">  tasks []<span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ErrTimeout ä»»åŠ¡æ‰§è¡Œè¶…æ—¶æ—¶è¿”å›</span></span><br><span class="line"><span class="keyword">var</span> ErrTimeout = errors.New(<span class="string">&quot;received timeout&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ErrInterrupt æ”¶åˆ°ç³»ç»Ÿä¸­æ–­ä¿¡å·æ—¶è¿”å›</span></span><br><span class="line"><span class="keyword">var</span> ErrInterrupt = errors.New(<span class="string">&quot;received interrupt&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// New åˆ›å»ºRunnerçš„å·¥å‚å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(d time.Duration)</span> *<span class="title">Runner</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &amp;Runner&#123;</span><br><span class="line">    interrupt: <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>),</span><br><span class="line">    complete:  <span class="built_in">make</span>(<span class="keyword">chan</span> error),</span><br><span class="line">    timeout:   time.After(d),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add Runnerçš„æ–¹æ³•ï¼Œå°†å¤šä¸ªä»»åŠ¡æ·»åŠ åˆ°Runnerçš„ä»»åŠ¡åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Runner)</span> <span class="title">Add</span><span class="params">(tasks ...<span class="keyword">func</span>(<span class="keyword">int</span>)</span>)</span> &#123;</span><br><span class="line">  r.tasks = <span class="built_in">append</span>(r.tasks, tasks...)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start Runnerçš„æ–¹æ³•ï¼Œå¯åŠ¨æ‰€æœ‰ä»»åŠ¡ï¼Œå¹¶ç›‘å¬é€šé“äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Runner)</span> <span class="title">Start</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">  <span class="comment">// å¼€å§‹æ¥æ”¶ç³»ç»Ÿçš„ä¸­æ–­é€šçŸ¥</span></span><br><span class="line">  signal.Notify(r.interrupt, os.Interrupt)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡goroutingå¹¶è¡Œå¯åŠ¨æ‰€æœ‰ä»»åŠ¡åˆ—è¡¨ä¸­çš„ä»»åŠ¡</span></span><br><span class="line">  <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">  wg.Add(<span class="built_in">len</span>(r.tasks))</span><br><span class="line">  <span class="keyword">for</span> i, t := <span class="keyword">range</span> r.tasks &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>, task <span class="keyword">func</span>(<span class="keyword">int</span>)</span>)</span> &#123;</span><br><span class="line">      task(id)</span><br><span class="line">      wg.Done()</span><br><span class="line">    &#125;(i, t)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶ç»™â€œå·²å®Œæˆé€šé“â€ä¸€ä¸ªæŠ¥å‘Š</span></span><br><span class="line">  <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    wg.Wait()</span><br><span class="line">    r.complete &lt;- <span class="literal">nil</span></span><br><span class="line">  &#125;()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–æ— ç¼“å†²é€šé“æ•°æ®æ—¶ï¼Œå¦‚æœæ²¡å‡†å¤‡å¥½ï¼Œä¼šè¢«é˜»å¡</span></span><br><span class="line">  <span class="keyword">select</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> err := &lt;-r.complete: <span class="comment">// ä»»åŠ¡æ­£å¸¸å®è¡Œå®Œè¿”å›ä»»åŠ¡è‡ªèº«çš„â€œé”™è¯¯æ ‡ç¤ºâ€</span></span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  <span class="keyword">case</span> &lt;-r.timeout: <span class="comment">// ä»»åŠ¡æ‰§è¡Œè¶…æ—¶ï¼Œè¿”å›è¶…æ—¶é”™è¯¯</span></span><br><span class="line">    <span class="keyword">return</span> ErrTimeout</span><br><span class="line">  <span class="keyword">case</span> &lt;-r.interrupt: <span class="comment">// å¦‚æœæ”¶åˆ°ctrl+Cåˆ™åœæ­¢æ¥æ”¶åç»­çš„ä¿¡å·</span></span><br><span class="line">    signal.Stop(r.interrupt)</span><br><span class="line">    <span class="keyword">return</span> ErrInterrupt</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äºåªæ˜¯åŸå‹æ¼”ç¤ºï¼Œrunnerçš„å†…éƒ¨å®ç°ä¸ç®—å¤æ‚ï¼Œåªéœ€è¦è®°ä½ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³<strong>æ— ç¼“å†²é€šé“åœ¨æ²¡æœ‰æ•°æ®è¯»å†™çš„æ—¶å€™ï¼Œä¼šè¢«é˜»å¡</strong>ã€‚è¯´åƒé“ä¸‡ï¼Œrunnerå°±æ˜¯åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§æ‰å¾—ä»¥åœ¨selectè¯­å¥ä¸­å®Œæˆäº†ï¼š</p>
<ul>
<li>å¹¶è¡Œæ¥æ”¶ç³»ç»Ÿçš„ä¸­æ–­ä¿¡å·â€”â€”interrupté€šé“ã€‚</li>
<li>å¹¶è¡Œæ¥æ”¶å®šæ—¶å™¨çš„è¶…æ—¶ä¿¡å·â€”â€”timeouté€šé“ã€‚</li>
</ul>
<h2 id="pool"><a href="#pool" class="headerlink" title="pool"></a>pool</h2><p>è¿™é‡Œçš„poolæ˜¯æŒ‡èµ„æºæ± çš„æ„æ€ï¼Œå¦‚æœç†Ÿæ‚‰Java/C#ä¸­çš„â€œæ•°æ®è¿æ¥æ± â€çš„æ¦‚å¿µï¼Œé‚£è¿™é‡Œçš„æ± å¤§ä½“å°±æ˜¯è¿™ä¸ªæ„æ€äº†ã€‚</p>
<p>æ¢è€Œè¨€ä¹‹ï¼Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œéš¾å…ä¼šé‡åˆ°å¹¶å‘ä»»åŠ¡äº‰å¤ºä¸´ç•Œèµ„æºçš„æƒ…å†µï¼Œè¿˜æ˜¯ä»¥æ•°æ®åº“è®¿é—®ä¸ºä¾‹ï¼šå¦‚æœæœ‰1000ä¸ªå¹¶å‘ä»»åŠ¡è¦å»è®¿é—®æ•°æ®åº“ï¼Œæ¯ä¸ªå¹¶å‘éƒ½éœ€è¦å®Œæˆå»ºç«‹è¿æ¥â€”â€”è®¤è¯â€”â€”æŸ¥è¯¢â€”â€”æ–­å¼€è¿æ¥ç­‰æ“ä½œï¼Œé‚£ä¸è®ºæ˜¯åº”ç”¨æœåŠ¡å™¨è¿˜æ˜¯æ•°æ®åº“æœåŠ¡å™¨ï¼Œæ— ç–‘éƒ½æ˜¯å·¨å¤§çš„è´Ÿæ‹…ã€‚å› æ­¤ï¼Œé€šè¿‡åˆ›å»º10ä¸ªæ•°æ®åº“è¿æ¥ï¼Œå¹¶æŠŠè¿™äº›â€œè¿æ¥â€å½“ä½œèµ„æºæ”¾å…¥â€œæ± â€ä¸­ï¼Œç»™æ‰€æœ‰çš„å¹¶å‘ä»»åŠ¡å…±äº«ï¼Œæ¯ä¸ªå¹¶å‘åœ¨éœ€è¦çš„æ—¶å€™ä»æ± ä¸­å–å‡ºè¿æ¥ï¼Œå®ŒæˆæŸ¥è¯¢åå†æ”¾å›æ± ä¸­ï¼Œä¸ä»…èƒ½å¤§å¹…é™ä½CPUçš„è´Ÿè½½ï¼Œä¹Ÿèƒ½å‡å°‘å†…å­˜çš„å¼€é”€ã€‚(ä½†æˆ‘ä¸ªäººè§‰å¾—æœ€çˆ½çš„åœ°æ–¹æ˜¯ï¼Œä½ çš„ä»£ç å¯ä»¥æ›´ä¸“æ³¨åœ°å»queryï¼Œè€Œä¸å¿…è€ƒè™‘connectionæœ¬èº«ğŸ˜‚)</p>
<p>åŒæ ·ï¼Œå…ˆæ¥çœ‹çœ‹poolçš„è¿ç”¨è¿‡ç¨‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  maxGoroutines  = <span class="number">25</span> <span class="comment">// è¦ä½¿ç”¨çš„goroutineçš„æ•°é‡</span></span><br><span class="line">  pooledResource = <span class="number">5</span>  <span class="comment">// æ± ä¸­çš„èµ„æºçš„æ•°é‡</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// dbConnection æ¨¡æ‹Ÿè¦å…±äº«çš„èµ„æº</span></span><br><span class="line"><span class="keyword">type</span> dbConnection <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID <span class="keyword">int32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Close å®ç°io.Closer.Closeæ¥å£ï¼Œé‡Šæ”¾èµ„æº</span></span><br><span class="line"><span class="comment">// è®©å…¶å¯ä»¥è¢«Poolç®¡ç†</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dbConn *dbConnection)</span> <span class="title">Close</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">  log.Println(<span class="string">&quot;Close: Connection&quot;</span>, dbConn.ID)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// idCounter ç”¨æ¥ç»™æ¯ä¸ªè¿æ¥åˆ†é…å”¯ä¸€id</span></span><br><span class="line"><span class="keyword">var</span> idCounter <span class="keyword">int32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// createConnection åˆ›å»ºå”¯ä¸€idçš„è¿æ¥</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createConnection</span><span class="params">()</span> <span class="params">(io.Closer, error)</span></span> &#123;</span><br><span class="line">  id := atomic.AddInt32(&amp;idCounter, <span class="number">1</span>)</span><br><span class="line">  log.Println(<span class="string">&quot;Create: New Connection&quot;</span>, id)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;dbConnection&#123;id&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// testPool Poolæµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testPool</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">  wg.Add(maxGoroutines)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºç®¡ç†è¿æ¥æ± ï¼Œå¹¶åˆ›å»ºNä¸ªâ€œè¿æ¥â€èµ„æºï¼ŒåŠ å…¥æ± ä¸­</span></span><br><span class="line">  p, err := pool.New(createConnection, pooledResource)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Println(err)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºMä¸ªå¹¶å‘ä»»åŠ¡ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">  <span class="keyword">for</span> query := <span class="number">0</span>; query &lt; maxGoroutines; query++ &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(q <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">      performQueries(q, p)</span><br><span class="line">      wg.Done()</span><br><span class="line">    &#125;(query)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  wg.Wait()</span><br><span class="line">  log.Println(<span class="string">&quot;Shutdown Program&quot;</span>)</span><br><span class="line">  p.Close() <span class="comment">// å…³é—­æ± </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">performQueries</span><span class="params">(query <span class="keyword">int</span>, p *pool.Pool)</span></span> &#123;</span><br><span class="line">  conn, err := p.Acquire()</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®ŒæˆæŸ¥è¯¢åï¼Œå°†èµ„æºé‡Šæ”¾ä¼šæ± é‡Œ</span></span><br><span class="line">  <span class="keyword">defer</span> p.Release(conn)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”¨éšæœºç¡çœ 1000å¾®å¦™å†…çš„æ—¶é•¿ï¼Œæ¥æ¨¡æ‹ŸæŸ¥è¯¢ä¸­çš„è€—æ—¶</span></span><br><span class="line">  time.Sleep(time.Duration(rand.Intn(<span class="number">1000</span>)) * time.Millisecond)</span><br><span class="line">  log.Printf(<span class="string">&quot;QID[%d] CID[%d]\n&quot;</span>, query, conn.(*dbConnection).ID)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(å¯èƒ½æ˜¯æˆ‘æ²¡å­¦ä¹ åˆ°ä½ï¼Œæˆ‘ä¸ªäººè§‰å¾—poolæ¨¡å¼å¹¶ä¸æ˜¯ç‰¹åˆ«å®¹æ˜“æŒæ¡ï¼Œæ€æƒ³æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œä½†ç‰µæ‰¯å¤ªå¤šæ¥å£å®ç°ã€æœ‰/æ— ç¼“å†²é€šé“çš„ç‰¹æ€§ç­‰å†…å®¹ï¼Œæ‰€ä»¥ä»£ç å¯èƒ½è¦å†å¤šæ¶ˆåŒ–å‡ éã€‚)</p>
<p>å†çœ‹çœ‹poolåŒ…çš„å®ç°ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pool èµ„æºæ± </span></span><br><span class="line"><span class="comment">// ç®¡ç†ä¸€ç»„èµ„æºï¼Œå¯ä»¥å®‰å…¨åœ°åœ¨å¤šä¸ªgoroutineå…±äº«</span></span><br><span class="line"><span class="comment">// å®ç° io.Closeræ¥å£</span></span><br><span class="line"><span class="keyword">type</span> Pool <span class="keyword">struct</span> &#123;</span><br><span class="line">  m        sync.Mutex</span><br><span class="line">  resource <span class="keyword">chan</span> io.Closer</span><br><span class="line">  factory  <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="params">(io.Closer, error)</span></span></span><br><span class="line">  closed   <span class="keyword">bool</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ErrPoolClosed èµ„æºæ± å·²å…³é—­çš„é”™è¯¯æ ‡ç¤º</span></span><br><span class="line"><span class="keyword">var</span> ErrPoolClosed = errors.New(<span class="string">&quot;Pool has been closed&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// New åˆ›å»ºPoolçš„å·¥å‚å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(fn <span class="keyword">func</span>()</span> <span class="params">(io.Closer, error)</span>, <span class="title">size</span> <span class="title">uint</span>) <span class="params">(*Pool, error)</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> size &lt;= <span class="number">0</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, errors.New(<span class="string">&quot;size value too small&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;Pool&#123;</span><br><span class="line">    factory:  fn,</span><br><span class="line">    resource: <span class="built_in">make</span>(<span class="keyword">chan</span> io.Closer, size),</span><br><span class="line">  &#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Acquire ä»èµ„æºæ± ä¸­è·å–ä¸€ä¸ªèµ„æº</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Pool)</span> <span class="title">Acquire</span><span class="params">()</span> <span class="params">(io.Closer, error)</span></span> &#123;</span><br><span class="line">  <span class="keyword">select</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> r, ok := &lt;-p.resource:</span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦æœ‰ç©ºé—²èµ„æº</span></span><br><span class="line">    log.Println(<span class="string">&quot;Acquire:&quot;</span>, <span class="string">&quot;Shared Resource&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> !ok &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span>, ErrPoolClosed</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r, <span class="literal">nil</span></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰å¯ç”¨èµ„æºï¼Œå°±åˆ›å»ºä¸€ä¸ª</span></span><br><span class="line">    log.Println(<span class="string">&quot;Acquire:&quot;</span>, <span class="string">&quot;New Resource&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> p.factory()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Release é‡Šæ”¾ä¸€ä¸ªèµ„æºï¼Œå°†å…¶æ”¾å›èµ„æºæ± </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Pool)</span> <span class="title">Release</span><span class="params">(r io.Closer)</span></span> &#123;</span><br><span class="line">  p.m.Lock()</span><br><span class="line">  <span class="keyword">defer</span> p.m.Unlock()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœè¯¥èµ„æºå·²ç»è¢«å…³é—­ï¼Œé”€æ¯è¿™ä¸ªèµ„æº</span></span><br><span class="line">  <span class="keyword">if</span> p.closed &#123;</span><br><span class="line">    r.Close()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">select</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> p.resource &lt;- r:</span><br><span class="line">    <span class="comment">// è¯•å›¾å°†è¯¥èµ„æºåŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">    log.Println(<span class="string">&quot;Release:&quot;</span>, <span class="string">&quot;In Queue&quot;</span>)</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">// å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œå…³é—­è¿™ä¸ªèµ„æº</span></span><br><span class="line">    log.Println(<span class="string">&quot;Release:&quot;</span>, <span class="string">&quot;Closing&quot;</span>)</span><br><span class="line">    r.Close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Close å…³é—­èµ„æºæ± ä¸­çš„æ‰€æœ‰èµ„æºï¼Œå¹¶åœæ­¢å·¥ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Pool)</span> <span class="title">Close</span><span class="params">()</span></span> &#123;</span><br><span class="line">  p.m.Lock()</span><br><span class="line">  <span class="keyword">defer</span> p.m.Unlock()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> p.closed &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  p.closed = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">close</span>(p.resource)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…³é—­æ‰€æœ‰èµ„æº</span></span><br><span class="line">  <span class="keyword">for</span> r := <span class="keyword">range</span> p.resource &#123;</span><br><span class="line">    r.Close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>poolèµ„æºæ± å®ç°çš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>æœ‰ç¼“å†²é€šé“è¯»å†™æ—¶ä¸ä¼šå¼•èµ·é˜»å¡ï¼Œselectè¯­å¥åœ¨é€šé“å†…æ²¡æœ‰æ•°æ®çš„æƒ…å†µä¸‹ä¼šè‡ªåŠ¨æ‰§è¡Œdefaulté€‰é¡¹</strong>ã€‚</p>
<h2 id="work"><a href="#work" class="headerlink" title="work"></a>work</h2><p>workæ¨¡å¼å°±æ˜¯åˆ›å»ºä¸€ä¸ªgoroutineæ± ï¼Œç®¡ç†æ± ä¸­æ‰€æœ‰çš„goroutineç»Ÿä¸€æ‰§è¡Œã€‚ä½†å®ƒæœ‰åˆ«äºrunneræ¨¡å¼ï¼Œrunnerå…¶å®æ˜¯è´Ÿè´£ç›‘æ§æ± ä¸­çš„æ¯ä¸ªå¹¶å‘ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸçš„ï¼Œè€Œworkåˆ™æ˜¯è´Ÿè´£æ± ä¸­çš„æ¯ä¸ªå¹¶å‘ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼Œå³ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼çš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥å¾ˆå¥½åœ°æ§åˆ¶ç¨‹åºè¿è¡Œçš„è´Ÿè½½ï¼Œæ¯”å¦‚çªå‘æƒ…å†µä¸‹ï¼ŒæŸå°æœåŠ¡å™¨çš„httpè¯·æ±‚ä¸€ç¬é—´åˆ°è¾¾100ä¸‡ï¼Œå¦‚æœä¸ºäº†å“åº”æ‰€æœ‰è¯·æ±‚ä¹Ÿåœ¨ä¸€ç¬èµ·å¯åŠ¨100ä¸‡ä¸ªå“åº”ä»»åŠ¡ï¼Œé‚£ä¼°è®¡æœåŠ¡å™¨å°±å†’çƒŸäº†ã€‚æ‰€ä»¥æœ€å¥½çš„æ–¹å¼å°±æ˜¯é™åˆ¶å¹¶å‘ä»»åŠ¡æ•°é‡ï¼Œæ¯”å¦‚æ¯æ¬¡æœ€å¤šå¯åŠ¨1ä¸‡ä¸ªå“åº”ï¼Œå‰©ä¸‹çš„æ’é˜Ÿæ…¢æ…¢æ¥ã€‚</p>
<p>å› æ­¤ï¼Œworkå°±æ˜¯ä¸€ä¸ªå¹¶å‘ä»»åŠ¡çš„é˜Ÿåˆ—æ± ï¼Œè¿˜æ˜¯å…ˆçœ‹çœ‹å¦‚ä½•è¿ç”¨çš„ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = []<span class="keyword">string</span>&#123;</span><br><span class="line">  <span class="string">&quot;steve&quot;</span>,</span><br><span class="line">  <span class="string">&quot;bob&quot;</span>,</span><br><span class="line">  <span class="string">&quot;mary&quot;</span>,</span><br><span class="line">  <span class="string">&quot;therese&quot;</span>,</span><br><span class="line">  <span class="string">&quot;jason&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> namePrinter <span class="keyword">struct</span> &#123;</span><br><span class="line">  name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Task å®ç°Workeræ¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *namePrinter)</span> <span class="title">Task</span><span class="params">()</span></span> &#123;</span><br><span class="line">  log.Println(m.name)</span><br><span class="line">  time.Sleep(time.Second)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testWork</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// è®¾ç½®å·¥ä½œæ± çš„â€œå·¥ä½â€ä¸º2ï¼Œå³æ¯æ¬¡åªèƒ½æœ‰ä¸¤ä¸ªäººå·¥ä½œ</span></span><br><span class="line">  p := work.New(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">  wg.Add(<span class="number">100</span> * <span class="built_in">len</span>(names)) <span class="comment">// æ¯äººè‚©è´Ÿ100é¡¹ä»»åŠ¡ï¼Œå…±5äºº</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸€æ¬¡æ€§æŠŠ5 * 100ä¸ªä»»åŠ¡å…¨éƒ¨ä¸¢åˆ°å·¥ä½œæ± ä¸­</span></span><br><span class="line">  <span class="comment">// ç›¸å½“äºåˆ›å»ºäº†500ä¸ªgoroutine</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">    <span class="keyword">for</span> _, name := <span class="keyword">range</span> names &#123;</span><br><span class="line">      np := namePrinter&#123;name: name&#125;</span><br><span class="line">      <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        p.Run(&amp;np) <span class="comment">// å°†å¯¹è±¡çš„ä»»åŠ¡ä¸¢åˆ°å·¥ä½œæ± ä¸­ç»Ÿä¸€ç®¡ç†æ‰§è¡Œ</span></span><br><span class="line">        wg.Done()</span><br><span class="line">      &#125;()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡åœ¨å·¥ä½œæ± ä¸­è¢«å®Œæˆ</span></span><br><span class="line">  wg.Wait()</span><br><span class="line">  p.Shutdown()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šä»£ç ï¼ŒnamePrinterå®ç°äº†workåŒ…å†…è§„å®šçš„<code>Task</code>æ¥å£ä¹‹åï¼Œworkçš„å·¥ä½œæ± å°±èƒ½å¤Ÿç»Ÿä¸€ç®¡ç†namePrinterå¯¹è±¡äº†ã€‚è¿™ä¸ªnamePrinterå¯ä»¥ç†è§£ä¸ºæŸä¸ªä¸šåŠ¡çš„æ¨¡æ‹Ÿï¼Œæ¯”å¦‚ä¸Šé¢è¯´çš„httpå“åº”ä»»åŠ¡(è¿™é‡Œä»…æ˜¯ç®€å•åœ°åšä¸ªæ‰“å°)ã€‚</p>
<p>è€Œåï¼Œä¸è®ºåˆ›å»ºå¤šå°‘ä¸ªnamePrinterç›¸å…³çš„goroutine(å¹¶å‘)ï¼Œéƒ½åªéœ€ç®€å•åœ°å°†å…¶ä¸¢åˆ°å·¥ä½œæ± ä¸­Run(p.Runå¹¶æ²¡æœ‰ç«‹åˆ»å¯åŠ¨ä»»åŠ¡ï¼Œå·¥ä½œæ± ä¼šæ ¹æ®æƒ…å†µè‡ªè¡Œå®‰æ’)ã€‚</p>
<p>æœ€ååœ¨çœ‹çœ‹workåŒ…çš„å®ç°ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Worker å¿…é¡»æ»¡è¶³æ¥å£ï¼Œæ‰èƒ½ä½¿ç”¨å·¥ä½œæ± </span></span><br><span class="line"><span class="keyword">type</span> Worker <span class="keyword">interface</span> &#123;</span><br><span class="line">  Task()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pool å·¥ä½œæ± ï¼Œç›¸å½“äºgoroutinesæ± ç®¡ç†</span></span><br><span class="line"><span class="keyword">type</span> Pool <span class="keyword">struct</span> &#123;</span><br><span class="line">  work <span class="keyword">chan</span> Worker</span><br><span class="line">  wg   sync.WaitGroup</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// New åˆ›å»ºå·¥ä½œæ± çš„å·¥å‚å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(maxGoroutines <span class="keyword">int</span>)</span> *<span class="title">Pool</span></span> &#123;</span><br><span class="line">  p := Pool&#123;</span><br><span class="line">    work: <span class="built_in">make</span>(<span class="keyword">chan</span> Worker),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  p.wg.Add(maxGoroutines)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; maxGoroutines; i++ &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="comment">// p.workæ˜¯é€šé“ï¼Œæ‰€æœ‰åˆ›å»ºgoroutineä¹‹å</span></span><br><span class="line">      <span class="comment">// forå¾ªç¯ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°p.workè¢«å…³é—­ä¸ºæ­¢</span></span><br><span class="line">      <span class="keyword">for</span> w := <span class="keyword">range</span> p.work &#123;</span><br><span class="line">        w.Task()</span><br><span class="line">      &#125;</span><br><span class="line">      p.wg.Done()</span><br><span class="line">    &#125;()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Run æäº¤å·¥ä½œåˆ°å·¥ä½œæ± </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Pool)</span> <span class="title">Run</span><span class="params">(w Worker)</span></span> &#123;</span><br><span class="line">  p.work &lt;- w</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Shutdown ç­‰å¾…æ‰€æœ‰goroutinesç»“æŸ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Pool)</span> <span class="title">Shutdown</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="built_in">close</span>(p.work)</span><br><span class="line">  p.wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>workçš„å®ç°å…¶å®æ˜¯éå¸¸ç®€å•çš„ï¼Œ<strong>æ ¸å¿ƒæ€æƒ³æ˜¯for-rangeå¾ªç¯æ—¶ï¼Œæ— ç¼“å†²é€šé“ä¼šé˜»å¡</strong>ï¼Œå·¥ä½œæ± æ˜¯ä¸€ä¸ªæ— ç¼“å†²é€šé“ï¼Œè€Œæ¯ä¸ªfor-rangeéƒ½ç›¸å½“äºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå½“æ± ä¸­æœ‰æ•°æ®æ˜¯ï¼Œæ‰€æœ‰çš„for-rangeéƒ½ä¼šäº‰å¤ºè¿™ä¸ªè¾“å…¥æ•°æ®æ¥å¤„ç†ï¼Œä½†å¦‚æœæŸä¸ªé˜Ÿåˆ—æœ¬èº«å·²ç»åœ¨å·¥ä½œæ—¶ï¼Œå°±æ²¡ç©ºå†äº‰å¤ºé€šé“å†…çš„æ•°æ®ã€‚å¯ä»¥è¯´æ˜¯æœ€ç®€å•æœ‰æ•ˆçš„è´Ÿè½½å‡è¡¡ã€‚</p>
<h2 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h2><ul>
<li>æ— ç¼“å†²é€šé“åœ¨è¯»å†™æ—¶ä¼šå¼•èµ·é˜»å¡ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶ç¨‹åºç”Ÿå‘½å‘¨æœŸ</li>
<li>å¸¦defaultåˆ†æ”¯çš„selectè¯­å¥ä¼šå°è¯•è¯»å†™é€šé“ï¼Œè€Œä¸ä¼šé˜»å¡</li>
<li>å¯ä»¥åˆ©ç”¨æ— ç¼“å†²é€šé“åˆ›å»ºä¸€ä¸ªå·¥ä½œæ± ï¼Œç»Ÿä¸€ç®¡ç†goroutineå¹¶å‘ä»»åŠ¡</li>
<li>å¯ä»¥åˆ©ç”¨æœ‰ç¼“å†²é€šé“åˆ›å»ºä¸€ä¸ªèµ„æºæ± ï¼Œç»Ÿä¸€ç®¡ç†å¹¶å‘æ—¶çš„èµ„æºè®¿é—®</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/30/" class="post-title-link" itemprop="url">ä¸è¦é‡å¤è‡ªæˆ‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-02 10:13:14" itemprop="dateCreated datePublished" datetime="2019-03-02T10:13:14+08:00">2019-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/30/" class="post-meta-item leancloud_visitors" data-flag-title="ä¸è¦é‡å¤è‡ªæˆ‘" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/30/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/30/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_30/">Donâ€™t Repeat Yourself</a></p>
<p>ç¼–ç¨‹çš„æ‰€æœ‰åŸåˆ™ä¸­ï¼Œä¸è¦é‡å¤è‡ªæˆ‘(DRY)æˆ–è®¸æ˜¯æœ€åŸºæœ¬çš„åŸåˆ™ä¹‹ä¸€ã€‚è¯¥åŸåˆ™è¢«Andy Huntå’ŒDave Thomasçš„ã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“ã€‹ä¸€ä¹¦ä¸­æå‡ºï¼Œä¾¿æˆäº†å¾ˆå¤šä¸ºçŸ¥åè½¯ä»¶å¼€å‘çš„æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼çš„åŸºç¡€ã€‚å¼€å‘äººå‘˜å­¦ä¹ è¾¨è®¤å‰¯æœ¬ï¼Œå¹¶ç†è§£å¦‚ä½•é€šè¿‡é€‚å½“çš„å®è·µå’ŒæŠ½è±¡æ¥æ¶ˆé™¤è¿™äº›é‡å¤ï¼Œç›¸æ¯”äºä¸€ç›´è¢«ä¼ æŸ“å¤šä½™çš„é‡å¤ä»£ç çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥äº§å‡ºæ›´ç®€æ´çš„ä»£ç ã€‚</p>
<h2 id="å¤åˆ¶æ˜¯ç§æµªè´¹"><a href="#å¤åˆ¶æ˜¯ç§æµªè´¹" class="headerlink" title="å¤åˆ¶æ˜¯ç§æµªè´¹"></a>å¤åˆ¶æ˜¯ç§æµªè´¹</h2><p>åº”ç”¨ç¨‹åºçš„ä»£ç ä¸­çš„æ¯è¡Œä»£ç éƒ½å°†ä¼šç»´æŠ¤ï¼Œä¹Ÿå°†ä¼šæˆä¸ºæ½œåœ¨çš„bugã€‚é‡å¤ä¼šä½¿ä»£ç åº“ä¸å¿…è¦çš„è‡ƒè‚¿ï¼Œç»“æœè®©bugæœ‰æœºå¯ä¹˜ï¼Œå¹¶å¢åŠ ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚é‡å¤çš„è‡ƒè‚¿åŠ å…¥ç³»ç»Ÿä¹Ÿä¼šè®©å¼€å‘è€…éš¾ä»¥å½»åº•ç†è§£ç³»ç»Ÿå…¨è²Œè€Œï¼Œè¿˜æœ‰ä¸€ç‚¹å¯ä»¥ç¡®å®šï¼Œå¦å¤–ä¸ºäº†ç¡®ä¿å®ƒä»¬èƒ½æ­£å¸¸å·¥ä½œï¼Œä¿®æ”¹äº†æŸå¤„çš„é€»è¾‘ä¹Ÿéœ€è¦ä¿®æ”¹å¦ä¸€å¤„çš„å¤åˆ¶ã€‚DRYéœ€è¦â€œç³»ç»Ÿå†…æ¯å¤„çš„çŸ¥è¯†éƒ½å¿…é¡»å…·æœ‰å•ä¸€ã€æ˜ç¡®ã€æƒå¨çš„è¡¨ç¤ºâ€ã€‚</p>
<h2 id="è¿‡ç¨‹ä¸­çš„é‡å¤è¦è‡ªåŠ¨åŒ–"><a href="#è¿‡ç¨‹ä¸­çš„é‡å¤è¦è‡ªåŠ¨åŒ–" class="headerlink" title="è¿‡ç¨‹ä¸­çš„é‡å¤è¦è‡ªåŠ¨åŒ–"></a>è¿‡ç¨‹ä¸­çš„é‡å¤è¦è‡ªåŠ¨åŒ–</h2><p>å¾ˆå¤šè½¯ä»¶å¼€å‘ä¸­çš„æµç¨‹éƒ½æ˜¯ç®€å•è€Œé‡å¤çš„è‡ªåŠ¨åŒ–ã€‚DRYåŸåˆ™é€‚ç”¨äºè¿™äº›åº”ç”¨ç¨‹åºæºç ä¸­çš„ä¸Šä¸‹æ–‡ã€‚æ‰‹åŠ¨æµ‹è¯•å¤ªæ…¢äº†ï¼Œå®¹æ˜“å‡ºé”™ï¼Œä¹Ÿå¾ˆéš¾é‡å¤æ“ä½œï¼Œæ‰€ä»¥å¦‚æœå¯èƒ½çš„è¯ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶åº”è¯¥è¢«ç”¨èµ·æ¥ã€‚å¦‚æœæ‰‹åŠ¨è¿›è¡Œè½¯ä»¶é›†æˆå¯èƒ½ä¼šè€—æ—¶ä¸”å®¹æ˜“å‡ºé”™ï¼Œå› æ­¤æ„å»ºè¿‡ç¨‹åº”å°½å¯èƒ½é¢‘ç¹åœ°è¿è¡Œï¼Œç†æƒ³æƒ…å†µä¸‹æ¯æ¬¡ç­¾å…¥(ä»£ç åº“)æ—¶éƒ½è·‘ä¸€éã€‚åªè¦å­˜åœ¨èƒ½è¢«è‡ªåŠ¨åŒ–çš„ç—›è‹¦çš„äººå·¥æµç¨‹ï¼Œéƒ½åº”è¯¥è¢«è‡ªåŠ¨åŒ–å’Œæ ‡å‡†åŒ–ã€‚å…¶ç›®æ ‡æ˜¯ç¡®ä¿ä»…æœ‰å”¯ä¸€çš„æ–¹å¼æ¥å®Œæˆä»»åŠ¡ï¼Œå¹¶ä¸”è¦å°½å¯èƒ½åšåˆ°æ— ç—›ã€‚</p>
<h2 id="é€»è¾‘ä¸­çš„é‡å¤è¦æŠ½è±¡"><a href="#é€»è¾‘ä¸­çš„é‡å¤è¦æŠ½è±¡" class="headerlink" title="é€»è¾‘ä¸­çš„é‡å¤è¦æŠ½è±¡"></a>é€»è¾‘ä¸­çš„é‡å¤è¦æŠ½è±¡</h2><p>é€»è¾‘ä¸­çš„é‡å¤ä¼šæœ‰å¾ˆå¤šå½¢å¼ã€‚å¤åˆ¶ç²˜è´´if-thenæˆ–switch-caseé€»è¾‘æ˜¯æœ€å®¹æ˜“æ£€æŸ¥å¹¶çº æ­£çš„ã€‚å¾ˆå¤šè®¾è®¡æ¨¡å¼éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡ï¼Œè¦é™ä½æˆ–æ¶ˆé™¤åº”ç”¨ç¨‹åºä¸­çš„é‡å¤ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨ä½¿ç”¨å‰éœ€è¦åŒæ—¶å…·å¤‡å‡ ä¸ªäº‹æƒ…çš„å‘ç”Ÿï¼Œå°±å¯ä»¥ç”¨æŠ½è±¡å·¥å‚æˆ–è€…å·¥å‚æ–¹æ³•æ¥å®Œæˆã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºä¼šæœ‰å¾ˆå¤šå¯èƒ½çš„å˜åŒ–ï¼Œè¿™äº›è¡Œä¸ºå°±å¯ä»¥é€šè¿‡ç­–ç•¥æ¨¡å¼æ¥æ³¨å…¥ï¼Œè¦å¥½äºå¤§é‡çš„if-thenç»“æ„ã€‚äº‹å®ä¸Šï¼Œè®¾è®¡æ¨¡å¼æœ¬èº«çš„åˆ¶å®šæ˜¯ä¸ºäº†é™ä½å¸¸è§é—®é¢˜å¸¦æ¥çš„é‡å¤ï¼Œå¹¶è®¨è®ºè¿™äº›è§£å†³æ–¹æ¡ˆã€‚æ­¤å¤–ï¼ŒDRYå¯ä»¥é€‚ç”¨äºæ•°æ®ç»“æ„ï¼Œå¦‚æ•°æ®åº“æ¨¡å¼ï¼Œä»è€Œæ›´è§„èŒƒã€‚</p>
<h2 id="ä¸€ä¸ªåŸåˆ™é—®é¢˜"><a href="#ä¸€ä¸ªåŸåˆ™é—®é¢˜" class="headerlink" title="ä¸€ä¸ªåŸåˆ™é—®é¢˜"></a>ä¸€ä¸ªåŸåˆ™é—®é¢˜</h2><p>å…¶å®ƒçš„è½¯ä»¶åŸåˆ™ä¹Ÿå’ŒDRYç›¸å…³ã€‚<strong>æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡åŸåˆ™</strong>ï¼Œä»…é€‚ç”¨äºä»£ç åŠŸèƒ½è¡Œä¸ºï¼Œå¯ä»¥è¢«è®¤ä¸ºæ˜¯DRYçš„ä¸€ä¸ªå­é›†ã€‚<strong>å¼€é—­åŸåˆ™</strong>ï¼Œâ€œè½¯ä»¶ä¸­çš„å®ä½“åº”å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­â€çš„æƒ…å†µï¼Œä»…åœ¨éµå¾ªDRYæ—¶æ‰èƒ½åœ¨å®è·µä¸­èµ·ä½œç”¨ã€‚åŒæ ·ä¼—æ‰€å‘¨çŸ¥çš„<strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼Œéœ€è¦ä¸€ä¸ªç±»â€œåªæœ‰ä¸€ä¸ªæ”¹å˜åŸå› â€ä¾èµ–äºDRYã€‚</p>
<p>å½“éµå¾ªç»“æ„ã€é€»è¾‘ã€æµç¨‹ã€ä»¥åŠå‡½æ•°æ—¶ï¼ŒDRYåŸåˆ™èƒ½ä¸ºå¼€å‘äººå‘˜æä¾›åŸºæœ¬æŒ‡å¯¼ï¼Œå¹¶å¸®åŠ©åˆ›å»ºæ›´ç®€å•ï¼Œæ›´æ˜“äºç»´æŠ¤ï¼Œæ›´é«˜è´¨é‡çš„åº”ç”¨ã€‚å°½ç®¡æœ‰ä¸€äº›æƒ…å†µä¸‹ï¼Œå¿…é¡»ç”¨é‡å¤æ¥æ»¡è¶³æ€§èƒ½æˆ–å…¶å®ƒéœ€æ±‚(ä¾‹å¦‚æ•°æ®åº“ä¸­çš„éè§„èŒƒåŒ–æ•°æ®)ï¼Œå®ƒåº”è¯¥è¢«ç›´æ¥ç”¨äºè§£å†³å®é™…è€Œéæƒ³è±¡çš„é—®é¢˜ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/29/" class="post-title-link" itemprop="url">ä¸è¦ä¾èµ–â€œé­”æ³•å‡ºç°â€</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-02-26 07:56:41" itemprop="dateCreated datePublished" datetime="2019-02-26T07:56:41+08:00">2019-02-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/29/" class="post-meta-item leancloud_visitors" data-flag-title="ä¸è¦ä¾èµ–â€œé­”æ³•å‡ºç°â€" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/29/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/29/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_29/">Donâ€™t Rely on â€œMagic Happens Hereâ€</a></p>
<p>å¦‚æœä½ çœ‹è¿‡è¶³å¤Ÿå¤šçš„ä»»ä½•æ´»åŠ¨ã€æµç¨‹ã€æˆ–çºªå¾‹ï¼Œå®ƒä»¬éƒ½çœ‹èµ·æ¥å¾ˆç®€å•ã€‚ä¸€ä¸ªæ²¡æœ‰å¼€å‘ç»éªŒçš„ç»ç†ä¼šè®¤ä¸ºç¨‹åºå‘˜åšçš„äº‹æƒ…å¾ˆç®€å•ï¼ŒåŒæ ·çš„ï¼Œä¸€ä¸ªæ²¡æœ‰ç®¡ç†ç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿä¼šè¿™ä¹ˆçœ‹å¾…ç»ç†æ‰€åšçš„äº‹æƒ…ã€‚</p>
<p>ç¼–ç¨‹æ˜¯ä¸€äº›äººåœ¨ä¸€äº›æ—¶å€™åšçš„äº‹æƒ…ã€‚å…¶ä¸­å›°éš¾çš„éƒ¨åˆ†â€”â€”æ€è€ƒâ€”â€”æ˜¯æœ€ä¸å®¹æ˜“è¢«å¤–è¡Œçœ‹åˆ°å’Œèµèµçš„ã€‚å‡ åå¹´æ¥ï¼Œå·²ç»æœ‰è®¸å¤šå°è¯•æƒ³è¦ç§»é™¤è¿™äº›ç†Ÿç»ƒæ€ç»´çš„éœ€æ±‚ã€‚æœ€è¿‘çš„ä¹Ÿæ˜¯æœ€éš¾å¿˜çš„ä¸€ä¸ªæ˜¯<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%91%9B%E9%BA%97%E7%B5%B2%C2%B7%E9%9C%8D%E6%99%AE">æ ¼è•¾ä¸Â·èµ«æŸ(Grace Hopper)</a>è‡´åŠ›äºä½¿ç¼–ç¨‹è¯­è¨€ä¸é‚£ä¹ˆç¥ç§˜â€”â€”ä¸€äº›äººè¯­è¨€è¿™å°†æ¶ˆé™¤å¯¹ä¸“ä¸šç¨‹åºå‘˜çš„éœ€æ±‚ã€‚ç»“æœ(COBOLè¯­è¨€)åœ¨éšåçš„å‡ åå¹´ä¸­ä¸ºå¤§é‡çš„ä¸“ä¸šç¨‹åºå‘˜çš„æ”¶å…¥ä½œå‡ºäº†è´¡çŒ®ã€‚</p>
<p>æ¶ˆé™¤ç¼–ç¨‹ä»¥ç®€åŒ–è½¯ä»¶å¼€å‘æ˜¯ä¸ªé•¿ä¹…çš„æ„¿æ™¯ï¼Œå¯¹äºç†ŸçŸ¥å…¶(å†…éƒ¨çš„)å¤æ‚ç¨‹åºçš„ç¨‹åºå‘˜è€Œè¨€ï¼Œæ˜¾ç„¶å¾ˆå¤©çœŸã€‚ä½†æ˜¯å¯¼è‡´è¿™äº›é”™è¯¯çš„å¿ƒç†è¿‡ç¨‹æ˜¯äººæ€§çš„ä¸€éƒ¨åˆ†ï¼Œç¨‹åºå‘˜ä¹Ÿä¼šæƒ³ä»–äººä¸€æ ·å®¹æ˜“å‡ºç°ã€‚</p>
<p>åœ¨ä»»ä½•é¡¹ç›®ä¸­ï¼Œæœ‰å¾ˆå¤šæ½œåœ¨çš„äº‹æƒ…æ˜¯ä¸ªåˆ«ç¨‹åºå‘˜æ²¡æœ‰ç§¯æå‚ä¸çš„ï¼šä»ç”¨æˆ·ä¸­å¼•å‡ºéœ€æ±‚ï¼Œè·å¾—é¢„ç®—å®¡æ‰¹ï¼Œè®¾ç½®æ„å»ºæœåŠ¡å™¨ï¼Œéƒ¨ç½²åº”ç”¨åˆ°è´¨é‡ä¿è¯å’Œç”Ÿäº§ç¯å¢ƒï¼Œä»æ—§çš„æµç¨‹æˆ–ç¨‹åºä¸­è¿ç§»ä¸šåŠ¡ï¼Œç­‰ç­‰ã€‚</p>
<p>å½“ä½ æ— æ³•ç§¯æå‚ä¸åˆ°æŸä»¶äº‹ä¸­æ—¶ï¼Œå°±ä¼šæ— æ„è¯†åœ°è¶‹äºå‡è®¾å®ƒä»¬éƒ½å¾ˆç®€å•æˆ–ç€ä¼šæœ‰â€œé­”æ³•â€å‡ºç°ã€‚å°½ç®¡é­”æ³•æŒç»­å‡ºç°è®©ä¸€åˆ‡å®‰ç¨³ã€‚ä½†æ˜¯â€”â€”å®ƒä»¬é€šå¸¸æ˜¯â€œä½•æ—¶â€è€Œä¸æ˜¯â€œå¦‚æœâ€â€”â€”é­”æ³•çš„åœæ­¢äº†ï¼Œè¯¥é¡¹ç›®å°±ä¼šé™·å…¥å›°å¢ƒã€‚</p>
<p>æˆ‘çŸ¥é“é¡¹ç›®äºä¼šæ¶ˆè€—æ‰æ•°å‘¨å¼€å‘è€…çš„æ—¶é—´ï¼Œå› ä¸ºæ²¡æœ‰ä¸€ä¸ªäººäº†è§£è¯¥æ€æ ·åŠ è½½å®ƒä»¬ä¾èµ–çš„â€œæ­£ç¡®â€ç‰ˆæœ¬çš„dllã€‚å½“äº‹æƒ…å¼€å§‹æ–­æ–­ç»­ç»­åœ°å‡ºé”™æ—¶ï¼Œåœ¨æœ‰äººæ³¨æ„åˆ°æ­£åœ¨åŠ è½½â€œä¸€ä¸ªé”™è¯¯â€ç‰ˆæœ¬çš„dllä¹‹å‰ï¼Œå›¢é˜Ÿæˆå‘˜è¿˜åœ¨ä»»ä½•åœ°æ–¹æŸ¥æ‰¾ã€‚</p>
<p>å…¶å®ƒéƒ¨é—¨è¿è½¬å¹³ç¨³â€”â€”é¡¹ç›®å‡†æ—¶äº¤ä»˜ï¼Œæ²¡æœ‰æ¨è¿Ÿå¤œé—´è°ƒè¯•ä¼šè®®ï¼Œæ²¡æœ‰ç´§æ€¥ä¿®å¤ã€‚å¦‚æ­¤å¹³ç¨³ï¼Œäº‹å®ä¸Šï¼Œé«˜çº§ç»ç†éƒ½è§‰å¾—è¿™äº‹èƒ½â€œè‡ªå·±è¿è½¬â€ï¼Œå®ƒä»¬éƒ½ä¸éœ€è¦ç®¡ç†è€…äº†ã€‚ç„¶è€Œ6ä¸ªæœˆå†…ï¼Œè¯¥éƒ¨é—¨çš„é¡¹ç›®çœ‹èµ·æ¥å°±åƒç»„ç»‡çš„å¤šä½™éƒ¨åˆ†ä¸€æ ·â€”â€”å¤ªè¿Ÿäº†ï¼Œç–¯ç‹‚è¿ç»­çš„æ‰“è¡¥ä¸ã€‚</p>
<p>ä½ ä¸éœ€è¦ç†è§£æ‰€æœ‰çš„è®©ä½ é¡¹ç›®å·¥ä½œçš„é­”æ³•ï¼Œä½†ç†è§£å®ƒçš„ä¸€éƒ¨åˆ†ä¹Ÿæ²¡åå¤„â€”â€”æˆ–è€…æ„Ÿæ¿€é‚£äº›æ‡‚å¾—ä½ æœªçŸ¥é¢†åŸŸçš„äººã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œç¡®ä¿å½“é­”æ³•åœæ­¢çš„æ—¶å€™ï¼Œå®ƒå¯èƒ½å†æ¬¡å¯åŠ¨ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/books/%E6%B8%85%E9%86%92%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/books/%E6%B8%85%E9%86%92%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF/" class="post-title-link" itemprop="url">ã€Šæ¸…é†’æ€è€ƒçš„è‰ºæœ¯ã€‹è¯»ä¹¦ç¬”è®°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-02-24 18:00:25" itemprop="dateCreated datePublished" datetime="2019-02-24T18:00:25+08:00">2019-02-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">è¯»ä¹¦</span></a>
                </span>
            </span>

          
            <span id="/books/%E6%B8%85%E9%86%92%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF/" class="post-meta-item leancloud_visitors" data-flag-title="ã€Šæ¸…é†’æ€è€ƒçš„è‰ºæœ¯ã€‹è¯»ä¹¦ç¬”è®°" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/books/%E6%B8%85%E9%86%92%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/books/%E6%B8%85%E9%86%92%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>é¦–å…ˆè¦è‚¯å®šï¼Œè¿™æœ¬ä¹¦çš„é˜…è¯»ä½“éªŒéå¸¸å¥½ï¼Œæœ¬ä¹¦æ€»ç»“äº†52ç§ç”Ÿæ´»â€œå¸¸è§â€çš„æ€ç»´è¯¯åŒºï¼Œæ¯ä¸€ç§éƒ½æ˜¯ä¸€åƒå­—å·¦å³çš„æ€»ç»“ï¼Œå…¶å†…å®¹æµ…æ˜¾æ˜“æ‡‚ä½†åˆç•¥å¸¦é¢ è¦†ï¼ŒåŠ ä¸Šä¸€äº›é…å›¾ï¼Œè¯»èµ·æ¥å¹²å‡€åˆ©è½ã€‚</p>
<p>ä¸è¿‡é˜…è¯»å½’é˜…è¯»ï¼Œè¿™ç§è§‚ç‚¹â€œé›¶æ•£â€çš„å†…å®¹ä¸åˆ©äºå†™ä¹¦è¯„ï¼Œæˆ‘ä¹Ÿä¸æ‰“ç®—ç»™æ¯ç§æ€ç»´é”™è¯¯éƒ½å†™ä¸ªæ€»ç»“â€”â€”æ¯•ç«Ÿå°±ä¸€åƒå¤šå­—ï¼Œè¿˜ä¸å¦‚è¯»åŸæ–‡ã€‚æ‰€ä»¥æˆ‘åªæ˜¯ç®€å•åœ°ç©¿æ’å…¶ä¸­çš„ä¸€äº›æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„è§‚ç‚¹ï¼Œæ•´ç†æˆæ–‡ã€‚</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/books/%E6%B8%85%E9%86%92%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/GoInAction/chapter6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/GoInAction/chapter6/" class="post-title-link" itemprop="url">å…­ï¼šå¹¶å‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-02-24 15:30:02" itemprop="dateCreated datePublished" datetime="2019-02-24T15:30:02+08:00">2019-02-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E3%80%8AGO%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">ã€ŠGOè¯­è¨€å®æˆ˜ã€‹å­¦ä¹ ç¬”è®°</span></a>
                </span>
            </span>

          
            <span id="/GoInAction/chapter6/" class="post-meta-item leancloud_visitors" data-flag-title="å…­ï¼šå¹¶å‘" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/GoInAction/chapter6/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/GoInAction/chapter6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ä½†å‡¡å¤æ‚ä¸€ç‚¹çš„ä¸šåŠ¡ï¼Œå¹¶å‘åŸºæœ¬è·‘ä¸äº†ï¼Œå…¶å®è¯´ç™½äº†æ— éæ˜¯å¤šçº¿ç¨‹/å¤šè¿›ç¨‹æ¶æ„ï¼Œå¯ä¸€æ—¦æ¶‰åŠå¹¶å‘æ¨¡å¼ï¼Œå°‘ä¸äº†è°ƒåº¦ã€åŒæ­¥ã€äº’æ–¥ã€èµ„æºè®¿é—®ç­‰ä¸€å †å †é—®é¢˜ï¼Œè§£å†³è¿™äº›é—®é¢˜åˆéœ€è¦ä¸€å †å †ä»£ç ï¼Œè¿™äº›ä»£ç ä¸ä»…ç»´æŠ¤éš¾åº¦é«˜ï¼Œè€Œä¸”å¯ä»¥è¯´å’Œä¸šåŠ¡æœ¬èº«æ²¡æœ‰åŠæ¯›é’±å…³ç³»(çº¯ç²¹çš„æŠ€æœ¯é—®é¢˜æœ‰æœ¨æœ‰)ã€‚</p>
<p>Butï¼GOè¯­è¨€å¯¹å¹¶å‘çš„è¿ç”¨ç›¸æ¯”å…¶å®ƒè¯­è¨€è¿˜æ˜¯ç›¸å½“æ„‰å¿«çš„ã€‚æ ¹æ®æœ¬ç« å†…å®¹å¯ä»¥å­¦åˆ°ï¼ŒGOè¯­è¨€çš„â€œå¤šçº¿ç¨‹â€æœºåˆ¶goroutineï¼Œä»¥åŠå¤šçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼channelã€‚</p>
<h2 id="GOè¿è¡Œæ—¶-runtime"><a href="#GOè¿è¡Œæ—¶-runtime" class="headerlink" title="GOè¿è¡Œæ—¶(runtime)"></a>GOè¿è¡Œæ—¶(runtime)</h2><p>åœ¨è¯´GOçš„å¹¶å‘ä¹‹å‰éœ€è¦å…ˆææ¸…æ¥šä¸€ä»¶äº‹ï¼Œå¦åˆ™åé¢ä¼šä¸€å¤´é›¾æ°´ã€‚</p>
<p>ç”±äºå‰å‡ ç« å¹¶æ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼ŒåŠ ä¸Š<code>go build</code>å‘½ä»¤å¯ä»¥ç›´æ¥ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶(è€Œä¸”æ²¡æœ‰ä»»ä½•ä¾èµ–)ï¼Œä¼šè®©äººè¯¯ä»¥ä¸ºgoç¨‹åºæ˜¯ç±»ä¼¼c/c++ä¸€æ ·çš„æœºå™¨ç ã€‚å…¶å®ä¸ç„¶ï¼Œ<strong>GOçš„å¯æ‰§è¡Œæ–‡ä»¶å†…éƒ¨åµŒå…¥äº†runtimeï¼Œæœ¬è´¨ä¸Šå’ŒJava/.Netä¸€æ ·è·‘åœ¨è™šæ‹Ÿæœºä¹‹ä¸Š</strong>ã€‚</p>
<p>GOçš„è¿è¡Œæ—¶è´Ÿè´£å†…å­˜ç®¡ç†ã€åƒåœ¾å›æ”¶ã€æ ˆå¤„ç†ç­‰ç­‰ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½ä¾¿æ˜¯goroutineå’Œchannelçš„ç®¡ç†ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒGOè¿è¡Œæ—¶é»˜è®¤ç»™æ•´ä¸ªåº”ç”¨ç¨‹åºåˆ†é…ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨ï¼Œé€»è¾‘å¤„ç†å™¨ä¼šç»‘å®šåˆ°ç‰©ç†å¤„ç†å™¨ä¸Šã€‚ä¸€ä¸ªGOç¨‹åºé»˜è®¤æœ€å¤šåˆ›å»º10000ä¸ªçº¿ç¨‹ï¼Œä½†å¯ä»¥é€šè¿‡runtimeåŒ…çš„<code>SetMaxThreads</code>æ–¹æ³•æ¥ä¿®æ”¹ï¼Œç¨‹åºé‡Œçš„çº¿ç¨‹è¶…å‡ºæœ€å¤§çº¿ç¨‹æ•°ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
<h2 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h2><p>æ‰€ä»¥é€šè¿‡ä¸Šè¿°è¦ææ‡‚ï¼Œgoroutineä¸æ˜¯ç³»ç»Ÿåˆ†é…çš„çº¿ç¨‹ï¼Œæ›´ä¸å½’æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œä¸€åˆ‡éƒ½æ˜¯é è¿è¡Œæ—¶åˆ†é…å’Œè°ƒåº¦ã€‚ä½†ä¸è®ºå¦‚ä½•ï¼Œä¸ºäº†ä¾¿äºå‰æœŸçš„å­¦ä¹ å’Œç†è§£å¹¶å‘ï¼Œè¿™é‡Œé»˜è®¤goroutineå°±æ˜¯çº¿ç¨‹ã€‚</p>
<p>å…ˆæ¥åˆ›å»º10ä¸ªçº¿ç¨‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">  wg.Add(<span class="number">10</span>) <span class="comment">// WaitGroupè®¡æ•°åŠ 10</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºgoroutine</span></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;Goroutine-%d\n&quot;</span>, id)</span><br><span class="line">      wg.Done() <span class="comment">// WaitGroupè®¡æ•°å‡1</span></span><br><span class="line">    &#125;(i)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  wg.Wait() <span class="comment">// ç­‰å¾…ï¼Œç›´åˆ°WaitGroupè®¡æ•°ä¸º0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Goroutine-2</span><br><span class="line">Goroutine-9</span><br><span class="line">Goroutine-1</span><br><span class="line">Goroutine-3</span><br><span class="line">Goroutine-5</span><br><span class="line">Goroutine-8</span><br><span class="line">Goroutine-4</span><br><span class="line">Goroutine-7</span><br><span class="line">Goroutine-6</span><br><span class="line">Goroutine-0</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œforå¾ªç¯åªæ˜¯é¡ºåºåˆ›å»ºäº†10ä¸ªgoroutineï¼Œä½†è¾“å‡ºæ˜¯å¹¶è¡Œçš„ï¼Œæ²¡æœ‰é¡ºåºã€‚</p>
<p>å†å¼ºè°ƒä¸€éï¼Œ<strong>goroutineä¸æ˜¯çº¿ç¨‹</strong></p>
<p>å°½ç®¡ä»æ•ˆæœä¸Šçœ‹ï¼Œgoroutineå°±æ˜¯çº¿ç¨‹ï¼Œä½†äº‹å®æ˜¯ä¸Šè¾¹çš„ç¨‹åºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œäº¤ç”±goè¿è¡Œæ—¶ç»´æŠ¤ï¼Œçº¿ç¨‹å†…éƒ¨ä¼šè‡ªåŠ¨è´Ÿè´£å¤šä¸ªgoroutineçš„è°ƒåº¦ç®¡ç†ã€‚</p>
<h2 id="å¹¶å‘ç«äº‰"><a href="#å¹¶å‘ç«äº‰" class="headerlink" title="å¹¶å‘ç«äº‰"></a>å¹¶å‘ç«äº‰</h2><p>æœ‰å¹¶å‘çš„åœ°æ–¹ï¼Œå°±æœ‰èµ„æºç«äº‰ã€‚åªéœ€è¦æŠŠä¸Šè¾¹çš„ä»£ç ç¨ä½œæ”¹åŠ¨ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> count <span class="keyword">int</span> <span class="comment">// å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">  wg.Add(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">defer</span> wg.Done() <span class="comment">// ğŸ‘ˆåŒ¿åå‡½æ•°é€€å‡ºæ—¶è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> num = count <span class="comment">// è¯»å…¨å±€å˜é‡</span></span><br><span class="line">      fmt.Printf(<span class="string">&quot;num = %d\n&quot;</span>, num)</span><br><span class="line">      count = num + <span class="number">1</span> <span class="comment">// å†™å…¨å±€å˜é‡</span></span><br><span class="line">    &#125;()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  wg.Wait()</span><br><span class="line">  <span class="comment">// æ‰€æœ‰goroutineç»“æŸåï¼Œcountå€¼å¹¶ä¸ä¸º5</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;count = %d\n&quot;</span>, count)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ----------ç¨‹åºè¾“å‡ºç»“æœ(æ¯æ¬¡éƒ½æ˜¯éšæœºçš„)--------</span></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">num = <span class="number">1</span></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">count = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°è¿™æ®µä»£ç å¯ä»¥éå¸¸æ˜æ˜¾çš„çœ‹åˆ°ï¼Œ5ä¸ªgoroutineéƒ½å¯¹å…¨å±€å˜é‡<code>count</code>åšäº†åŠ 1çš„è¿ç®—ï¼Œç»“æœcountæœ€ç»ˆå€¼å´æ˜¯1è€Œé5ã€‚è¿™ä¹Ÿè¯´æ˜ï¼Œåœ¨æ²¡æœ‰æªæ–½çš„æƒ…å†µä¸‹å¹¶å‘å»è®¿é—®å…¨å±€å˜é‡ä¼šå‡ºç°è¯¡å¼‚çš„ç»“æœã€‚</p>
<p>é“ç†å¾ˆç®€å•ï¼Œä¸€ä¸ªgoroutineå†è®¿é—®æŸä¸ªèµ„æºæ—¶å¦ä¸€ä¸ªgoroutineå¯èƒ½æ­£åœ¨å†™ï¼Œå¯¼è‡´è®¿é—®ç»“æœä¸ç¬¦åˆé¢„æœŸï¼Œæˆ–è€…ä½ å‰è„šåˆšå†™ï¼Œåè„šå°±è¢«ä»–äººè¦†ç›–äº†ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGOè¯­è¨€æä¾›äº†ä¸¤ç§ä¼ ç»Ÿæ€è·¯ï¼š</p>
<ol>
<li><p>åŸå­æ“ä½œå‡½æ•°ï¼Œç¡®ä¿æ¯æ¬¡è®¿é—®éƒ½æ˜¯å®Œæ•´çš„è¯»å†™</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// atomicåŒ…é‡Œè¿˜æœ‰å¾ˆå¤šå¦‚è¯»å–ã€å†™å…¥ç­‰å®‰å…¨è®¿é—®å‡½æ•°</span></span><br><span class="line"><span class="comment">// è¿™é‡Œä»…ä½¿ç”¨åŠ æ³•è®¡ç®—</span></span><br><span class="line">atomic.AddInt64(&amp;count, <span class="number">1</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>äº’æ–¥é”ï¼Œæˆ‘åœ¨è®¿é—®çš„æ—¶å€™ä½ ä¸å‡†è®¿é—®</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mutex sync.Mutex <span class="comment">// ç”¨æ¥å®šä¹‰ä»£ç ä¸´ç•ŒåŒº</span></span><br><span class="line">mutex.Lock() <span class="comment">// åŠ é”ï¼Œå…¶å®ƒgoroutineä¼šè¢«é˜»å¡</span></span><br><span class="line">...</span><br><span class="line">mutex.Unlock() <span class="comment">// è§£é”ï¼Œå…¶å®ƒgoroutineç»§ç»­è¿è¡Œ</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="é€šé“"><a href="#é€šé“" class="headerlink" title="é€šé“"></a>é€šé“</h2><p>åŸå­å‡½æ•°å’Œäº’æ–¥é”éƒ½å¯ä»¥å¾ˆå¥½åœ°è§£å†³èµ„æºå…±äº«çš„é—®é¢˜ï¼Œä½†å®ƒä»¬éƒ½ä¸å¤Ÿä¼˜ç§€ï¼Œå› ä¸ºä½ ä¸å¾—ä¸è€ƒè™‘ç¨‹åºçš„è¿è¡Œé€»è¾‘ã€ä¼˜å…ˆçº§ä¹‹ç±»çš„é—®é¢˜ã€‚ä»”ç»†æƒ³æƒ³ï¼Œå…¶å®æˆ‘ä»¬è®¿é—®å…±äº«èµ„æºæ— éæ˜¯ä¸ºäº†ç”Ÿäº§/æ¶ˆè´¹æ•°æ®ï¼Œåªæ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®èƒ½è¢«å®‰å…¨è®¿é—®æ‰å¼•å…¥è¿™æ ·é‚£æ ·çš„ç«äº‰æœºåˆ¶ã€‚é‚£æœ‰æ²¡æœ‰ä¸€ç§åŠæ³•èƒ½è®©å¼€å‘è€…ä¸“æ³¨å¤„ç†æ•°æ®ï¼Œä¸è¦å»æ“å¿ƒé‚£äº›æ¯«ä¸ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ç­”æ¡ˆå°±æ˜¯GOçš„é€šé“æœºåˆ¶ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªgoroutineéœ€è¦è¯»æ•°æ®çš„æ—¶å€™ï¼Œå°±ä»é€šé“é‡Œå»æ‹¿ï¼Œå¤„ç†å®Œäº†å°±æ”¾å›é€šé“ï¼Œè‡³äºé‚£äº›èµ„æºäº’æ–¥ç­‰é—®é¢˜ï¼Œè¿è¡Œæ—¶å·²ç»å¤„ç†å¾—å¾ˆå®Œç¾äº†ã€‚</p>
<h3 id="é€šé“çš„åŸºæœ¬ä½¿ç”¨"><a href="#é€šé“çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="é€šé“çš„åŸºæœ¬ä½¿ç”¨"></a>é€šé“çš„åŸºæœ¬ä½¿ç”¨</h3><ul>
<li>ç”¨<code>make</code>å’Œ<code>close</code>æ¥åˆ›å»ºå’Œå…³é—­é€šé“</li>
<li>é€šé“ä¸€èˆ¬è¿è¡Œåœ¨goroutineå‡½æ•°å†…</li>
<li>ä½¿ç”¨<code>&lt;-</code>å®Œæˆé€šé“æ•°æ®çš„è¯»å†™</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶ç«¯goroutine</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">receive</span><span class="params">(data <span class="keyword">chan</span> <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">  num := &lt;-data <span class="comment">// å°†é€šé“æ•°æ®è¯»å–åˆ°å˜é‡</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;received number: %d\n&quot;</span>, num)</span><br><span class="line">  wg.Done()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€ç«¯goroutine</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">send</span><span class="params">(data <span class="keyword">chan</span> <span class="keyword">int</span>, num <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;sent number: %d\n&quot;</span>, num)</span><br><span class="line">  data &lt;- num <span class="comment">// å°†æ•°æ®å†™å…¥é€šé“</span></span><br><span class="line">  wg.Done()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UseChannel é€šé“çš„åŸºæœ¬ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UseChannel</span><span class="params">()</span></span> &#123;</span><br><span class="line">  channel := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>) <span class="comment">// åˆ›å»ºä¸€ä¸ªé€šé“</span></span><br><span class="line">  wg.Add(<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">go</span> receive(channel)</span><br><span class="line">  <span class="keyword">go</span> send(channel, <span class="number">20</span>)</span><br><span class="line">  wg.Wait()</span><br><span class="line">  <span class="built_in">close</span>(channel) <span class="comment">// å…³é—­é€šé“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œé€šè¿‡<code>channel := make(chan int)</code>åˆ›å»ºäº†ä¸€ä¸ªintç±»å‹çš„é€šé“ï¼Œä¸”é€šè¿‡è¯¥é€šé“å®ç°åœ¨<code>recevie</code>å’Œ<code>send</code>ä¸¤ä¸ªgoroutineä¹‹é—´çš„æ•°æ®é€šä¿¡ï¼Œæ³¨æ„<code>channel &lt;- value</code>è¡¨ç¤ºå†™é€šé“ï¼Œ<code>value &lt;- channel</code>è¡¨ç¤ºè¯»é€šé“ã€‚</p>
<p>å¦å¤–ï¼ŒGOæä¾›ä¸¤ç§é€šé“æœºåˆ¶ï¼Œæ— ç¼“å†²é€šé“å’Œæœ‰ç¼“å†²é€šé“ã€‚</p>
<h3 id="æ— ç¼“å†²é€šé“"><a href="#æ— ç¼“å†²é€šé“" class="headerlink" title="æ— ç¼“å†²é€šé“"></a>æ— ç¼“å†²é€šé“</h3><p>é¡¾åæ€ä¹‰ï¼Œæ— ç¼“å†²å°±æ˜¯åœ¨é€šé“å†…ä¸æ²¡æœ‰ç¼“å†²ç©ºé—´ï¼Œå¯¹äºä¸¤ä¸ªgoroutineè€Œè¨€ï¼Œéœ€è¦åŒæ–¹åŒæ—¶åšå¥½å‡†å¤‡æ‰èƒ½è¿›è¡Œæ•°æ®ä¼ é€’ï¼Œå¦åˆ™å…ˆåšå¥½å‡†å¤‡çš„ä¸€æ–¹å°±ä¼šé˜»å¡ï¼Œç­‰å¾…å¦ä¸€æ–¹åšå¥½å‡†å¤‡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i.loli.net/2019/02/24/5c7239ab48e43.png" alt="æ— ç¼“å†²é€šé“ç¤ºæ„å›¾"></p>
<p>å…¶å®æœ€å¼€å§‹å…³äº<code>send</code>å’Œ<code>recevie</code>çš„ä¾‹å­å°±æ˜¯å…¸å‹çš„æ— ç¼“å†²é€šé“ï¼Œæ‰€ä»¥å…·ä½“çš„ç”¨æ³•å°±ä¸å†èµ˜è¿°äº†ã€‚</p>
<p>ç•™æ„ä¸€ä¸‹ä¸¤ä¸ªå‡½æ•°ä¸­<code>fmt.Printf</code>çš„é¡ºåºï¼Œå‘é€è€…æ˜¯åœ¨å‘é€æ•°æ®ä¹‹å‰æ‰“å°ï¼Œè€Œæ¥å—è€…æ˜¯åœ¨æ¥æ”¶æ•°æ®ä¹‹åæ‰“å°ã€‚ä¸è¿‡ï¼Œä¸¤ä¸ªå‡½æ•°æ˜¯goroutineï¼Œç†è®ºä¸Šæ¥è¯´ç‹¬è‡ªè¿è¡Œï¼Œæ‰“å°æ²¡æœ‰å…ˆåæ¬¡åºï¼Œä½†ä¸Šè¾¹çš„ä¾‹å­ä¸è®ºè¿è¡Œå¤šå°‘æ¬¡éƒ½æ˜¯å…ˆæ‰“å°<code>â€sent number: xx&quot;</code>å†æ‰“å°<code>â€received number: xx&quot;</code>ã€‚ç”±æ­¤å¯è§ï¼Œå› ä¸ºæ²¡æœ‰ç¼“å†²ï¼Œ<code>num := &lt;-data</code>çš„æ—¶å€™ï¼Œå¦‚æœdataé€šé“çš„å¯¹é¢æ²¡æœ‰åœ¨å†™å…¥ï¼Œè¿™é‡Œå°±ä¼šè¢«é˜»å¡ã€‚</p>
<h3 id="æœ‰ç¼“å†²é€šé“"><a href="#æœ‰ç¼“å†²é€šé“" class="headerlink" title="æœ‰ç¼“å†²é€šé“"></a>æœ‰ç¼“å†²é€šé“</h3><p>åŒç†ï¼Œæœ‰ç¼“å†²å°±æ˜¯åœ¨é€šé“å†…æœ‰ç¼“å†²ç©ºé—´ï¼Œå¯¹äºä¸¤ä¸ªgoroutineè€Œè¨€ï¼Œæ— æ‰€è°“å¯¹æ–¹æœ‰æ²¡æœ‰åšå¥½å‡†å¤‡ï¼Œå®ƒä»¬åªéœ€è¦å…³ç³»é€šé“å†…çš„ç¼“å­˜æœ‰æ²¡æœ‰æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i.loli.net/2019/02/24/5c7239d3d806f.png" alt="æœ‰ç¼“å†²é€šé“ç¤ºæ„å›¾"></p>
<p>ä¸‹é¢è¿™æ®µä»£ç ä¹Ÿå±•ç¤ºäº†å¦‚æœè¿ç”¨æœ‰ç¼“å†²é€šé“ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œå°±æ˜¯åœ¨åˆ›å»ºé€šé“çš„æ—¶å€™æŒ‡å®šä¸€ä¸‹é€šé“çš„ç¼“å­˜é•¿åº¦<code>make(chan &lt;type&gt;, &lt;length&gt;)</code>å³å¯ï¼Œå…¶å®ƒåœ°æ–¹å‡ ä¹ä¸ç”¨å˜ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BufferChannel</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10çš„æœ‰ç¼“å†²é€šé“</span></span><br><span class="line">  bufferedChannel := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">  wg.Add(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯åŠ¨5ä¸ªgoroutineæ¥æ”¶æ•°å­—</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">    <span class="keyword">go</span> receive(bufferedChannel)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¯åŠ¨5ä¸ªgoroutineå‘é€éšæœº5ä¸ªæ•°å­—</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">    <span class="keyword">go</span> send(bufferedChannel, rand.Intn(<span class="number">100</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  wg.Wait()</span><br><span class="line">  <span class="built_in">close</span>(bufferedChannel)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//---------------ç¨‹åºè¾“å‡ºç»“æœ------------</span></span><br><span class="line">sent number: <span class="number">81</span></span><br><span class="line">received number: <span class="number">81</span></span><br><span class="line">sent number: <span class="number">81</span></span><br><span class="line">sent number: <span class="number">87</span></span><br><span class="line">sent number: <span class="number">47</span></span><br><span class="line">received number: <span class="number">81</span></span><br><span class="line">received number: <span class="number">87</span></span><br><span class="line">received number: <span class="number">47</span></span><br><span class="line">sent number: <span class="number">59</span></span><br><span class="line">received number: <span class="number">59</span></span><br></pre></td></tr></table></figure>

<p>ä»è¿™æ ·çš„ç¨‹åºè¾“å‡ºç»“æœå¯ä»¥æ˜æ˜¾çœ‹åˆ°ï¼Œ<code>receive</code>å’Œ<code>send</code>çš„æ‰§è¡Œæ ¹æœ¬äº’ä¸å½±å“ï¼Œä¸å­˜åœ¨é˜»å¡çš„æƒ…å†µï¼Œå¦åˆ™å°±ä¸ä¼šå‡ºç°è¿ç»­å‘é€å’Œè¿ç»­æ¥æ”¶çš„æ‰“å°äº†ã€‚</p>
<p>ä½†æ˜¯éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå‘é€æ•°å­—å’Œæ¥æ”¶æ•°å­—çš„é¡ºåºç¡®å®ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰ç¼“å†²é€šé“å†…éƒ¨ï¼Œæ•°æ®æ˜¯æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„æ–¹å¼åœ¨ç®¡ç†ã€‚</p>
<h2 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h2><ul>
<li>GOè¯­è¨€å¹¶å‘æ˜¯æŒ‡goroutineï¼Œç”±GOçš„è¿è¡Œæ—¶è´Ÿè´£ç®¡ç†</li>
<li>ä½¿ç”¨<code>go</code>å…³é”®å­—æ¥åˆ›å»ºgoroutine</li>
<li><code>sync/atomic</code>å’Œ<code>sync.Mutex</code>å¯ä»¥è§£å†³å¹¶å‘æ—¶çš„èµ„æºç«äº‰é—®é¢˜</li>
<li>ç›¸æ¯”äºåŸå­å‡½æ•°å’Œäº’æ–¥é”ï¼ŒGOè¯­è¨€çš„é€šé“æœºåˆ¶å¯ä»¥æ›´å¥½åœ°å¤„ç†å…±äº«æ•°æ®</li>
<li>ä½¿ç”¨<code>make(chan &lt;type&gt;)</code>åˆ›å»ºæ— ç¼“å†²é€šé“</li>
<li>ä½¿ç”¨<code>make(chan &lt;type&gt;, &lt;length&gt;)</code>åˆ›å»ºæœ‰ç¼“å†²é€šé“</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/28/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/28/" class="post-title-link" itemprop="url">ä¸è¦åƒµç›´é’‰æ­»ä½ çš„ç¨‹åº</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-02-21 09:26:45" itemprop="dateCreated datePublished" datetime="2019-02-21T09:26:45+08:00">2019-02-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/28/" class="post-meta-item leancloud_visitors" data-flag-title="ä¸è¦åƒµç›´é’‰æ­»ä½ çš„ç¨‹åº" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/28/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/28/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_28/">Donâ€™t Nail Your Program into the Upright Position</a></p>
<p>æˆ‘æœ‰æ¬¡å†™äº†ä¸€ä¸ªC++æ¶ææ¯”èµ›ï¼Œæˆ‘è®½åˆºåœ°å»ºè®®äº†ä»¥ä¸‹çš„å¼‚å¸¸å¤„ç†ç­–ç•¥ï¼š</p>
<blockquote>
<p>å‡­å€Ÿéå¸ƒæˆ‘ä»¬æ•´ä¸ªä»£ç åº“çš„<code>try...catch</code>çš„ç»“æ„ï¼Œæˆ‘ä»¬æœ‰æ—¶èƒ½å¤Ÿé˜»æ­¢ç¨‹åºçš„ç»ˆæ­¢ã€‚æˆ‘ä»¬æŠŠè¿™ç§çŠ¶æ€è®¤ä¸ºæ˜¯â€œç›´ç«‹é’‰å°¸â€ã€‚</p>
</blockquote>
<p>å°½ç®¡æˆ‘çš„è‰ç‡ï¼Œå®é™…ä¸Šæˆ‘è¿˜æ˜¯æ€»ç»“äº†ä»è¿™ä½ç¥¥æ—å«‚(Dame Bitter Experienceâ€”â€”æˆ–è€…å«è‰°è‹¦å²æœˆå¥³ï¼ŸğŸ¥µ)è†ä¸Šå­¦åˆ°çš„ä¸€è¯¾ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬è‡ªåˆ¶çš„C++åº“ï¼Œæ˜¯åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªåŸºç±»ã€‚å¤šå¹´ä»¥åå®ƒè¢«åƒâ€œçŒ¿â€æ‰€æŒ‡ï¼šæ²¡æœ‰è°çš„æ‰‹æ˜¯å¹²å‡€çš„ã€‚å®ƒåŒ…å«çš„ä»£ç æŠŠä»»ä½•äº‹æƒ…çš„å¼‚å¸¸éƒ½åšäº†é¿å¼€å¤„ç†ã€‚é€šè¿‡Yossariançš„<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Catch-22">ç¬¬22æ¡å†›è§„(Catch-22)</a>ä½œä¸ºæŒ‡å¯¼ï¼Œæˆ‘ä»¬å†³å®šï¼Œæˆ–è€…è¯´å€¾å‘äºè¿™ä¸ªç±»çš„ä¸€ä¸ªå®ä¾‹è¦ä¹ˆæ€»æ˜¯æ´»ç€ï¼Œè¦ä¹ˆèµ¶ç´§æ­»æ‰ã€‚(<em>å†³å®š</em>æš—ç¤ºæ›´å¤šæƒ³æ³•ï¼Œè€Œä¸ä»…ä»…æ˜¯è¿›å…¥è¿™åªæ€ªç‰©çš„ç»“æ„)</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬æŠŠå¤šä¸ªå¼‚å¸¸äº¤ç»‡åœ¨ä¸€èµ·å¤„ç†ã€‚æˆ‘ä»¬æŠŠWindowsçš„ç»“æ„åŒ–å¼‚å¸¸ä¸åŸç”Ÿçš„ç±»å‹æ··åˆåœ¨ä¸€èµ·å¤„ç†(è®°ä½C++ä¸­çš„__try..__exceptï¼Ÿæˆ‘éƒ½æ²¡æœ‰)ã€‚å½“æœ‰æ„å¤–æŠ›å‡ºæ—¶ï¼Œæˆ‘ä»¬å°è¯•å†æ¬¡è°ƒç”¨ï¼Œæ›´éš¾å‹å…¥å‚æ•°ã€‚å›å¤´çœ‹ï¼Œæˆ‘å–œæ¬¢æŠŠä¸€ä¸ª<code>try...catch</code>å¤„ç†å†™åˆ°å¦ä¸€ä¸ªcatchè¯­å¥ä¸­ï¼Œé¬¼ä½¿ç¥å·®çš„è®©æˆ‘å¯èƒ½ä»åŸæœ¬è‰¯å¥½åšæ³•çš„é«˜é€Ÿå…¬è·¯èµ°åˆ°äº†ä¸€æ¡æ”¯è·¯ï¼Œè¿›å…¥ä¸€æ¡èŠ³é¦™å››æº¢ä½†å¾ˆä¸å¥åº·çš„ç–¯ç‹‚è½¦é“ã€‚ç„¶è€Œï¼Œè¿™å¾ˆå¯èƒ½æ˜¯äº‹åè¯¸è‘›äº®ã€‚</p>
<p>ä¸ç”¨è¯´ï¼Œç¨‹åºæ— è®ºä½•æ—¶å‡ºé”™äº†ï¼ŒåŸºæœ¬éƒ½æ˜¯å› ä¸ºè¿™ä¸ªç±»ï¼Œå®ƒä»¬çš„æ¶ˆå¤±å°±åƒæ˜¯åœ¨ç å¤´çš„é»‘æ‰‹å…šé‡å®³è€…ï¼Œåªç•™ä¸‹æ²¡ç”¨çš„æ°”æ³¡ï¼Œé¬¼æ‰çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå°½ç®¡æ®è¯´è½¬å‚¨ä¾‹ç¨‹ä¼šè®°å½•è¿™åœºç¾éš¾ã€‚æœ€ç»ˆâ€”â€”å¾ˆé•¿çš„æœ€ç»ˆâ€”â€”æˆ‘ä»¬ç›˜ç‚¹äº†æ‰€åšçš„äº‹æƒ…ï¼Œå¹¶å› æ­¤æ„Ÿåˆ°ç¾æ„§ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå°å·§ä¸”å¥å£®çš„æŠ¥å‘Šæœºåˆ¶æ›¿æ¢äº†è¿™ä¸ªè‚®è„çš„å®¶ä¼™ã€‚ä½†è¿™æ˜¯ååˆ†è®©äººå´©æºƒçš„ã€‚</p>
<p>æˆ‘ä¸ä¼šæ‰“æ‰°ä½ â€”â€”å»ç¡®è®¤è¿˜æœ‰è°ä¼šå‘æˆ‘ä»¬ä¸€æ ·è ¢â€”â€”ä½†æˆ‘æœ€è¿‘åœ¨çº¿ä¸Šå’Œä¸€ä¸ªå®¶ä¼™è®¨è®ºé—®é¢˜ï¼Œä»–çš„å­¦æœ¯èŒç§°è¡¨æ˜ä»–åº”è¯¥å¾ˆç‰›é€¼ã€‚æˆ‘ä»¬ä¸€èµ·è®¨è®ºäº†Javaä»£ç å…³äºè¿œç¨‹ä¼ è¾“ã€‚å¦‚æœä»£ç å¤±è´¥äº†ï¼Œä»–è®¤ä¸ºï¼Œåº”è¯¥åœ¨åŸåœ°æ•è·å¹¶é˜»æ­¢å¼‚å¸¸ã€‚(â€œæ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿâ€ æˆ‘é—®ã€‚â€œæ‹¿å»åšå¤œå®µä¹ˆï¼Ÿâ€)</p>
<p>ä»–å¼•ç”¨äº†UIè®¾è®¡å¸ˆçš„æ³•åˆ™ï¼š<strong>æ°¸è¿œä¸è¦è®©ç”¨æˆ·çœ‹åˆ°å¼‚å¸¸æŠ¥å‘Š</strong>(å¤§å†™)ï¼Œçœ‹ä¼¼å¥½åƒè§£å†³äº†é—®é¢˜ï¼Œä½†è¿™äº›å¤§å†™çš„å’Œä»»ä½•å†…å®¹åˆæ˜¯ä»€ä¹ˆã€‚æˆ‘æƒ³çŸ¥é“ä»–æ˜¯å¦ä¼šå¯¹è¿™æ®µä»£ç è´Ÿè´£ï¼šå°±æ˜¯å¤§é‡ATMæœºä¸­çš„ä¸€å°è“å±äº†çš„ç…§ç‰‡ï¼Œå¹¶é€ æˆäº†æ°¸ä¹…æ€§åˆ›ä¼¤ã€‚æ— è®ºå¦‚ä½•ï¼Œå¦‚æœä½ è§åˆ°äº†ä»–ï¼Œç‚¹å¤´ã€å¾®ç¬‘ã€ä¸ç”¨å£°å¼ ï¼Œå°±åƒä½ èµ°å‘è¿™é“é—¨ä¸€æ ·ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/books/%E8%87%AA%E7%A7%81%E7%9A%84%E5%9F%BA%E5%9B%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/books/%E8%87%AA%E7%A7%81%E7%9A%84%E5%9F%BA%E5%9B%A0/" class="post-title-link" itemprop="url">ã€Šè‡ªç§çš„åŸºå› ã€‹è¯»ä¹¦ç¬”è®°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-02-19 16:54:31" itemprop="dateCreated datePublished" datetime="2019-02-19T16:54:31+08:00">2019-02-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">è¯»ä¹¦</span></a>
                </span>
            </span>

          
            <span id="/books/%E8%87%AA%E7%A7%81%E7%9A%84%E5%9F%BA%E5%9B%A0/" class="post-meta-item leancloud_visitors" data-flag-title="ã€Šè‡ªç§çš„åŸºå› ã€‹è¯»ä¹¦ç¬”è®°" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/books/%E8%87%AA%E7%A7%81%E7%9A%84%E5%9F%BA%E5%9B%A0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/books/%E8%87%AA%E7%A7%81%E7%9A%84%E5%9F%BA%E5%9B%A0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æˆ‘åœ¨å¾ˆå¤šä¹¦é‡Œçœ‹åˆ°å¯¹é“é‡‘æ–¯è¿™æœ¬ã€Šè‡ªç§çš„åŸºå› ã€‹çš„å¼•ç”¨ï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯ä¸€æœ¬å¥‡ä¹¦ï¼Œæœ€è¿‘ç»ˆäºæœ‰å¹¸æ‹œè¯»ä¸€ç•ªï¼Œæœç„¶å¾ˆç²¾å½©ã€‚æ­£å¦‚é“é‡‘æ–¯è‡ªå·±æ‰€è¯´ï¼Œå¸Œæœ›ä½œè€…æŠŠå®ƒå½“ä½œä¸€æœ¬ç§‘å¹»å°è¯´æ¥é˜…è¯»ï¼Œå…¶å†…å®¹æ¶µç›–å“ºä¹³åŠ¨ç‰©ã€é¸Ÿç±»ã€æ˜†è™«ç­‰è¯¸å¤šâ€œæœ‰è¶£â€çš„è¡Œä¸ºæˆ–ç°è±¡ï¼Œä»¥åŠå¤§é‡çš„å½¢è±¡æ¯”å–»ï¼Œå…³äºç”Ÿå‘½çš„ç”Ÿå­˜ä¸ç¹è¡èƒŒåçš„â€œé“ç†â€è®²å¾—éå¸¸æµ…æ˜¾æ˜“æ‡‚ã€‚</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/books/%E8%87%AA%E7%A7%81%E7%9A%84%E5%9F%BA%E5%9B%A0/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/GoInAction/chapter5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/GoInAction/chapter5/" class="post-title-link" itemprop="url">äº”ï¼šç±»å‹ç³»ç»Ÿ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-02-18 21:51:17" itemprop="dateCreated datePublished" datetime="2019-02-18T21:51:17+08:00">2019-02-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E3%80%8AGO%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">ã€ŠGOè¯­è¨€å®æˆ˜ã€‹å­¦ä¹ ç¬”è®°</span></a>
                </span>
            </span>

          
            <span id="/GoInAction/chapter5/" class="post-meta-item leancloud_visitors" data-flag-title="äº”ï¼šç±»å‹ç³»ç»Ÿ" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/GoInAction/chapter5/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/GoInAction/chapter5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ç±»å‹â€”â€”æ¯”â€œç±»â€å¤šäº†ä¸€ä¸ªå­—è€Œå·²ï¼Œå¦‚æœæ‡‚é¢å‘å¯¹è±¡çš„è¯ï¼Œç±»å‹çš„å¾ˆå¤šå†…å®¹å…¶å®å’Œé¢å‘å¯¹è±¡<strong>è¯­è¨€</strong>å¦‚å‡ºä¸€è¾™ï¼Œä½†ä¸åŒäºé¢å‘å¯¹è±¡<strong>æ€æƒ³</strong>ã€‚æ¢è€Œè¨€ä¹‹ï¼ŒJava/C#ç­‰å¸¸è§çš„ç±»çš„å±æ€§ã€æ–¹æ³•ã€æ¥å£ã€ç»§æ‰¿ç­‰ç­‰å½¢å¼ï¼Œåœ¨GOçš„ç±»å‹ç³»ç»Ÿé‡Œéƒ½èƒ½æ‰¾åˆ°èº«å½±ï¼Œä½†å…¶å®ç°è¿‡ç¨‹å’Œæ€è·¯å´æˆªç„¶ä¸åŒã€‚</p>
<p>ä¸ºäº†å·©å›ºæœ¬ç« çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¿ç…§ä¼ ç»Ÿçš„MVCæ¶æ„æ¥å®ç°ä¸€ä¸ªâ€œè´¦æˆ·ç®¡ç†â€çš„ä¸šåŠ¡ï¼Œä½œä¸ºGOä¸Javaåœ¨å®ç°é¢å‘å¯¹è±¡æ–¹é¢çš„æ€æƒ³ç±»æ¯”ã€‚åœ¨æºç çš„<code>account</code>åŒ…ä¸­åŒ…å«ï¼š</p>
<ul>
<li><code>user</code>â€”â€”ç”¨æˆ·ç±»å‹ï¼ŒåŸºç¡€æ¨¡å‹</li>
<li><code>admin</code>â€”â€”ç®¡ç†å‘˜ç±»å‹ï¼Œâ€œç»§æ‰¿â€äºuser</li>
<li><code>show</code>â€”â€”è§†å›¾ï¼Œç”¨æˆ·ä¿¡æ¯æ‰“å°ï¼Œç”¨æ¥å£å®ç°userå’Œadminå¤šæ€</li>
<li><code>manage</code>â€”â€”æœåŠ¡ï¼Œè´Ÿè´£ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥</li>
</ul>
<h2 id="ç±»å‹çš„å®šä¹‰"><a href="#ç±»å‹çš„å®šä¹‰" class="headerlink" title="ç±»å‹çš„å®šä¹‰"></a>ç±»å‹çš„å®šä¹‰</h2><p>åœ¨GOè¯­è¨€ä¸­å®šä¹‰ä¸€ä¸ªç±»æ˜¯éå¸¸ç®€å•çš„ï¼š<code>type user struct &#123;&#125;</code>ï¼Œå½“ç„¶ï¼Œå®ƒä¸å«ç±»ï¼Œè€Œæ˜¯ç»“æ„ç±»å‹ï¼Œå¾ˆåƒCè¯­è¨€ä¸­çš„ç»“æ„ä½“ã€‚</p>
<p>åœ¨<code>user.go</code>é‡Œå£°æ˜äº†ä¸¤ä¸ªç±»å‹ï¼š<code>Password</code>å’Œ<code>User</code>ï¼Œé«˜æ‰‹ä¸€çœ‹ä¾¿çŸ¥Passwordå…¶å®å°±æ˜¯å†…ç½®çš„stringç±»å‹ï¼Œæ„Ÿè§‰ä¸¤è€…æ˜¯å¯ä»¥äº’æ¢çš„ã€‚ç„¶è€Œä¸€æ—¦åšäº†è¿™æ ·çš„å£°æ˜ä¹‹åï¼ŒGOçš„ç¼–è¯‘å™¨å°±ä¼šå§Passwordå’Œstringä¸¥æ ¼å½“ä½œä¸¤ç§ç‹¬ç«‹çš„ç±»å‹æ¥å¤„ç†ã€‚æ¢å¥è¯è¯´ï¼Œä¸èƒ½æŠŠstringå®šä¹‰çš„å˜é‡ç›´æ¥èµ‹å€¼ç»™Passwordç±»å‹çš„å¯¹è±¡ï¼Œåªèƒ½åœ¨åˆå§‹åŒ–æ—¶æ¥æ”¶çº¯å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Password <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID       <span class="keyword">int</span>      <span class="comment">// åŒ…å¤–å¯è§</span></span><br><span class="line">  Name     <span class="keyword">string</span>   <span class="comment">// åŒ…å¤–å¯è§</span></span><br><span class="line">  password Password <span class="comment">// åŒ…å†…å¯è§</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œéœ€è¦æ³¨æ„GOè¯­è¨€çš„ç¬¦å·å¯è§æ€§ã€‚ä»¥ä¸‹æƒ…å†µé€‚ç”¨äºå‡½æ•°ã€å˜é‡ã€æ–¹æ³•ã€å±æ€§ç­‰ï¼š</p>
<ul>
<li>é¦–å­—æ¯å¤§å†™çš„ç¬¦å·â€”â€”åŒ…å¤–å¯è§</li>
<li>é¦–å­—æ¯å°å†™çš„ç¬¦å·â€”â€”ä»…åŒ…å†…å¯è§</li>
</ul>
<p>ç»“æ„ç±»å‹çš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªç»“æ„</span></span><br><span class="line">user := User&#123;</span><br><span class="line">  ID:   <span class="number">112233</span>,</span><br><span class="line">  Name: <span class="string">&quot;philon&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line">user := User&#123;<span class="number">112233</span>, <span class="string">&quot;philon&quot;</span>, <span class="string">&quot;123456&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹å±æ€§</span></span><br><span class="line">user.password = <span class="string">&quot;56789&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="ç±»å‹çš„æ–¹æ³•"><a href="#ç±»å‹çš„æ–¹æ³•" class="headerlink" title="ç±»å‹çš„æ–¹æ³•"></a>ç±»å‹çš„æ–¹æ³•</h2><p>æ ¹æ®é¢å‘å¯¹è±¡çš„å¥—è·¯ï¼Œå®šä¹‰äº†ç±»å‹çš„å±æ€§ï¼Œè‡ªç„¶å°‘ä¸äº†è¦å®šä¹‰æ–¹æ³•ï¼Œä½†GOè¯­è¨€ä¸å…è®¸ç›´æ¥æŠŠä¸€ä¸ªç±»å‹çš„æ–¹æ³•å®šä¹‰åœ¨å…¶å†…éƒ¨ï¼Œè€Œæ˜¯å¯ä»¥å°†å…¶å®šä¹‰åœ¨ä»»ä½•å…¶ä»–åœ°æ–¹ã€‚å¦‚æœä¹ æƒ¯äº†Javaè¿™ç§æ–¹å¼ï¼Œå¯èƒ½ä¼šè§‰å¾—ååˆ†åˆ«æ‰­ï¼Œä½†è¿™æ­£æ˜¯GOç±»å‹çµæ´»çš„åœ°æ–¹ã€‚å¦‚æœä½ è§‰å¾—æŸä¸ªâ€œä¸šåŠ¡å¯¹è±¡â€éœ€è¦æŸä¸ªç‰¹æ®Šçš„æ–¹æ³•æ¥å¤„ç†ï¼Œé‚£å°±ç›´æ¥åŠ ä¸Šå¥½äº†ï¼Œä¸å½±å“å®ƒçš„ç»§æ‰¿ã€è€¦åˆç­‰é—®é¢˜ã€‚</p>
<p>ç»™ç±»å‹æ·»åŠ ä¸€ä¸ªæ–¹æ³•çš„åŸºæœ¬è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// uè¡¨ç¤ºæ¥æ”¶è€…ï¼Œå¯ä»¥ç†è§£ä¸ºé¢å‘å¯¹è±¡ä¸­çš„ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u User)</span> <span class="title">method_name</span><span class="params">()</span></span> &#123;</span><br><span class="line">  u.name = <span class="string">&quot;philon&quot;</span></span><br><span class="line">  u.email = <span class="string">&quot;xxx@xxx.com&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡æ·»åŠ æ–¹æ³•æ—¶éœ€è¦æ³¨æ„â€œæ¥å—è€…â€çš„åŒºåˆ«ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li><code>å€¼æ¥æ”¶è€…</code>çš„æ–¹æ³•åœ¨å…¶å†…éƒ¨ä¿®æ”¹å¯¹è±¡çš„å€¼ï¼Œä¸æ”¹å˜å¤–éƒ¨è°ƒç”¨è€…</li>
<li><code>æŒ‡é’ˆæ¥æ”¶è€…</code>çš„æ–¹æ³•åœ¨å…¶å†…éƒ¨ä¿®æ”¹å¯¹è±¡çš„å€¼ï¼Œæ”¹å˜å¤–éƒ¨è°ƒç”¨è€…</li>
</ul>
<p>è¿˜æ˜¯ä»¥ä»£ç ä¸ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å€¼æ¥å—è€…æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u User)</span> <span class="title">Auth</span><span class="params">(p Password)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">  u.password = <span class="string">&quot;123456&quot;</span> <span class="comment">// ğŸ‘ˆæ­¤è¡Œå¹¶ä¸å½±å“å¤–éƒ¨è°ƒç”¨å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> u.password == p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡é’ˆæ¥å—è€…æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *User)</span> <span class="title">SetPassword</span><span class="params">(p Password)</span></span> &#123;</span><br><span class="line">  u.password = p <span class="comment">// ğŸ‘ˆåŒæ—¶ä¿®æ”¹äº†å¤–éƒ¨è°ƒç”¨å¯¹è±¡çš„å±æ€§</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç†è§£å‡½æ•°è°ƒç”¨çš„å†…å­˜ç®¡ç†ï¼Œé‚£è¿™ä¸¤ç§å½¢å¼éå¸¸å®¹æ˜“ç†è§£ã€‚è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¼ å…¥çš„å‚æ•°å°†æ‹·è´ä¸€ä¸ªå‰¯æœ¬å¹¶å‹æ ˆï¼Œå‡½æ•°é€šè¿‡è®¿é—®æ ˆåŒºæ¥è·å–å‚æ•°å€¼ã€‚æ¢å¥è¯è¯´ï¼š<strong>æ‰€æœ‰ä¼ å…¥å‡½æ•°çš„å‚æ•°å…¶å®éƒ½åªæ˜¯å‰¯æœ¬</strong>ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å‰¯æœ¬çš„å€¼ï¼Œä¸ä¼šå½±å“åŸå§‹å‚æ•°å€¼ã€‚</p>
<p>âœï¸<strong>ä½†åŠ¡å¿…æ³¨æ„</strong>âœï¸</p>
<p>Goè¯­è¨€é‡Œçš„å¼•ç”¨ç±»å‹ï¼šåˆ‡ç‰‡ã€æ˜ å°„ã€é€šé“ã€æ¥å£å’Œå‡½æ•°æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ï¼Œå‰å‡ ç« å·²ç»è¯´æ˜äº†å®ƒä»¬ä½œä¸ºå‚æ•°åœ¨å‡½æ•°é—´ä¼ é€’æ—¶ï¼Œæœ¬èº«å°±æ˜¯ä»¥å¼•ç”¨å½¢å¼ä¼ é€’ï¼Œæ‰€ä»¥<strong>å¼•ç”¨ç±»å‹çš„æ–¹æ³•ï¼Œå€¼æ¥å—è€…å…¶å®æ˜¯ä¸ªå¼•ç”¨(æŒ‡é’ˆ)å‰¯æœ¬</strong>ã€‚åƒä¸‡å°å¿ƒã€‚</p>
<h2 id="åµŒå…¥ç±»å‹-ç»§æ‰¿"><a href="#åµŒå…¥ç±»å‹-ç»§æ‰¿" class="headerlink" title="åµŒå…¥ç±»å‹(ç»§æ‰¿)"></a>åµŒå…¥ç±»å‹(ç»§æ‰¿)</h2><p><code>User</code>ç±»å‹çš„å±æ€§å’Œæ–¹æ³•éƒ½å®ç°äº†ï¼Œåœ¨é¢å‘å¯¹è±¡é‡Œé¢è‡ªç„¶å°‘ä¸äº†ç»§æ‰¿ï¼Œä¾‹å¦‚ç®¡ç†å‘˜è´¦æˆ·<code>Administrator</code>ç±»å‹ä¸€èˆ¬è€Œè¨€éƒ½ä¼šç»§æ‰¿Userã€‚GOè¯­è¨€å¯¹ç»§æ‰¿çš„å½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Administrator ç®¡ç†å‘˜ç”¨æˆ·</span></span><br><span class="line"><span class="keyword">type</span> Administrator <span class="keyword">struct</span> &#123;</span><br><span class="line">  User  <span class="comment">// é€šè¿‡åµŒå¥—ï¼Œç»§æ‰¿â€œçˆ¶ç±»â€</span></span><br><span class="line">  Level <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">a := Administrator&#123;</span><br><span class="line">  User: &#123; <span class="number">1</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;password&quot;</span> &#125;,</span><br><span class="line">  Level: <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="keyword">var</span> a Administrator</span><br><span class="line">a.ID = <span class="number">1</span></span><br><span class="line">a.Name = <span class="string">&quot;root&quot;</span></span><br><span class="line">a.Level = <span class="number">123</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p>æ¥å£åœ¨ç¬¬äºŒç« ä¸­å…¶å®æ€»ç»“äº†å¾ˆå¤šäº†ï¼ŒGOè¯­è¨€çš„æ¥å£å±äº<code>é¸­å­ç±»å‹</code>â€”â€”ä¹Ÿå°±æ˜¯ä¸€ä¸ªç±»å‹åªè¦å®ç°äº†æ¥å£çš„æ–¹æ³•ï¼Œä¸ç®¡å®ƒä»¬æ˜¯å¦å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œéƒ½èƒ½å¤Ÿä»¥å¤šæ€çš„å½¢å¼è°ƒç”¨ã€‚</p>
<p>è¿™é‡Œä»¥<code>Shower</code>æ¥å£ä¸ºä¾‹ï¼Œè¯¥æ¥å£è¦æ±‚å®ç°ä¸€ä¸ª<code>show</code>æ–¹æ³•ï¼Œç”¨äºæ‰“å°ä¸€ä¸ªç±»å‹çš„å†…éƒ¨ä¿¡æ¯ã€‚å’Œé¢å‘å¯¹è±¡çš„æ€è·¯ä¸€æ ·ï¼Œå„ä¸ªç±»å‹å®ç°è‡ªå·±çš„showæ–¹æ³•ï¼Œè€ŒShoweråªè´Ÿè´£è°ƒç”¨ã€‚</p>
<p>é¦–å…ˆæ˜¯æ¥å£çš„å®šä¹‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Shower æ˜¾ç¤ºæ¥å£çš„å®šä¹‰</span></span><br><span class="line"><span class="comment">// æ ¹æ®GOçš„è§„åˆ™ï¼Œå¦‚æœä¸€ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£å°±å«æ–¹æ³•å+er</span></span><br><span class="line"><span class="keyword">type</span> Shower <span class="keyword">interface</span> &#123;</span><br><span class="line">  show()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ShowInfo ä»»ä½•å®ç°äº†showçš„ç±»å‹éƒ½å¯ä»¥ä¼ å…¥è¯¥å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ShowInfo</span><span class="params">(s Shower)</span></span> &#123;</span><br><span class="line">  s.show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯<code>User</code>å’Œ<code>Administrator</code>çš„ä¸åŒshowå®ç°ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Userç±»å‹å®ç°showæ¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u User)</span> <span class="title">show</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;User %s&lt;%d&gt;\n&quot;</span>, u.Name, u.ID)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Administratorå®ç°showæ¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a Administrator)</span> <span class="title">show</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Administrator %s(%d): Level-%d\n&quot;</span>, a.Name, a.ID, a.Level)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªç±»å‹çš„å˜é‡ï¼Œå¹¶é€šè¿‡ShowInfoè°ƒç”¨</span></span><br><span class="line">ShowInfo(user)  <span class="comment">// User philon&lt;112233&gt;</span></span><br><span class="line">ShowInfo(admin) <span class="comment">// Administrator root(0): Level-123</span></span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šè¾¹çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œuserå’Œadminè™½ç„¶æ˜¯ä¸åŒçš„ç±»å‹ï¼Œä½†æ˜¯ç”±äºéƒ½å®ç°äº†showè¿™ä¸ªæ¥å£æ–¹æ³•ï¼Œå› æ­¤éƒ½å¯ä»¥ä¼ å…¥<code>ShowInfo</code>å‡½æ•°ï¼Œå¹¶ä¸”ä¹Ÿå®é™…è°ƒç”¨åˆ°äº†å®ƒä»¬å„è‡ªçš„å®ç°ã€‚</p>
<h2 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h2><ul>
<li>type xxx struct å®šä¹‰ä¸€ä¸ªç»“æ„ç±»å‹</li>
<li>type xxx interface å®šä¹‰ä¸€ä¸ªæ¥å£</li>
<li>ä¸ç®¡æ˜¯ç±»å‹ã€å‡½æ•°è¿˜æ˜¯æˆå‘˜å˜é‡ï¼Œé¦–å­—æ¯å¤§å†™è¡¨ç¤ºåŒ…å¤–å¯è§ï¼Œå¦åˆ™åŒ…å†…å¯è§</li>
<li>type xxx struct { OtherType }å³å¯ç»§æ‰¿å…¶å®ƒç»“æ„ç±»å‹</li>
<li>func (t Type) foo() å®šä¹‰ä¸€ä¸ªç±»å‹çš„æ–¹æ³•</li>
<li>å€¼æ¥å—è€…å®šä¹‰çš„ç±»å‹æ–¹æ³•ï¼Œè°ƒç”¨è€…ä¼ å…¥å‰¯æœ¬ï¼Œæ–¹æ³•å†…ä¿®æ”¹å¯¹è±¡ä¸å½±å“å¤–éƒ¨</li>
<li>æŒ‡é’ˆæ¥å—è€…å®šä¹‰çš„ç±»å‹æ–¹æ³•ï¼Œè°ƒç”¨è€…ä¼ å…¥åœ°å€ï¼Œæ–¹æ³•å†…ä¿®æ”¹å¯¹è±¡å½±å“å¤–éƒ¨</li>
<li>æ¥å£æ˜¯å®ç°å¤šæ€çš„ç±»å‹ï¼Œåªè¦å®ç°äº†æ¥å£æ–¹æ³•ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥è°ƒç”¨</li>
<li>æ ‡è¯†ç¬¦é¦–å­—æ¯å¤§å†™æ˜¯åŒ…å¤–å…¬å¼€ï¼Œå°å†™ä»…åŒ…å†…å…¬å¼€</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/14/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Philon"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Philon</p>
  <div class="site-description" itemprop="description">ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">177</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">77</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/philon" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;philon" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ixx.life</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Y5scg9Ix4iae04UOae0uJSJA-gzGzoHsz',
      appKey     : 'U9hHApgNVDExYRJqXvUs5ykr',
      placeholder: "è¯´ç‚¹ä»€ä¹ˆå§...",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
