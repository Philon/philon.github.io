<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo48x48.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo48x48.png">
  <link rel="mask-icon" href="/images/logo.png" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ixx.life","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
<meta property="og:type" content="website">
<meta property="og:title" content="è‡ªå¢äººç”Ÿ">
<meta property="og:url" content="https://ixx.life/page/11/index.html">
<meta property="og:site_name" content="è‡ªå¢äººç”Ÿ">
<meta property="og:description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Philon">
<meta property="article:tag" content="è‡ªå¾‹ arts ç¼–ç¨‹ å¼€å‘ c&#x2F;c++ java web go è¯»ä¹¦ å†™ä½œ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ixx.life/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>è‡ªå¢äººç”Ÿ</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">è‡ªå¢äººç”Ÿ</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä½•ä»¥è§£å¿§ï¼Œå”¯æœ‰ i++</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-books">

    <a href="/books/" rel="section"><i class="fa  fa-book fa-fw"></i>è¯»ä¹¦å†™ä½œ</a>

  </li>
        <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-pen fa-fw"></i>å­¦ä¹ ç¬”è®°</a>

  </li>
        <li class="menu-item menu-item-leetcode">

    <a href="/leetcode/" rel="section"><i class="fa fa-fire fa-fw"></i>LeetCode</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/38/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/38/" class="post-title-link" itemprop="url">å¦‚ä½•ä½¿ç”¨Bugè·Ÿè¸ªå™¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-07 21:08:12" itemprop="dateCreated datePublished" datetime="2019-05-07T21:08:12+08:00">2019-05-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/38/" class="post-meta-item leancloud_visitors" data-flag-title="å¦‚ä½•ä½¿ç”¨Bugè·Ÿè¸ªå™¨" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/38/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/38/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_38/">How to Use a Bug Tracker</a></p>
<p>ä¸è®ºä½ æ˜¯å¦æŠŠå®ƒä»¬ç§°ä½œbugã€ç¼ºé™·ã€è®¾è®¡å‰¯ä½œç”¨ï¼Œä½ éƒ½æ— æ³•æ‘†è„±å®ƒä»¬ã€‚çŸ¥é“å¦‚ä½•æäº¤ä¸€ä¸ªä¼˜ç§€çš„bugåé¦ˆä»¥åŠåœ¨æŸæ–¹é¢éœ€è¦ä»€ä¹ˆï¼Œæ˜¯ä¿æŒé¡¹ç›®é¡ºåˆ©æ¨è¿›çš„å…³é”®æŠ€èƒ½ã€‚</p>
<p>ä¸€ä¸ªä¼˜ç§€çš„bugåé¦ˆéœ€è¦åšåˆ°ä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>å¦‚ä½•å¤ç°bugï¼Œå°½å¯èƒ½åœ°æ¸…æ™°æè¿°ï¼Œä»¥åŠå®ƒå‡ºç°çš„é¢‘ç‡ã€‚</li>
<li>ç†è®ºä¸Šåº”è¯¥å‘ç”Ÿä»€ä¹ˆï¼Œèµ·ç åœ¨ä½ çœ‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</li>
<li>å®é™…ä¸Šåˆå‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ–è€…è‡³å°‘è®°å½•ä¸‹ä½ æ‰€æŒæ¡çš„æ›´å¤šä¿¡æ¯ã€‚</li>
</ul>
<p>å…³äºbugåé¦ˆä¿¡æ¯çš„æ•°é‡å’Œè´¨é‡ï¼Œè¦åšåˆ°å’Œåé¦ˆè€…æ‰€æŒæ¡çš„ä¸€æ ·å¤šã€‚æ„¤æ€’åœ°åé¦ˆä¸ªç®€çŸ­çš„bug(â€œè¿™ä¸ªå‡½æ•°å¤ªçƒ‚äº†ï¼â€)é™¤äº†å‘Šè¯‰å¼€å‘è€…ä½ æ­¤åˆ»å¾ˆç³Ÿç³•ä»¥å¤–ï¼Œæ²¡ä»€ä¹ˆåµç”¨ã€‚ä¸€ä¸ªå«æœ‰å……è¶³ä¸Šä¸‹æ–‡çš„bugå¯ä»¥æ›´å®¹æ˜“è¢«å¤ç°è€Œèµ¢å¾—å¤§å®¶çš„å°Šé‡ï¼Œå³ä½¿å®ƒå·²åœæ­¢å‘å¸ƒã€‚</p>
<p>å˜æ›´bugçš„çŠ¶æ€ï¼Œä¾‹å¦‚æ‰“å¼€-å…³é—­ï¼Œè¿™æ˜¯ä½ å¯¹bugæ€è€ƒçš„å…¬å¼€å£°æ˜ã€‚èŠ±ç‚¹æ—¶é—´è§£é‡Šä¸ºä½•ä½ è§‰å¾—bugåº”è¯¥è¢«å…³é—­ï¼Œå¯ä»¥æŒ½å›åœ¨æ¼æ€’çš„ç»ç†å’Œæ¶ˆè´¹è€…é¢å‰è¾©è§£çš„æ—¶é—´ã€‚å˜æ›´bugçš„ä¼˜å…ˆçº§ä¹Ÿç±»ä¼¼äºä¸€ä»½å…¬å¼€å£°æ˜ï¼Œä»…ä»…æ˜¯å› ä¸ºå®ƒå¯¹ä½ æ¥è¯´å¾®ä¸è¶³é“ï¼Œä½†å¹¶ä¸æ„å‘³ç€å®ƒä¼šè®©å…¶ä»–äººåœæ­¢ä½¿ç”¨è¯¥äº§å“ã€‚</p>
<p>ä¸è¦ä¸ºäº†ä½ è‡ªå·±çš„ç›®çš„å°±å»é‡è½½ä¸€ä¸ªbugå­—æ®µã€‚å°†â€œVITAL:â€æ·»åŠ ä¸ºbugä¸»é¢˜çš„å­—æ®µå¯èƒ½æœ‰åˆ©äºä½ å¯¹ä¸€äº›æŠ¥å‘Šç»“æœåšæ’åºï¼Œä½†å®ƒä¹Ÿå°†è¢«å…¶ä»–äººå¤åˆ¶å¹¶éš¾ä»¥é¿å…æ‹¼å†™å‡ºé”™ï¼Œæˆ–è€…åœ¨å…¶ä»–æŠ¥å‘Šä¸­å°†å…¶åˆ é™¤ã€‚ä½¿ç”¨ä¸€ä¸ªæ–°å€¼æˆ–æ–°å­—æ®µæ¥ä»£æ›¿ï¼Œå¹¶ç”¨æ–‡æ¡£è®°å½•å­—æ®µè¯¥å¦‚ä½•ä½¿ç”¨ï¼Œä»¥ä¾¿ä»–äººä¸å¿…é‡å¤ã€‚</p>
<p>ç¡®ä¿æ¯ä¸ªäººéƒ½çŸ¥é“å¦‚ä½•æ‰¾å‡ºå›¢é˜Ÿè®¤å¯çš„bugä»¥è¢«å¤„ç†ã€‚é€šå¸¸å¯ä»¥é‡‡ç”¨ä¸€ä¸ªå…¬å…±çš„æŸ¥è¯¢åç§°ã€‚ç¡®ä¿æ¯ä¸ªäººéƒ½é‡‡ç”¨ç›¸åŒçš„æŸ¥è¯¢æ–¹å¼ï¼Œåœ¨æ²¡æœ‰äº‹å…ˆé€šçŸ¥å›¢é˜Ÿä½ å·²ç»æ”¹å˜äº†æŸäº›å†…å®¹çš„æƒ…å†µä¸‹ï¼Œä¸è¦æ›´æ–°æ­¤æŸ¥è¯¢ã€‚</p>
<p>æœ€åï¼Œè®°ä½bugä¸æ˜¯å·¥ä½œçš„ä¸€ä¸ªæ ‡å‡†å•å…ƒï¼Œåªæ˜¯ä¸€è¡Œä»£ç çš„ç²¾ç¡®æµ‹é‡ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/ArmLinuxDriver/chapter5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/ArmLinuxDriver/chapter5/" class="post-title-link" itemprop="url">äºŒï¼šè°ƒè¯•æŠ€æœ¯</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-02 20:47:42" itemprop="dateCreated datePublished" datetime="2019-05-02T20:47:42+08:00">2019-05-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ARM-Linux%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">ARM-Linuxé©±åŠ¨å¼€å‘</span></a>
                </span>
            </span>

          
            <span id="/ArmLinuxDriver/chapter5/" class="post-meta-item leancloud_visitors" data-flag-title="äºŒï¼šè°ƒè¯•æŠ€æœ¯" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/ArmLinuxDriver/chapter5/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/ArmLinuxDriver/chapter5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å¤äººäº‘:åˆ«è·Ÿè€å­è¯´ä»€ä¹ˆæ–­ç‚¹ã€è·Ÿè¸ªã€gdbã€lldbâ€¦è€å­è°ƒä»£ç ä»æ¥éƒ½æ˜¯printğŸ˜‚ï¸ã€‚è°ƒè¯•åœ¨ç¨‹åºå¼€å‘ä¸­æ˜¯éå¸¸é‡è¦çš„æ‰‹æ®µï¼Œå°±åƒå•å…ƒæµ‹è¯•ä¸€æ ·ï¼Œæ˜¯ä¿éšœè½¯ä»¶è´¨é‡çš„ä¸»è¦æ‰‹æ®µä¹‹ä¸€ï¼Œåˆ«ä¸å½“å›äº‹ï¼</p>
<p>è¨€å½’æ­£ä¼ ï¼Œlinuxå†…æ ¸æä¾›äº†å¤šç§è°ƒè¯•æŠ€æœ¯ï¼Œä½†å› ä¸ºé©±åŠ¨ç¨‹åºä¸æ˜¯æ™®é€šçš„ç¨‹åºï¼Œå¾ˆå¤šå¸¸è§çš„è°ƒè¯•å·¥å…·åˆ°å†…æ ¸è¿™ä¸€å±‚åŸºæœ¬éƒ½æ‰‘è¡—äº†ï¼Œprintkåè€Œæˆäº†æœ€æœ´å®æœ‰æ•ˆçš„æ‰‹æ®µä¹‹ä¸€ï¼Œä½†ä¸è®ºå¦‚ä½•ï¼Œå¤šæŒæ¡å…¶ä»–çš„è°ƒè¯•æ‰‹æ®µå’Œå·¥å…·ï¼Œå¯¹äºä»Šåå®šä½å†…æ ¸æ¨¡å—çš„é”™è¯¯ï¼Œæ€»ä¼šæœ‰å¸®åŠ©çš„ã€‚</p>
<h2 id="æ‰“å°-printk"><a href="#æ‰“å°-printk" class="headerlink" title="æ‰“å° - printk"></a>æ‰“å° - printk</h2><p><code>printk</code>å°±æ˜¯å¸¸è§„çš„æ‰“å°è¾“å‡ºï¼Œä½†ä¸åº”ç”¨æˆçš„<code>printf</code>ç¨å¾®ä¸åŒï¼Œå¾€å¾€ä¼šçœ‹åˆ°è¿™æ ·çš„è°ƒç”¨<code>printk(KERN_ALERT&quot;hello world&quot;)</code>ï¼Œå…¶ä¸­çš„<code>KERN_ALERT</code>è¡¨ç¤ºæ‰“å°çº§åˆ«ï¼Œå†…æ ¸æºç ä¸­å®šä¹‰äº†å¤šç§æ‰“å°çº§åˆ«ï¼Œä¸”çœ‹å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_SOH      <span class="meta-string">&quot;\001&quot;</span>       <span class="comment">/* ASCII Start Of Header */</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_EMERG    KERN_SOH <span class="meta-string">&quot;0&quot;</span> <span class="comment">/* ç´§æ€¥äº‹ä»¶æ¶ˆæ¯,åœ¨ç³»ç»Ÿå´©æºƒå‰æç¤ºç”¨çš„ */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_ALERT    KERN_SOH <span class="meta-string">&quot;1&quot;</span> <span class="comment">/* ç”¨äºéœ€è¦ç«‹å³é‡‡å–åŠ¨ä½œçš„æƒ…å†µ */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_CRIT     KERN_SOH <span class="meta-string">&quot;2&quot;</span> <span class="comment">/* ä¸´ç•ŒçŠ¶æ€ï¼Œæ¶‰åŠä¸¥é‡çš„ç¡¬ä»¶æˆ–è½¯ä»¶æ“ä½œå¤±è´¥æ—¶æç¤º */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_ERR      KERN_SOH <span class="meta-string">&quot;3&quot;</span> <span class="comment">/* é”™è¯¯æŠ¥å‘Š */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_WARNING  KERN_SOH <span class="meta-string">&quot;4&quot;</span> <span class="comment">/* å¸¸è§„è­¦å‘Š */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_NOTICE   KERN_SOH <span class="meta-string">&quot;5&quot;</span> <span class="comment">/* æ™®é€šæç¤ºï¼Œå¸¸è§ä¸å®‰å…¨ç›¸å…³çš„æ±‡æŠ¥ */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_INFO     KERN_SOH <span class="meta-string">&quot;6&quot;</span> <span class="comment">/* æç¤ºæ€§ä¿¡æ¯ï¼Œæ¯”å¦‚ç¡¬ä»¶ä¿¡æ¯ */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERN_DEBUG    KERN_SOH <span class="meta-string">&quot;7&quot;</span> <span class="comment">/* è°ƒè¯•ä¿¡æ¯ */</span></span></span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šå®šä¹‰å¯ä»¥çœ‹åˆ°ï¼Œå†…æ ¸å…±æä¾›äº†0-7ä¸ªçº§åˆ«ï¼Œ<strong>æ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</strong>ã€‚</p>
<h3 id="å±è”½å…¶ä»–çº§åˆ«æ‰“å°"><a href="#å±è”½å…¶ä»–çº§åˆ«æ‰“å°" class="headerlink" title="å±è”½å…¶ä»–çº§åˆ«æ‰“å°"></a>å±è”½å…¶ä»–çº§åˆ«æ‰“å°</h3><p><code>/proc/sys/kernel/printk</code>æ–‡ä»¶å¾ˆé‡è¦ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥å±è”½ä¸åŒçº§åˆ«çš„æ‰“å°è¾“å‡ºï¼Œæˆ‘ä»¬è¿…é€Ÿå†™ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> __init <span class="title">meme_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    printk(KERN_EMERG<span class="string">&quot;emerg 0\n&quot;</span>);</span><br><span class="line">    printk(KERN_ALERT<span class="string">&quot;alert 1\n&quot;</span>);</span><br><span class="line">    printk(KERN_CRIT<span class="string">&quot;crit 2\n&quot;</span>);</span><br><span class="line">    printk(KERN_ERR<span class="string">&quot;err 3\n&quot;</span>);</span><br><span class="line">    printk(KERN_WARNING<span class="string">&quot;warning 4\n&quot;</span>);</span><br><span class="line">    printk(KERN_NOTICE<span class="string">&quot;notice 5\n&quot;</span>);</span><br><span class="line">    printk(KERN_INFO<span class="string">&quot;info 6\n&quot;</span>);</span><br><span class="line">    printk(KERN_DEBUG<span class="string">&quot;debug 7\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">module_init(meme_init);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç åªæ˜¯åœ¨æ¨¡å—åŠ è½½çš„æ—¶å€™æ‰“å°äº†7ä¸ªçº§åˆ«çš„å†…å®¹ï¼Œç°åœ¨åšä¸€ä»¶äº‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹è¯¥æ–‡ä»¶å‘ç°é»˜è®¤æ‰“å°çº§åˆ«å°äº7ï¼Œå³é™¤äº†KERN_DEBUGçº§åˆ«ï¼Œå…¶ä»–éƒ½èƒ½æ˜¾ç¤ºåˆ°ç»ˆç«¯</span></span><br><span class="line">/ <span class="comment"># cat /proc/sys/kernel/printk</span></span><br><span class="line">7	4	1	7</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨å¼ºåˆ¶æ‰“å°çº§åˆ«å°äº3ï¼Œå³KERN_ERRåŠå…¶ä¹‹åçº§åˆ«çš„å†…å®¹ä¸å†æ˜¾ç¤º</span></span><br><span class="line">/ <span class="comment"># echo 3 &gt; /proc/sys/kernel/printk</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ¨¡å—</span></span><br><span class="line">/ <span class="comment"># insmod meme.ko </span></span><br><span class="line">emerg 0</span><br><span class="line">alert 1</span><br><span class="line">crit 2</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šè¾¹çš„æŒ‡ä»¤å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ä¿®æ”¹/proc/sys/kernel/printkæ–‡ä»¶çš„å€¼å¯ä»¥ç›´æ¥å¼ºåˆ¶æ§åˆ¶å°æ‰“å°çš„æ—¥å¿—çº§åˆ«ï¼Œè¿™å¯è¦æ¯”ä½ åå¤æ³¨é‡Š+ç¼–è¯‘çš„æ‰‹æ®µé«˜æ˜å¤šäº†ã€‚</p>
<h2 id="é€šè¿‡procfsæ–‡ä»¶æŸ¥è¯¢è°ƒè¯•"><a href="#é€šè¿‡procfsæ–‡ä»¶æŸ¥è¯¢è°ƒè¯•" class="headerlink" title="é€šè¿‡procfsæ–‡ä»¶æŸ¥è¯¢è°ƒè¯•"></a>é€šè¿‡procfsæ–‡ä»¶æŸ¥è¯¢è°ƒè¯•</h2><p>printkå‡½æ•°å›ºç„¶ç®€å•æ˜“ç”¨ï¼Œä½†é™¤äº†é€¼æ ¼å¾ˆlowä¹‹å¤–è¿˜å­˜åœ¨ä¸ªæŠ€æœ¯ä¸Šçš„éšœç¢â€”â€”å¤§é‡ä½¿ç”¨printkä¼šæå¤§åœ°æ‹–ç´¯ç¨‹åºçš„æ€§èƒ½ï¼ŒåŸåˆ™ä¸Šä¹Ÿä»…ç”¨äºå¸¸è§„å’Œé”™è¯¯ä¿¡æ¯æç¤ºï¼Œåƒforã€whileä¹‹ç±»çš„å¾ªç¯å†…åƒä¸‡åˆ«ç”¨å®ƒã€‚</p>
<p>ç„¶è€Œå®é™…ä¸Šç”¨æˆ·éœ€è¦æ—¶åˆ»æŒæ¡å„ç§è®¾å¤‡çš„çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚cpuå½“å‰é¢‘ç‡/æ¸©åº¦ã€å†…å­˜å ç”¨ç‡ç­‰ç­‰ï¼Œprintkæ˜¾ç„¶ä¸èƒ½èƒœä»»ï¼Œè½®åˆ°procfsç™»åœºäº†ï¼Œæˆ‘ä»¬çŸ¥é“procæ˜¯å†…æ ¸çš„ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œèƒ½å¤Ÿä»¥æ–‡ä»¶çš„å½¢å¼å±•ç°æ•´ä¸ªç³»ç»Ÿå†…éƒ¨çš„ä¿¡æ¯ï¼Œè€Œ<strong>é€šè¿‡procfsæ–‡ä»¶æŸ¥è¯¢è°ƒè¯•</strong>æŠ€æœ¯ï¼Œå°±æ˜¯åœ¨<code>/proc</code>ç›®å½•ä¸‹åˆ›å»ºé©±åŠ¨æ¨¡å—è‡ªå·±çš„ç›®å½•å’Œæ–‡ä»¶â€”â€”ä¿—ç§°å…¥å£ï¼Œä¾›ç”¨æˆ·éšæ—¶è®¿é—®ã€‚</p>
<p>æˆ‘ä¸ªäººè§‰å¾—ï¼Œé©±åŠ¨æš´éœ²åœ¨procæ–‡ä»¶ç³»ç»Ÿçš„å…¥å£å…¶å®å¾ˆå°‘ä¼šç”¨äºâ€œè°ƒè¯•â€ï¼Œè€Œæ˜¯ä¸€äº›å…³é”®ä¿¡æ¯çš„å±•ç¤ºï¼Œæ¯”å¦‚<code>cpuinfo</code>ã€<code>meminfo</code>ç­‰æ–‡ä»¶ï¼Œè¿™å°±æ˜¯å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼Œcpuå’Œå†…å­˜é©±åŠ¨åˆ›å»ºçš„æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹ç›¸å…³è®¾å¤‡çš„ç»†èŠ‚ä¿¡æ¯ã€‚</p>
<p>åœ¨<code>proc</code>æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºå…¥å£æ–‡ä»¶éå¸¸ç®€å•ï¼Œæ€»å…±æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<h3 id="1-æ™®é€šprocå…¥å£"><a href="#1-æ™®é€šprocå…¥å£" class="headerlink" title="1. æ™®é€šprocå…¥å£"></a>1. æ™®é€šprocå…¥å£</h3><p>ä¹‹å‰çš„å­¦ä¹ ç¬”è®°ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†memeé©±åŠ¨æ¨¡å—çš„è®¾å¤‡èŠ‚ç‚¹<code>/dev/meme</code>ï¼Œç°åœ¨å®ç°ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œç”¨æˆ·åªéœ€è¦é€šè¿‡å‘½ä»¤<code>cat /proc/meme/state</code>å³å¯æŸ¥çœ‹è®¾å¤‡èŠ‚ç‚¹<code>/dev/meme</code>çš„æ–‡ä»¶è®¿é—®çŠ¶æ€ï¼Œä¾‹å¦‚æ‰“å¼€ã€å…³é—­ã€æ­£åœ¨è¯»ã€æ­£åœ¨å†™ç­‰ç­‰ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨procfsåˆ›å»º/åˆ é™¤å…¥å£æ–‡ä»¶çš„APIæœ‰è¿™ä¹ˆå‡ ä¸ªï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// procå…¥å£æ–‡ä»¶çš„ç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">proc_dir_entry</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨procfsä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•</span></span><br><span class="line"><span class="comment">// @name    è¦åˆ›å»ºçš„ç›®å½•å</span></span><br><span class="line"><span class="comment">// @parent  ä¸Šçº§ç›®å½•ï¼ŒNULLè¡¨ç¤º/proc</span></span><br><span class="line"><span class="function">struct proc_dir_entry *<span class="title">proc_mkdir</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name, struct proc_dir_entry *parent)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨procfsä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="comment">// @name    è¦åˆ›å»ºçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">// @mode    æ–‡ä»¶çš„è®¿é—®æƒé™</span></span><br><span class="line"><span class="comment">// @parent  æ‰€åœ¨ç›®å½•ï¼ŒNULLè¡¨ç¤º/proc</span></span><br><span class="line"><span class="comment">// @proc_fops æ–‡ä»¶æ“ä½œç»“æ„ï¼Œä¸å­—ç¬¦è®¾å¤‡ä¸€æ ·çš„æœºåˆ¶</span></span><br><span class="line"><span class="function">struct proc_dir_entry *<span class="title">proc_create</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">umode_t</span> mode, struct proc_dir_entry *parent, <span class="keyword">const</span> struct file_operations *proc_fops)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨procfsä¸‹åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line"><span class="comment">// @name    è¦åˆ é™¤çš„å…¥å£å</span></span><br><span class="line"><span class="comment">// @parent  æ‰€åœ¨ä¸Šçº§ç›®å½•</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">remove_proc_entry</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name, struct proc_dir_entry *parent)</span></span>;</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œé€šè¿‡è°ƒç”¨<code>proc_mkdir()</code>å’Œ<code>proc_create()</code>å³å¯åˆ›å»ºå‡º<code>/proc/meme/state</code>ç›®å½•å’Œæ–‡ä»¶äº†ï¼Œå‡ ä¹æ²¡ä»€ä¹ˆéš¾åº¦ï¼Œæ³¨æ„åœ¨åˆ›å»ºprocçš„å…¥å£æ–‡ä»¶æ—¶éœ€è¦æŒ‡å®šä¸€ä¸ª<code>file_operations *fops</code>ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶è®¿é—®å‡½æ•°çš„æ˜ å°„ï¼Œå’Œå­—ç¬¦è®¾å¤‡ç« èŠ‚ä¸­çš„æ“ä½œä¸€æ¨¡ä¸€æ ·ã€‚è€Œ<code>/proc/meme/state</code>æ˜¯ä¸€ä¸ªåªè¯»çŠ¶æ€æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å®ç°<code>read</code>å‡½æ•°çš„åŠŸèƒ½â€”â€”è¿”å›çŠ¶æ€å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * meme_proc.c</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/proc_fs.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å˜é‡ï¼Œmemeçš„è®¾å¤‡èŠ‚ç‚¹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">int</span> meme_cdev_state = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">ssize_t</span> <span class="title">meme_proc_read</span><span class="params">(struct file* filp, <span class="keyword">char</span> __user* buf, <span class="keyword">size_t</span> len, <span class="keyword">loff_t</span>* off)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rc = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* state = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (*off &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (meme_cdev_state) &#123;</span><br><span class="line">        <span class="keyword">case</span> MEME_STATE_OPENED: state = <span class="string">&quot;opened&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> MEME_STATE_CLOSED: state = <span class="string">&quot;closed&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> MEME_STATE_READING: state = <span class="string">&quot;reading&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> MEME_STATE_WRITING: state = <span class="string">&quot;writing&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>: state = <span class="string">&quot;unknown&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    len = <span class="built_in">strlen</span>(state);</span><br><span class="line">    <span class="keyword">if</span> ((rc = copy_to_user(buf, state, len)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> rc;</span><br><span class="line">    &#125;</span><br><span class="line">    buf[len++] = <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    buf[len++] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šç”¨æˆ·å±‚readæ—¶çš„è§¦å‘å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">file_operations</span> <span class="title">proc_fops</span> =</span> &#123;</span><br><span class="line">    .owner = THIS_MODULE,</span><br><span class="line">    .read = meme_proc_read,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// procfså…¥å£ç›®å½•</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">proc_dir_entry</span>* <span class="title">meme_proc_entry</span> =</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> __init <span class="title">meme_proc_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å³/proc/meme/stateï¼Œç”¨äºè®°å½•è®¾å¤‡æè¿°ç¬¦/dev/memeçš„æ–‡ä»¶è®¿é—®çŠ¶æ€</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">proc_dir_entry</span>* <span class="title">meme_state_file</span> =</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºmemeæ¨¡å—çš„procç›®å½•ï¼Œå³/proc/meme/</span></span><br><span class="line">    meme_proc_entry = proc_mkdir(<span class="string">&quot;meme&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span> (meme_proc_entry == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> -EINVAL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»º/proc/meme/stateæ–‡ä»¶ï¼Œä¸”è¯¥æ–‡ä»¶ä¸ºåªè¯»</span></span><br><span class="line">    meme_state_file = proc_create(<span class="string">&quot;state&quot;</span>, <span class="number">0500</span>, meme_proc_entry, &amp;proc_fops);</span><br><span class="line">    <span class="keyword">if</span> (meme_state_file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> -EINVAL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> __exit <span class="title">meme_proc_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å¸è½½æ¨¡å—æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤æ‰€æœ‰/proc/memeæ‰€åˆ›å»ºçš„æ–‡ä»¶åŠç›®å½•</span></span><br><span class="line">    remove_proc_entry(<span class="string">&quot;state&quot;</span>, meme_proc_entry);</span><br><span class="line">    remove_proc_entry(<span class="string">&quot;meme&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ˜¯memeé©±åŠ¨æ¨¡å—åœ¨procå…¥å£çŠ¶æ€æ–‡ä»¶çš„ç›¸å…³å®ç°ï¼Œæ—¢ç„¶è¦ç›‘å¬çš„æ˜¯<code>/dev/meme</code>è®¾å¤‡èŠ‚ç‚¹çš„è®¿é—®çŠ¶æ€ï¼Œä¸Šè¿°ä»£ç æ˜¯é€šè¿‡<code>meme_cdev_state</code>å…¨å±€å˜é‡æ¥å®ç°çš„ï¼Œæ•…è¿™è¾¹å˜é‡è‡ªç„¶æ˜¯åœ¨å­—ç¬¦è®¾å¤‡çš„ä»£ç å®ç°ä¸­è¢«ä¿®æ”¹çš„ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * main.c</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">ssize_t</span> <span class="title">meme_read</span><span class="params">(struct file* filp, <span class="keyword">char</span> __user *buf, <span class="keyword">size_t</span> size, <span class="keyword">loff_t</span>* off)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    meme_cdev_state = MEME_STATE_READING;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">ssize_t</span> <span class="title">meme_write</span><span class="params">(struct file* filp, <span class="keyword">const</span> <span class="keyword">char</span> __user *buf, <span class="keyword">size_t</span> size, <span class="keyword">loff_t</span>* off)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    meme_cdev_state = MEME_STATE_WRITING;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meme_open</span><span class="params">(struct inode* inode, struct file* filp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    meme_cdev_state = MEME_STATE_OPENED;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meme_close</span><span class="params">(struct inode* inode, struct file* filp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    meme_cdev_state = MEME_STATE_CLOSED;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æ­¤ä¸€æ¥ï¼Œç”¨æˆ·è®¿é—®<code>/dev/meme</code>è®¾å¤‡èŠ‚ç‚¹ï¼Œ<code>meme_cdev_state</code>å€¼å°±ä¼šè¢«æ”¹å˜ï¼Œå¯¹åº”çš„çŠ¶æ€è‡ªç„¶å°±æš´éœ²åˆ°<code>/proc/meme/state</code>çš„readè§¦å‘å‡½æ•°ä¸­äº†ï¼Œå®Œç¾ï½</p>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># insmod meme.ko </span></span><br><span class="line">meme: loading out-of-tree module taints kernel.</span><br><span class="line">meme init: 250:0</span><br><span class="line">/ <span class="comment"># mknod /dev/meme c 250 0</span></span><br><span class="line">/ <span class="comment"># while true; do echo 123 &gt;&gt; /dev/meme; done &amp;</span></span><br><span class="line">/ <span class="comment"># cat /proc/meme/state </span></span><br><span class="line">opened</span><br><span class="line">/ <span class="comment"># cat /proc/meme/state </span></span><br><span class="line">closed</span><br><span class="line">/ <span class="comment"># cat /proc/meme/state </span></span><br><span class="line">opened</span><br><span class="line">/ <span class="comment"># cat /proc/meme/state </span></span><br><span class="line">writing</span><br></pre></td></tr></table></figure>

<h3 id="2-seq-fileæ¥å£"><a href="#2-seq-fileæ¥å£" class="headerlink" title="2. seq_fileæ¥å£"></a>2. seq_fileæ¥å£</h3><p><code>seq_file</code>ä¸»è¦æ˜¯ç”¨äºå¤„ç†é‚£äº›æ¯”è¾ƒâ€œå¤§â€çš„procå…¥å£æ–‡ä»¶ã€‚æ‰€è°“çš„å¤§ä¸æ˜¯è¯´æ–‡ä»¶ä½“ç§¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬éœ€è¦å¼€å‘ä¸€ä¸ªä¸²å£é©±åŠ¨ï¼Œè€Œè¿™ä¸ªé©±åŠ¨éœ€è¦è®°å½•ä¸²å£æ¯ä¸€æ¬¡çš„æ”¶å‘å†å²è®°å½•ï¼Œç”¨è¿™ç§æ–¹å¼å†ä½•æ—¶ä¸è¿‡ã€‚seqæ˜¯åºåˆ—çš„æ„æ€ï¼Œå³é€šè¿‡è¿­ä»£çš„æ–¹å¼ï¼ŒæŠŠé©±åŠ¨çš„æŸäº›çŠ¶æ€ä¿¡æ¯æŒ‰é¡ºåºæ‰“å°å‡ºæ¥ã€‚</p>
<p><code>seq_file</code>æä¾›äº†4ä¸ªè¿­ä»£å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">seq_operations</span> &#123;</span></span><br><span class="line">    <span class="comment">// é¦–æ¬¡è®¿é—®æ—¶è§¦å‘</span></span><br><span class="line">	<span class="keyword">void</span> * (*start) (struct seq_file *m, <span class="keyword">loff_t</span> *pos);</span><br><span class="line">    <span class="comment">// ç»“æŸè®¿é—®æ—¶è§¦å‘</span></span><br><span class="line">	<span class="keyword">void</span> (*stop) (struct seq_file *m, <span class="keyword">void</span> *v);</span><br><span class="line">    <span class="comment">// è¿­ä»£è®¿é—®æ—¶è§¦å‘</span></span><br><span class="line">	<span class="keyword">void</span> * (*next) (struct seq_file *m, <span class="keyword">void</span> *v, <span class="keyword">loff_t</span> *pos);</span><br><span class="line">    <span class="comment">// æ‰“å°å±•ç¤ºæ—¶è§¦å‘</span></span><br><span class="line">	<span class="keyword">int</span> (*show) (struct seq_file *m, <span class="keyword">void</span> *v);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å†åˆ›å»ºä¸€ä¸ªå…¥å£æ–‡ä»¶<code>/proc/meme/info</code>ï¼Œå½“ç”¨æˆ·é€šè¿‡å‘½ä»¤<code>cat /proc/meme/info</code>æ—¶ï¼Œæ‰“å°0-100è¡Œè®¡æ•°å†…å®¹ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * meme_seq_file.c</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/seq_file.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXNUM 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®æ–‡ä»¶æ—¶é¦–å…ˆè°ƒç”¨çš„æ¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>* <span class="title">meme_seq_start</span><span class="params">(struct seq_file* m, <span class="keyword">loff_t</span>* pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* v = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span> (*pos &lt; MAXNUM) &#123;</span><br><span class="line">        v = kmalloc(<span class="keyword">sizeof</span>(<span class="keyword">int</span>), GFP_KERNEL);</span><br><span class="line">        *v = *pos;</span><br><span class="line">        seq_printf(m, <span class="string">&quot;start: *(%p) = %d\n&quot;</span>, v, *(<span class="keyword">int</span>*)v);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// startå‡½æ•°è¿”å›NULLè¡¨ç¤ºposå·²åˆ°è¾¾æ–‡ä»¶æœ«å°¾</span></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯æ¬¡è¿­ä»£æ—¶è°ƒç”¨ï¼Œå…¶ä¸­væ˜¯ä¹‹å‰ä¸€æ¬¡è¿­ä»£(startæˆ–next)çš„è¿”å›å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>* <span class="title">meme_seq_next</span><span class="params">(struct seq_file* m, <span class="keyword">void</span>* v, <span class="keyword">loff_t</span>* pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = *(<span class="keyword">int</span>*)v;</span><br><span class="line">    <span class="keyword">if</span> (num++ &gt;= MAXNUM) &#123;</span><br><span class="line">        <span class="comment">// è¿”å›NULLåœæ­¢è¿­ä»£</span></span><br><span class="line">        kfree(v);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯æ¬¡è¿­ä»£ï¼Œvå’Œæ–‡ä»¶æ¸¸æ ‡éƒ½å¢åŠ 1</span></span><br><span class="line">    *(<span class="keyword">int</span>*)v = *pos = num;</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æŸè¿­ä»£æ—¶è°ƒç”¨ï¼Œå¦‚æœåœ¨startä¸­æœ‰å†…å­˜åˆ†é…ï¼Œåº”è¯¥åœ¨è¿™é‡Œè¿›è¡Œå†…å­˜æ¸…ç†</span></span><br><span class="line"><span class="comment">// ä½†ç”±äºnextçš„æœ€åä¸€æ¬¡è¿­ä»£è‚¯å®šè¿”å›NULLï¼Œæ‰€ä»¥è¿™é‡Œçš„våœ°å€ä¸€å®šä¸ºNULL</span></span><br><span class="line"><span class="comment">// ä¸éœ€è¦ä½œä»»ä½•å¤„ç†</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">meme_seq_stop</span><span class="params">(struct seq_file* m, <span class="keyword">void</span>* v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±•ç¤ºæ—¶è°ƒç”¨ï¼Œä¸»è¦æ˜¯å°†vçš„å†…å®¹æ ¼å¼åŒ–å¹¶è¾“å‡ºåˆ°ç”¨æˆ·ç©ºé—´</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meme_seq_show</span><span class="params">(struct seq_file* m, <span class="keyword">void</span>* v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    seq_printf(m, <span class="string">&quot;show: *(%p) = %d\n&quot;</span>, v, *(<span class="keyword">int</span>*)v);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜ å°„seqçš„startã€nextã€stopã€showå››ä¸ªè¿­ä»£å™¨çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">seq_operations</span> <span class="title">meme_seq_ops</span> =</span> &#123;</span><br><span class="line">    .start = meme_seq_start,</span><br><span class="line">    .next = meme_seq_next,</span><br><span class="line">    .stop = meme_seq_stop,</span><br><span class="line">    .show = meme_seq_show,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meme_seq_open</span><span class="params">(struct inode* inode, struct file* filp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ç»‘å®šè¿­ä»£æ“ä½œçš„4ä¸ªå‡½æ•°åˆ°/proc/meme/infoæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">return</span> seq_open(filp, &amp;meme_seq_ops);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// /proc/meme/infoçš„æ–‡ä»¶æ“ä½œæ˜ å°„ï¼Œé™¤äº†openéœ€è¦è‡ªå·±å®ç°å¤–ï¼Œå…¶ä»–å‡ä½¿ç”¨å†…éƒ¨å®šä¹‰å¥½çš„</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">file_operations</span> <span class="title">meme_seq_fops</span> =</span> &#123;</span><br><span class="line">    .owner = THIS_MODULE,</span><br><span class="line">    .open = meme_seq_open,</span><br><span class="line">    .read = seq_read,</span><br><span class="line">    .llseek = seq_lseek,</span><br><span class="line">    .release = seq_release,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> __init <span class="title">meme_seq_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºseqå…¥å£æ–‡ä»¶ï¼Œå³/proc/meme/infoï¼Œå¹¶ç»‘å®šseqç›¸å…³æ–‡ä»¶å‡½æ•°</span></span><br><span class="line">    proc_create(<span class="string">&quot;info&quot;</span>, <span class="number">0500</span>, meme_proc_entry, &amp;meme_seq_fops);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> __exit <span class="title">meme_seq_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆ é™¤/proc/meme/infoæ–‡ä»¶</span></span><br><span class="line">    remove_proc_entry(<span class="string">&quot;info&quot;</span>, meme_proc_entry);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šè¾¹çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†å®ç°4ä¸ªè¿­ä»£çš„è§¦å‘å‡½æ•°ä¹‹å¤–ï¼Œè¿˜éœ€è¦å®ç°æ–‡ä»¶çš„openè§¦å‘ï¼Œå‰©ä¸‹çš„å†…å®¹å°±å’Œå¸¸è§„çš„procå…¥å£æ–‡ä»¶åˆ›å»ºæœºåˆ¶æ²¡ä»€ä¹ˆåŒºåˆ«äº†ã€‚æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># insmod meme.ko</span></span><br><span class="line">/ <span class="comment"># cat /proc/meme/info</span></span><br><span class="line">start: *(ada2e682) = 0</span><br><span class="line">show: *(ada2e682) = 0</span><br><span class="line">show: *(ada2e682) = 1</span><br><span class="line">show: *(ada2e682) = 2</span><br><span class="line">show: *(ada2e682) = 3</span><br><span class="line">...</span><br><span class="line">show: *(ada2e682) = 99</span><br><span class="line">show: *(ada2e682) = 100</span><br></pre></td></tr></table></figure>

<p>ä»£ç å®ç°çš„æ¯”è¾ƒç®€å•ï¼Œåœ¨<code>start</code>å‡½æ•°ä¸­ä¸ºè¿­ä»£åˆ†é…ä¸€æ®µå†…å®¹ç©ºé—´ç”¨äºè®¡æ•°ï¼Œè€Œåœ¨<code>next</code>æ¯æ¬¡è¿­ä»£æ—¶å°†è®¡æ•°ç´¯åŠ 1ç›´åˆ°100åè·³å‡ºè¿­ä»£ï¼Œæ¯æ¬¡è¿­ä»£åéƒ½ä¼šè‡ªåŠ¨è°ƒç”¨<code>show</code>å°†è®°å½•å€¼æ‰“å°å‡ºæ¥ã€‚</p>
<h2 id="é€šè¿‡straceå‘½ä»¤ç›‘è§†"><a href="#é€šè¿‡straceå‘½ä»¤ç›‘è§†" class="headerlink" title="é€šè¿‡straceå‘½ä»¤ç›‘è§†"></a>é€šè¿‡straceå‘½ä»¤ç›‘è§†</h2><h3 id="straceç§»æ¤"><a href="#straceç§»æ¤" class="headerlink" title="straceç§»æ¤"></a>straceç§»æ¤</h3><p>ç”±äºBusyboxé»˜è®¤æ˜¯ä¸å¸¦straceçš„ï¼Œéœ€è¦è‡ªè¡Œç§»æ¤ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½straceæºç å¹¶ç§»æ¤</span></span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/strace/strace.git</span><br><span class="line">$ <span class="built_in">cd</span> strace &amp;&amp; ./bootstrap</span><br><span class="line">$ mkdir build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">$ ../configure prefix=$(<span class="built_in">pwd</span>)/install --host=arm-linux-gnueabihf CC=arm-linux-gnueabihf-gcc</span><br><span class="line">$ make -j8 &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†straceå‘½ä»¤æ‹·è´è‡³ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">$ sudo mount -o loop ../../rootfs.ext3 /mnt/</span><br><span class="line">$ sudo cp install/bin/strace /mnt/usr/bin</span><br><span class="line">$ sudo umount /mnt</span><br></pre></td></tr></table></figure>

<p>å‚ç…§å®˜æ–¹æ–‡æ¡£æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># strace -c ls &gt; /dev/null </span></span><br><span class="line">% time     seconds  usecs/call     calls    errors syscall</span><br><span class="line">------ ----------- ----------- --------- --------- ----------------</span><br><span class="line"> 33.51    0.010491         201        52        48 openat</span><br><span class="line"> 24.14    0.007557         157        48        47 stat64</span><br><span class="line"> 14.51    0.004544         378        12           lstat64</span><br><span class="line">  5.88    0.001842         921         2           getdents64</span><br><span class="line">  5.58    0.001748         194         9           mmap2</span><br><span class="line">  4.45    0.001393         154         9           <span class="built_in">read</span></span><br><span class="line">  3.58    0.001120         140         8           mprotect</span><br><span class="line">  2.33    0.000730         121         6           _llseek</span><br><span class="line">  1.87    0.000586         117         5           fstat64</span><br><span class="line">  1.59    0.000498         124         4           close</span><br><span class="line">  1.19    0.000373          93         4         3 ioctl</span><br><span class="line">  0.58    0.000181          60         3           brk</span><br><span class="line">  0.46    0.000144         144         1           set_tls</span><br><span class="line">  0.32    0.000099          99         1           write</span><br><span class="line">  0.00    0.000000           0         1           execve</span><br><span class="line">  0.00    0.000000           0         2         2 access</span><br><span class="line">  0.00    0.000000           0         1           gettimeofday</span><br><span class="line">  0.00    0.000000           0         1           uname</span><br><span class="line">  0.00    0.000000           0         1           getuid32</span><br><span class="line">------ ----------- ----------- --------- --------- ----------------</span><br><span class="line">100.00    0.031306                   170       100 total</span><br></pre></td></tr></table></figure>

<p>åˆæˆ–è€…æµ‹è¯•ä¸€ä¸‹memeé©±åŠ¨æ¨¡å—</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># strace echo 123 &gt; /dev/meme</span></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="comment">#æœ€åå‡ è¡Œ</span></span><br><span class="line">close(3)                                = 0</span><br><span class="line">set_tls(0x76fbe4f0)                     = 0</span><br><span class="line">mprotect(0x76ef0000, 8192, PROT_READ)   = 0</span><br><span class="line">mprotect(0x76f12000, 4096, PROT_READ)   = 0</span><br><span class="line">mprotect(0x76f95000, 4096, PROT_READ)   = 0</span><br><span class="line">mprotect(0x533000, 12288, PROT_READ)    = 0</span><br><span class="line">mprotect(0x76fbf000, 4096, PROT_READ)   = 0</span><br><span class="line">getuid32()                              = 0</span><br><span class="line">brk(NULL)                               = 0x537000</span><br><span class="line">brk(0x558000)                           = 0x558000</span><br><span class="line">write(1, <span class="string">&quot;123\n&quot;</span>, 4)                    = 4</span><br><span class="line">exit_group(0)                           = ?</span><br><span class="line">+++ exited with 0 +++</span><br></pre></td></tr></table></figure>

<p>æ€»ä¹‹<code>strace</code>æ˜¯ä¸€ä¸ªéå¸¸ç‰›é€¼çš„è¯Šæ–­å·¥å…·ï¼Œç”±äºæœ¬æ–‡ä¸»è¦é’ˆå¯¹çš„æ˜¯Linuxé©±åŠ¨æ¨¡å—æŠ€æœ¯ï¼Œå…³äºè¿™ä¸ªå‘½ä»¤çš„ä½¿ç”¨è¯¦è§£å°±ä¸èµ˜è¿°äº†ï¼Œè‡ªè¡ŒGoogleã€‚</p>
<h2 id="oopsæ¶ˆæ¯"><a href="#oopsæ¶ˆæ¯" class="headerlink" title="oopsæ¶ˆæ¯"></a>oopsæ¶ˆæ¯</h2><p>oopsä¹Ÿå°±æ˜¯å†…æ ¸ç”©äº†ä¸€è·¤æ‰€å‘å‡ºçš„æƒ¨å«ï¼Œå½“ç„¶å¯¼è‡´å†…æ ¸æ‘”è·¤çš„ç»Šè„šçŸ³å¤§æ¦‚ç‡æ˜¯æˆ‘ä»¬å†™å‡ºäº†è´¨é‡åº•ä¸‹çš„é©±åŠ¨æ¨¡å—å¯¼è‡´ã€‚ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> __init <span class="title">meme_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    *(<span class="keyword">int</span>*)<span class="literal">NULL</span> = <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line">module_init(meme_init)</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ˜¯memeæ¨¡å—åŠ è½½æ—¶çš„åˆå§‹åŒ–ä»£ç ï¼Œä½†æ˜¯æˆ‘ä»¬è¯•å›¾å¾€<code>NULL</code>åœ°å€é‡Œèµ‹å€¼ï¼Œå¾ˆæ˜¾ç„¶è¿™å°†å¼•å‘æ®µé”™è¯¯ï¼Œå¦‚æœç›´æ¥insmodæ¨¡å—ï¼Œä¸å‡ºæ„å¤–å†…æ ¸å°†å‘å‡ºä¸€å£°æƒ¨å«â€”â€”oops!!!</p>
<p>æ¥çœ‹çœ‹æ•ˆæœï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># insmod meme.ko</span></span><br><span class="line"></span><br><span class="line">meme: loading out-of-tree module taints kernel.</span><br><span class="line">Unable to handle kernel NULL pointer dereference at virtual address 00000000</span><br><span class="line">pgd = 7dfd5e30</span><br><span class="line">[00000000] *pgd=00000000</span><br><span class="line">Internal error: Oops: 805 [<span class="comment">#1] SMP ARM</span></span><br><span class="line">Modules linked <span class="keyword">in</span>: meme(O+)</span><br><span class="line">CPU: 0 PID: 832 Comm: insmod Tainted: G           O      5.0.7 <span class="comment">#1</span></span><br><span class="line">Hardware name: ARM-Versatile Express</span><br><span class="line">PC is at meme_init+0x18/0x94 [meme]</span><br><span class="line">LR is at do_one_initcall+0x54/0x1fc</span><br><span class="line">pc : [&lt;7f005018&gt;]    lr : [&lt;80102e70&gt;]    psr: 600f0013</span><br><span class="line">sp : 9ddfbdc0  ip : 9dce1540  fp : 80b08c08</span><br><span class="line">r10: 00000000  r9 : 7f002040  r8 : 7f005000</span><br><span class="line">r7 : 00000000  r6 : ffffe000  r5 : 7f002240  r4 : 00000000</span><br><span class="line">r3 : 0000007b  r2 : 7ed12b89  r1 : 00000000  r0 : 00000000</span><br><span class="line">Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  ISA ARM  Segment none</span><br><span class="line">Control: 10c5387d  Table: 7de00059  DAC: 00000051</span><br><span class="line">Process insmod (pid: 832, stack <span class="built_in">limit</span> = 0x560ea799)</span><br><span class="line">Stack: (0x9ddfbdc0 to 0x9ddfc000)</span><br><span class="line">bdc0: 80b08c08 80b603c0 ffffe000 80102e70 00000000 80136cc8 006000c0 00000000</span><br><span class="line">bde0: 00000000 9ddfbde4 9ddfbde4 7ed12b89 7f002088 a9245000 a9244fff fffff000</span><br><span class="line">be00: 00000000 9dce1700 9dce1700 80b76b90 00000001 9dce1a24 7f002040 7ed12b89</span><br><span class="line">be20: 7f002040 00000001 9dce1a00 9dce14c0 9dce1a24 801a03b8 9dce1a24 80232fc0</span><br><span class="line">be40: 9ddfbf30 9ddfbf30 00000001 9dce1a00 00000001 8019f5c0 7f00204c 00007fff</span><br><span class="line">be60: 7f002040 8019ca04 00000001 7f002088 8019c364 7f002154 7f002170 8094b580</span><br><span class="line">be80: 7f00222c 7f006000 808e1fd8 808e1fe4 808e203c 80b08c08 9dce7600 fffff000</span><br><span class="line">bea0: 80b0b5c4 006002c0 9dce7600 00000043 00000000 00000000 00000000 00000000</span><br><span class="line">bec0: 00000000 00000000 6e72656b 00006c65 00000000 00000000 00000000 00000000</span><br><span class="line">bee0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000</span><br><span class="line">bf00: 00000000 7ed12b89 00000080 00002a94 76d4da9c a9243a94 ffffe000 80b08c08</span><br><span class="line">bf20: 004cb9a7 00000000 00000051 8019fbf8 a92018d2 a9201a40 a9201000 00042a94</span><br><span class="line">bf40: a9243314 a924313c a9234104 00003000 00003180 00000000 00000000 00000000</span><br><span class="line">bf60: 00001d50 0000002d 0000002e 00000014 00000000 00000010 00000000 7ed12b89</span><br><span class="line">bf80: 9e61a600 76ee7404 00042a94 76f0ddc0 00000080 80101204 9ddfa000 00000080</span><br><span class="line">bfa0: 004b78e3 80101000 76ee7404 00042a94 76d0b008 00042a94 004cb9a7 76f0f968</span><br><span class="line">bfc0: 76ee7404 00042a94 76f0ddc0 00000080 00000001 7ec25eac 004cb9a7 004b78e3</span><br><span class="line">bfe0: 7ec25b68 7ec25b58 0042b291 76de3f12 200f0030 76d0b008 00000000 00000000</span><br><span class="line">[&lt;7f005018&gt;] (meme_init [meme]) from [&lt;80102e70&gt;] (do_one_initcall+0x54/0x1fc)</span><br><span class="line">[&lt;80102e70&gt;] (do_one_initcall) from [&lt;801a03b8&gt;] (do_init_module+0x64/0x1f4)</span><br><span class="line">[&lt;801a03b8&gt;] (do_init_module) from [&lt;8019f5c0&gt;] (load_module+0x1ed4/0x23b4)</span><br><span class="line">[&lt;8019f5c0&gt;] (load_module) from [&lt;8019fbf8&gt;] (sys_init_module+0x158/0x18c)</span><br><span class="line">[&lt;8019fbf8&gt;] (sys_init_module) from [&lt;80101000&gt;] (ret_fast_syscall+0x0/0x54)</span><br><span class="line">Exception stack(0x9ddfbfa8 to 0x9ddfbff0)</span><br><span class="line">bfa0:                   76ee7404 00042a94 76d0b008 00042a94 004cb9a7 76f0f968</span><br><span class="line">bfc0: 76ee7404 00042a94 76f0ddc0 00000080 00000001 7ec25eac 004cb9a7 004b78e3</span><br><span class="line">bfe0: 7ec25b68 7ec25b58 0042b291 76de3f12</span><br><span class="line">Code: e3475f00 e3a04000 e3a0307b e1a01004 (e5843000) </span><br><span class="line">---[ end trace c5673f359b9dfbf8 ]---</span><br><span class="line">Segmentation fault</span><br></pre></td></tr></table></figure>

<p>å¤šä¹ˆç†Ÿæ‚‰çš„å‘³é“ï¼Œä¿¡æ¯é‡å¥½å¤§ï¼Œè®©äººçœ¼èŠ±ç¼­ä¹±ã€‚åˆ«ç€æ€¥ï¼Œä¸»è¦ç•™æ„å‡ ä¸ªåœ°æ–¹ï¼š</p>
<ol>
<li><code>Modules linked in: meme(O+)</code>è¯´æ˜å¯¼è‡´oopsçš„æ˜¯memeæ¨¡å—é©±åŠ¨ã€‚</li>
<li><code>PC is at meme_init+0x18/0x94 [meme]</code>è¯´æ˜å¼•å‘oopsçš„å‡½æ•°æ˜¯<code>meme_init</code>ã€‚</li>
<li><code>Exception stack(0x9ddfbfa8 to 0x9ddfbff0)</code>ä»¥åŠä¹‹åçš„Nä¸ªåœ°å€è¡¨ç¤ºå¼‚å¸¸çš„æ ˆåŒºï¼Œè¯»æ‡‚è¿™äº›åœ°å€éœ€è¦æ¯”è¾ƒä¸°å¯Œçš„ç»éªŒï¼Œåˆšå¼€å§‹æ²¡å¿…è¦å¤ªçº ç»“è¿™éƒ¨åˆ†ã€‚</li>
<li><code>Segmentation fault</code>è¡¨ç¤ºé”™è¯¯ç±»å‹æ˜¯æ®µé”™è¯¯</li>
</ol>
<h2 id="ä½¿ç”¨gdbã€kgdbç­‰è°ƒè¯•å™¨"><a href="#ä½¿ç”¨gdbã€kgdbç­‰è°ƒè¯•å™¨" class="headerlink" title="ä½¿ç”¨gdbã€kgdbç­‰è°ƒè¯•å™¨"></a>ä½¿ç”¨gdbã€kgdbç­‰è°ƒè¯•å™¨</h2><p>å…³äºgdbè°ƒè¯•ç¥å™¨å¦‚ä½•åº”ç”¨åˆ°å†…æ ¸æ¨¡å—ï¼Œå°±ä¸è¯¦è¿°äº†ï¼Œå¦‚æœçœŸæƒ³äº†è§£å¯ä»¥å‚è€ƒIBMè¿™ç¯‡<a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/linux/l-kdb/index.html">ã€ŠLinuxç³»ç»Ÿå†…æ ¸çš„è°ƒè¯•ã€‹</a>ã€‚</p>
<p>å…¶å®gdbå¯ä»¥æä¾›è¯¸å¦‚æ–­ç‚¹ã€å˜é‡ç›‘è§†ã€å•æ­¥æ‰§è¡Œç­‰éå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œåœ¨è¿½è¸ªbugçš„æ•ˆç‡æ–¹é¢æ— ç–‘å¯ä»¥ç¢¾å‹ä¸Šè¿°çš„å‡ ç§æ–¹å¼ã€‚ä½†æ˜¯å¯åˆ«å¿˜äº†ï¼Œæˆ‘ä»¬å†™çš„æ˜¯Linuxå†…æ ¸æ¨¡å—ï¼Œè¿™äº›æ–­ç‚¹ã€å•æ­¥æ‰§è¡Œçš„åŠŸèƒ½å…¶å®å¾ˆéš¾åº”ç”¨çš„å†…æ ¸å±‚ï¼Œè€Œä¸”é©±åŠ¨æœ¬è´¨ä¸Šæ˜¯ä¸ºç¡¬ä»¶æœåŠ¡çš„ï¼Œä½ è¦ä»£ç å•æ­¥æ‰§è¡Œå¯ä»¥ï¼Œç¡¬ä»¶é‚£è¾¹å¯æ²¡æœ‰æš‚åœé”®å•Šï¼</p>
<p>æ‰€ä»¥ï¼Œåœ¨Linuxé©±åŠ¨æ¨¡å—çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œgdbè¿™ç§å·¥å…·åè€Œåº”è¯¥å°½é‡é¿å…ï¼</p>
<h2 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h2><ul>
<li><code>printk()</code>æ˜¯æœ€æœ´å®æœ‰æ•ˆçš„è°ƒè¯•æ–¹å¼ï¼ŒLinuxä¸€å…±æä¾›äº†8ä¸ªæ‰“å°çº§åˆ«ï¼Œå¯ä»¥é€šè¿‡<code>echo N &gt; /proc/sys/kernel/printk</code>æ¥é™åˆ¶çº§åˆ«ã€‚</li>
<li>å¯ä»¥é€šè¿‡åˆ›å»º<code>/proc/&lt;entry&gt;</code>å…¥å£æ–‡ä»¶æ¥å‡å°‘å¯¹printkçš„ä¾èµ–</li>
<li><code>seq_file</code>æ˜¯procfså…¥å£æ–‡ä»¶çš„ç‰¹æ®Šå®ç°æ–¹å¼ï¼Œä¸»è¦ç”¨äºçŠ¶æ€ä¿¡æ¯åºå¤§çš„é©±åŠ¨ï¼ŒæŒ‰é¡ºåºè¿­ä»£è¾“å‡ºã€‚</li>
<li><code>strace</code>æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç¨‹åºæ‰§è¡Œè·Ÿè¸ªçš„å‘½ä»¤ã€‚</li>
<li><code>oops</code>æœ¬è´¨ä¸Šæ˜¯å†…æ ¸æŸäº›åœ°æ–¹æ‰§è¡Œå‡ºé”™äº§ç”Ÿçš„æç¤ºä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºå®šä½é—®é¢˜æ ¹æºã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/37/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/37/" class="post-title-link" itemprop="url">é«˜å¼ºåº¦å·¥ä½œä¸ä¼šå¾—åˆ°å›æŠ¥</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-24 07:47:54" itemprop="dateCreated datePublished" datetime="2019-04-24T07:47:54+08:00">2019-04-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/37/" class="post-meta-item leancloud_visitors" data-flag-title="é«˜å¼ºåº¦å·¥ä½œä¸ä¼šå¾—åˆ°å›æŠ¥" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/37/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/37/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_37/">Hard Work Does not Pay Off</a></p>
<p>ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼ŒåŠªåŠ›å·¥ä½œå¾€å¾€å¾—ä¸åˆ°å›æŠ¥ã€‚ä½ å’Œä½ çš„å°‘éƒ¨åˆ†åŒäº‹å§‹ç»ˆç›¸ä¿¡ä½ ä»¬åœ¨åŠå…¬å®¤ä¸ºæŸä¸ªé¡¹ç›®ä»˜å‡ºäº†å¤§é‡çš„æ—¶é—´ã€‚ä½†äº‹å®ä¸Šæ¯”ä½ å·¥ä½œå°‘çš„äººå¯èƒ½å¾—åˆ°çš„æ›´å¤šâ€”â€”æœ‰æ—¶æ˜¯éå¸¸çš„å¤šã€‚å¦‚æœä½ å°è¯•æ¯å‘¨å¼ºåˆ¶é«˜è´Ÿè·å·¥ä½œè¶…è¿‡30å°æ—¶ï¼Œä½ å¾ˆå¯èƒ½å·¥ä½œå¼ºåº¦å¤ªé«˜äº†ã€‚åº”è¯¥è€ƒè™‘å‡å°‘å·¥ä½œé‡ä»¥æé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<p>è¿™ç§è¯´æ³•çœ‹ä¼¼åç›´è§‰ä¸”æœ‰äº‰è®®ï¼Œä½†è¿™æ˜¯å¿…ç„¶çš„ç»“æœï¼Œå› ä¸ºç¨‹åºå’Œè½¯ä»¶å¼€å‘æ˜¯ä¸€ç§éœ€è¦å…¨æƒ…æŠ•å…¥æŒç»­å­¦ä¹ çš„è¿‡ç¨‹ã€‚å½“ä½ åœ¨åšé¡¹ç›®æ—¶ä½ è¦ç†è§£æ›´å¤šé¢†åŸŸæ–¹é¢çš„é—®é¢˜ï¼Œæ‰¾å‡ºæ›´å¤šæœ‰æ•ˆæ–¹æ³•æ¥å®ç°ç›®æ ‡ã€‚ä¸ºäº†é¿å…æ— æ•ˆå·¥ä½œï¼Œä½ å¿…é¡»æµå‡ºæ—¶é—´æ¥è§‚å¯Ÿæ­£åœ¨åšçš„äº‹æƒ…çš„æ•ˆæœï¼Œåæ€æ‰€çœ‹åˆ°çš„äº‹ç‰©ï¼Œå¹¶æ”¹å˜ä½ ç›¸åº”çš„è¡Œä¸ºã€‚</p>
<p>èŒä¸šç¼–ç¨‹å¯ä¸åƒæ˜¯æ‹¼å‘½è·‘å‡ å…¬é‡Œé‚£æ ·ï¼Œåœ¨é“ºå¥½çš„è·‘é“å°½å¤´å¯ä»¥çœ‹åˆ°ç»ˆç‚¹ã€‚æ›´å¤šçš„è½¯ä»¶å·¥ç¨‹æ›´åƒæ˜¯ä¸€åœºé©¬æ‹‰æ¾è¶Šé‡èµ›ã€‚åœ¨é»‘æš—ä¸­ï¼Œåªæœ‰ä¸€ä»½ç²—ç³™çš„åœ°å›¾ä½œä¸ºæŒ‡å¼•ã€‚å¦‚æœä½ åªæ˜¯ä»ä¸€ä¸ªæ–¹å‘å‡ºå‘ï¼Œä½ å¯ä»¥è·‘å¾—å°½å¯èƒ½å¿«ï¼Œä½ å¯èƒ½ä¼šä»¤äººä½©æœï¼Œä½†ä½ ç»ˆç©¶ä¸ä¼šæˆåŠŸã€‚ä½ éœ€è¦ä¿æŒå¯æŒç»­çš„æ­¥ä¼ï¼Œå½“ä½ äº†è§£åˆ°æ›´å¤šä½ çš„ä½ç½®å’Œå‰è¿›æ–¹å‘æ˜¯ï¼Œä½ éœ€è¦è°ƒèŠ‚ä½ çš„èˆªå‘ã€‚</p>
<p>æ­¤å¤–ï¼Œä½ æ€»è¦å­¦ä¹ æ›´å¤šæœ‰å…³è½¯ä»¶å¼€å‘çš„ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ç¼–ç¨‹æŠ€æœ¯ã€‚ä½ å¾ˆå¯èƒ½è¦è¯»ä¹¦ï¼Œå¼€ä¼šï¼Œå’Œä¸“å®¶äº¤æµï¼Œå°è¯•æ–°æŠ€æœ¯çš„å®è·µï¼Œä»¥åŠä»ä½ çš„å·¥ä½œä¸­æŒæ¡å¼ºå¤§çš„å·¥å…·ã€‚ä½œä¸ºä¸€ä¸ªä¸“ä¸šç¨‹åºå‘˜ï¼Œä½ å¿…é¡»ä¿æŒåœ¨è‡ªå·±çš„ä¸“ä¸šé¢†åŸŸè‡ªæˆ‘æ›´æ–°â€”â€”æ­£å¦‚è„‘å¤–ç§‘åŒ»ç”Ÿå’Œé£è¡Œå‘˜åº”è¯¥åœ¨ä»–ä»¬è‡ªå·±çš„é¢†åŸŸä¿æŒæœ€ä½³çŠ¶æ€ä¸€æ ·ã€‚ä½ åº”è¯¥æ‹¿å‡ºå‚æ™šã€å‘¨æœ«ã€å‡æœŸæ¥è‡ªå­¦ï¼Œå› æ­¤ä½ ä¸èƒ½è®©ä½ çš„å‚æ™šã€å‘¨æœ«ã€å’Œå‡æœŸè¢«ä½ é¡¹ç›®ä¸Šçš„å·¥ä½œå ç”¨ã€‚ä½ å¸Œæœ›è®©ä¸€ä¸ªæœ¬å‘¨å·¥ä½œäº†60å°æ—¶çš„è„‘å¤–ç§‘åŒ»ç”Ÿç»™ä½ åšæ‰‹æœ¯å—ï¼Œæˆ–è€…ä¸€å‘¨é£äº†60å°æ—¶çš„é£è¡Œå‘˜ï¼Ÿå½“ç„¶ä¸æƒ³ï¼Œå‡†å¤‡å’Œæ•™è‚²æ˜¯ä»–ä»¬ä¸“ä¸šçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>ä¸“æ³¨äºé¡¹ç›®ï¼Œé€šè¿‡å¯»æ‰¾èªæ˜çš„è§£å†³åŠæ³•æ¥å°½å¯èƒ½å¤šåœ°ä½œå‡ºè´¡çŒ®ï¼Œæé«˜ä½ çš„èƒ½åŠ›ï¼Œåæ€è‡ªå·±æ­£åœ¨åšçš„ï¼Œå¹¶è°ƒæ•´ä½ çš„è¡Œä¸ºæ–¹å¼ã€‚ä¸ºé¿å…è®©è‡ªå·±å’Œæˆ‘ä»¬çš„èŒä¸šæ„Ÿåˆ°å°´å°¬ï¼Œåƒä»“é¼ ä¸€æ ·åœ¨ç¬¼å­é‡Œå¿«é€Ÿè½¬åŠ¨è½®å­ã€‚ä½œä¸ºä¸€ä¸ªèŒä¸šç¨‹åºå‘˜ä½ åº”è¯¥çŸ¥é“å°è¯•ä»¥æ¯å‘¨60å°æ—¶çš„é«˜è´Ÿè·å·¥ä½œå¯ä¸æ˜¯ä¸€ç§æ˜æ™ºçš„åšäº‹æ–¹å¼ã€‚è¯·åƒä¸“ä¸šäººå£«ä¸€æ ·ï¼šåšå‡†å¤‡ã€çœ‹æ•ˆæœã€è§‚å¯Ÿã€åæ€ã€å¹¶æ”¹å˜ï¼</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/books/%E5%A4%A7%E6%B8%85%E7%9B%B8%E5%9B%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/books/%E5%A4%A7%E6%B8%85%E7%9B%B8%E5%9B%BD/" class="post-title-link" itemprop="url">è¯†æ—¶åŠ¡è€…â€”â€”ã€Šå¤§æ¸…ç›¸å›½ã€‹ä¹¦è¯„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-21 20:03:21" itemprop="dateCreated datePublished" datetime="2019-04-21T20:03:21+08:00">2019-04-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">è¯»ä¹¦</span></a>
                </span>
            </span>

          
            <span id="/books/%E5%A4%A7%E6%B8%85%E7%9B%B8%E5%9B%BD/" class="post-meta-item leancloud_visitors" data-flag-title="è¯†æ—¶åŠ¡è€…â€”â€”ã€Šå¤§æ¸…ç›¸å›½ã€‹ä¹¦è¯„" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/books/%E5%A4%A7%E6%B8%85%E7%9B%B8%E5%9B%BD/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/books/%E5%A4%A7%E6%B8%85%E7%9B%B8%E5%9B%BD/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æˆ‘ä¹Ÿä¸è®°å¾—æ˜¯ä»å“ªé‡Œå¬è¯´çš„è¿™æœ¬ä¹¦ï¼Œåªæ˜¯å¤§æ¦‚è®°å¾—è¯´é‡Œé¢çš„ä¸»è§’ä¸ºäººå¤„äº‹å¾ˆå‰å®³ï¼Œè€Œä¸”å‘ç°å›½å®¶é¢†å¯¼äººéƒ½åœ¨æ¨èæ­¤ä¹¦ï¼Œæœ€è¿‘ä¼¼ä¹è¿˜æ‰“ç®—æ‹æˆç”µè§†å‰§ï¼Œæ‰€ä»¥å†³å®šæ‹œè¯»ä¸€ç•ªã€‚</p>
<p>å°è¯´è®²è¿°åº·ç†™å¹´é—´é™ˆå»·æ•¬åœ¨æœå»·ä¸ºå®˜äº”åä½™è½½ï¼ŒæœŸé—´å„ç§æ”¿æ²»åšå¼ˆï¼Œä½ æ¥æˆ‘å¾€ï¼Œé¡·åˆ»é—´ä¾¿å¯æ–­é€èŒä¸šç”Ÿæ¶¯ï¼Œè„‘è¢‹æ¬å®¶çš„â€œæ•…äº‹â€ã€‚è€Œé™ˆå»·æ•¬å¹´å°‘æœ‰æ‰ï¼Œè€ƒå–è¿›å£«ï¼Œæœ¬äººå‡­å€Ÿç­‰ã€ç¨³ã€å¿ã€ç‹ å››ä¸ªå­—ï¼Œä¸€è·¯åœ¨å®˜åœºèµ·èµ·ä¼ä¼çŠ¹å¦‚ç«ä¸­å–æ —ï¼Œå¥½åœ¨ä¸ºäººæ­£ç›´ï¼Œå¤§å…¬æ— ç§ï¼Œç»ˆç©¶æ²¡è¢«å¥¸äººæ‰€å®³ï¼Œæ™šå¹´é¢†çš„åº·ç†™ä¸€å¥â€œå®½å¤§è€åŸï¼Œå‡ è¿‘å®Œäººâ€åï¼Œå› èº«å±…è¦èŒï¼Œçœ‹é€ä»•é€”å‡¶é™©ï¼Œä¾¿ä¸»åŠ¨è£…è‹ï¼Œè¯·è¾ç—…é€€ï¼Œå‘Šè€è¿˜ä¹¡ï¼Œæ–¹æ‰å…¨èº«è€Œé€€ã€‚</p>
<p>ä¹¦ä¸­å¯¹å„ç§äººç‰©çš„å½¢è±¡åˆ»ç”»ï¼Œæƒ…èŠ‚æŠŠæ¡ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯æ¯”è¾ƒå¥½çš„ã€‚å› ä¸ºå°è¯´ä¸»è¦è®²è¿°æœé‡ä¸Šä¸‹å„ç§åšå¼ˆï¼Œæœ‰ç‚¹åƒç”·ç‰ˆã€Šç”„å¬›ä¼ ã€‹(è™½ç„¶æˆ‘æ²¡çœ‹è¿‡)ï¼Œå¾ˆå¤šå†å²æƒ…ç»“å…¶å®æ˜¯ä¸€ç¬”å¸¦è¿‡çš„ã€‚æˆ‘åœ¨è¯»æœ¬ä¹¦ä¹‹å‰å¬åˆ°çš„è¯„ä»·æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥å¯¹æœ¬ä¹¦çš„æœŸå¾…å¾ˆé«˜ï¼Œä½†å°±æˆ‘ä¸ªäººè€Œè¨€å¹¶æ²¡æœ‰å¤ªå¤šå¸ç›çš„åœ°æ–¹ï¼Œä½†ä¹Ÿä¸è‡³äºæ— èŠï¼Œå› ä¸ºæƒ…èŠ‚ç¯ç¯ç›¸æ‰£ï¼Œè¯»èµ·æ¥è¿˜ç®—æœ‰æ„æ€ï¼Œæœ€ç²¾å½©çš„åœ°æ–¹è«è¿‡äºé™ˆå»·æ•¬æœ€åæš—ä¸­è¿ç¯å‚äººï¼Œå¾ˆæ˜¯è¿‡ç˜¾ã€‚</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/books/%E5%A4%A7%E6%B8%85%E7%9B%B8%E5%9B%BD/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/ArmLinuxDriver/chapter4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/ArmLinuxDriver/chapter4/" class="post-title-link" itemprop="url">å››ï¼šå­—ç¬¦è®¾å¤‡</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-18 22:18:03" itemprop="dateCreated datePublished" datetime="2019-04-18T22:18:03+08:00">2019-04-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ARM-Linux%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">ARM-Linuxé©±åŠ¨å¼€å‘</span></a>
                </span>
            </span>

          
            <span id="/ArmLinuxDriver/chapter4/" class="post-meta-item leancloud_visitors" data-flag-title="å››ï¼šå­—ç¬¦è®¾å¤‡" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/ArmLinuxDriver/chapter4/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/ArmLinuxDriver/chapter4/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ç”±äºLinuxä¸­<code>ä¸€åˆ‡çš†æ–‡ä»¶</code>çš„æ€æƒ³ï¼Œå­—ç¬¦è®¾å¤‡(é”®ç›˜/é¼ æ ‡/ä¸²å£)ã€å—è®¾å¤‡(å­˜å‚¨å™¨)ã€ç½‘ç»œè®¾å¤‡(å¥—æ¥å­—)ä½œä¸ºä¸‰ç§ä¸»è¦è®¾å¤‡ç±»å‹ï¼Œæˆ‘ä»¬åœ¨ç”¨æˆ·å±‚åŸºæœ¬å¯ä»¥é€šè¿‡<code>open close read write</code>æ¥å®Œæˆå¯¹è®¾å¤‡çš„ç»å¤§éƒ¨åˆ†æ“ä½œã€‚å…¶ä¸­å­—ç¬¦è®¾å¤‡æ˜¯æ¶µç›–é¢æœ€å¹¿çš„ä¸€ç§ï¼Œè€Œä¸”å…¶æ¦‚å¿µç›¸å¯¹å®¹æ˜“ç†è§£ï¼Œå› æ­¤ä»¥å­—ç¬¦è®¾å¤‡ä¸ºåˆ‡å…¥å£ï¼ŒæŒæ¡å†…æ ¸ä¸ç”¨æˆ·å±‚ä¹‹é—´çš„è°ƒç”¨æœºåˆ¶æ˜¯å†åˆé€‚ä¸è¿‡äº†ã€‚</p>
<p><strong>æœ¬ç« ä¸»è¦å­¦ä¹ </strong>ï¼š</p>
<ul>
<li>å­—ç¬¦è®¾å¤‡é©±åŠ¨çš„åŸºæœ¬æ¦‚å¿µ</li>
<li>å¦‚ä½•å‘å†…æ ¸æ³¨å†Œ/æ³¨é”€ä¸€ä¸ªå­—ç¬¦è®¾å¤‡</li>
<li>å¦‚ä½•é€šè¿‡è®¾å¤‡èŠ‚ç‚¹ã€æ–‡ä»¶APIè°ƒç”¨é©±åŠ¨çš„å‡½æ•°</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯å­—ç¬¦è®¾å¤‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å­—ç¬¦è®¾å¤‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å­—ç¬¦è®¾å¤‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å­—ç¬¦è®¾å¤‡ï¼Ÿ</h2><p>æ‰€è°“å­—ç¬¦è®¾å¤‡ï¼Œæ³›æŒ‡é‚£äº›è¾“å…¥è¾“å‡ºä»¥ä¸²è¡Œæ–¹å¼ã€æŒ‰é¡ºåºã€ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦çš„æ”¶å‘æ•°æ®çš„è®¾å¤‡ã€‚æ¯”å¦‚é”®ç›˜ï¼ŒæŒ‰é”®æ•°æ®æ˜¯ä¸€ä¸ªä¸€ä¸ªå‘ç»™ç³»ç»Ÿçš„ï¼Œå“ªæ€•æ˜¯ç»„åˆé”®ï¼›é¼ æ ‡çš„åæ ‡ï¼›LEDç¯ï¼›ä¸²å£ç»ˆç«¯ç­‰ã€‚è€Œè¿™äº›æ•°æ®å¦‚æœä¸èƒ½åŠæ—¶è¢«ç³»ç»Ÿå¤„ç†ï¼Œè¦ä¹ˆè¢«ç¼“å­˜ï¼Œè¦ä¹ˆç›´æ¥ä¸¢å¼ƒï¼Œä½†ä¸è®ºå¦‚ä½•ï¼Œå½“ç³»ç»Ÿå»å¤„ç†è¿™äº›æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æŒ‰å…ˆæ¥ååˆ°çš„é¡ºåºã€‚</p>
<p>ä½ å¯ä»¥è®¾æƒ³ä»¥ä¸‹ï¼Œä½ çš„ç”µè„‘çªç„¶å¡é¡¿äº†5ç§’é’Ÿï¼Œè€Œè¿™æœŸé—´ä½ ç–¯ç‹‚æ‰“äº†10ä¸ªå­—ï¼Œæ¯«æ— ç–‘é—®è¿™10ä¸ªå­—çš„æ•°æ®è¢«ç¼“å­˜èµ·æ¥äº†ï¼Œç­‰ç³»ç»Ÿç©ºé—²çš„æ—¶å€™å¼€å§‹å¤„ç†å®ƒä»¬ï¼Œç°åœ¨ä½ æ˜¯å¸Œæœ›è¿™10ä¸ªå­—æ˜¯æŒ‰ç…§ä½ æ‰“çš„é¡ºåºå‡ºç°åœ¨å±å¹•å‘¢ï¼Œè¿˜æ˜¯å¸Œæœ›å®ƒä»¬æ¯«æ— ç« æ³•åœ°å‡ºç°åœ¨å±å¹•ã€‚</p>
<p>æ‰€ä»¥ï¼Œå­—ç¬¦è®¾å¤‡ï¼Œå°±æ˜¯æ•°æ®çš„IOæ€»æ˜¯ä»¥è¿ç»­çš„å½¢å¼å¤„ç†çš„è®¾å¤‡ç±»å‹ã€‚</p>
<p>é¡ºå¸¦æä¸€å¥å—è®¾å¤‡ï¼Œä¸å­—ç¬¦è®¾å¤‡æ¦‚å¿µåšä¸ªå¯¹æ¯”ã€‚æ¯”å¦‚ç¡¬ç›˜ï¼šä½ å’Œä½ çš„å³æ‰‹å‡ºå»çº¦ä¼šå¹¶æ‹äº†å¾ˆå¤šç…§ç‰‡å›æ¥ï¼Œç„¶åä½ æŠŠç…§ç‰‡å¯¼å…¥ç”µè„‘ï¼Œè€Œç¡¬ç›˜çš„å­˜å‚¨ç©ºé—´å¹¶ä¸æ˜¯åƒæ°´æ¯ä¸€æ ·ä»ä¸‹å¾€ä¸ŠæŒ‰é¡ºåºå¡«æ»¡ï¼Œè€Œæ˜¯æ ¹æ®æŸç§ç®—æ³•â€œéšæœºâ€å­˜ï¼Œæ‰€ä»¥åœ¨çœŸå®çš„ç¡¬ç›˜ä¸­ï¼Œå­˜æ”¾ä½ 1å·ç…§ç‰‡çš„å­˜å‚¨åŒºåŸŸæ—è¾¹ï¼Œå¹¶ä¸æ˜¯2å·ç…§ç‰‡ï¼Œå¯èƒ½æ˜¯æŸä»½æ—¥è¯­å­¦ä¹ èµ„æ–™ï¼›åŒç†ï¼Œ3å·ç…§ç‰‡å¯èƒ½ä¸å»å¹´ä¸‹è½½çš„ç§å­å‘†åœ¨ä¸€èµ·ã€‚</p>
<h2 id="ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾å¤‡-meme"><a href="#ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾å¤‡-meme" class="headerlink" title="ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾å¤‡ meme"></a>ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾å¤‡ meme</h2><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œè®¾å¤‡ä¸ä¸€å®šè¦çœŸå®å­˜åœ¨ï¼Œè™šæ‹Ÿè®¾å¤‡ä¹Ÿæ˜¯è®¾å¤‡ï¼Œå¯ä»¥é€šè¿‡æ–‡ä»¶å‡½æ•°è¿›è¡Œæ“ä½œã€‚å› æ­¤ä¸ºäº†æŒæ¡å­—ç¬¦è®¾å¤‡çš„çŸ¥è¯†ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªè™šæ‹Ÿå­—ç¬¦è®¾å¤‡ã€‚</p>
<p>memeçš„ä¸­æ–‡æ„æ€æ˜¯ç±³å§†ã€è«å› ï¼Œè¡¨ç¤ºæ–‡åŒ–DNAçš„æ„æ€ï¼Œè€Œä½œä¸ºæˆ‘å­¦ä¹ é©±åŠ¨çš„å®ä¾‹ï¼Œå®ƒå°±æ˜¯â€œè®°äº‹æœ¬â€ï¼Œç”¨æˆ·å¯ä»¥ç”¨å¤šç§æ–¹å¼è¯»å†™å®ƒï¼Œè€Œæˆ‘ç»™è¿™ä¸ªè™šæ‹Ÿè®¾å¤‡å–è¿™ä¹ˆä¸ªåå­—æ²¡åˆ«çš„æ„æ€â€”â€”just for funï¼</p>
<p>å…ˆæ¥çœ‹çœ‹æˆ‘æ‰“ç®—è¦memeå®ç°å“ªäº›å†…å®¹ï¼š</p>
<ol>
<li>å‘å†…æ ¸æ³¨å†Œ/æ³¨é”€è‡ªå·±</li>
<li>æ”¯æŒopen/close/read/writeç­‰æ–‡ä»¶æ“ä½œå‡½æ•°</li>
</ol>
<h3 id="å­—ç¬¦è®¾å¤‡çš„æ³¨å†Œä¸æ³¨é”€"><a href="#å­—ç¬¦è®¾å¤‡çš„æ³¨å†Œä¸æ³¨é”€" class="headerlink" title="å­—ç¬¦è®¾å¤‡çš„æ³¨å†Œä¸æ³¨é”€"></a>å­—ç¬¦è®¾å¤‡çš„æ³¨å†Œä¸æ³¨é”€</h3><p>è¦åƒå†…æ ¸æ³¨å†Œä¸€ä¸ªè®¾å¤‡ï¼Œå¿…é¡»æä¾›å®ƒçš„è®¾å¤‡å·ä½œä¸ºå”¯ä¸€æ ‡ç¤ºï¼Œå­—ç¬¦è®¾å¤‡çš„è®¾å¤‡å·ç”±<strong>ä¸»è®¾å¤‡å·</strong>å’Œ<strong>æ¬¡è®¾å¤‡å·</strong>å…±åŒç»„æˆ</p>
<ul>
<li>ä¸»è®¾å¤‡å·(major)ï¼šè¡¨ç¤ºè®¾å¤‡çš„åˆ†ç±»ç¼–å·ï¼Œæ¯”å¦‚1ä»£è¡¨uç›˜ã€2ä»£è¡¨æ˜¾ç¤ºå™¨ã€3ä»£è¡¨æ‰“å°æœº</li>
<li>æ¬¡è®¾å¤‡å·(minor)ï¼šè¡¨ç¤ºåŒä¸€åˆ†ç±»çš„å®ä¾‹ç¼–å·ï¼Œæ¯”å¦‚1å·uç›˜ã€2å·uç›˜ã€3å·uç›˜</li>
</ul>
<p>Linuxå†…æ ¸å¯ä»¥<strong>é™æ€æ³¨å†Œ</strong>å’Œ<strong>åŠ¨æ€åˆ†é…</strong>çš„æ–¹å¼æ³¨å†Œä¸€ä¸ªè®¾å¤‡å·ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ¨æ€ç”³è¯·ï¼Œç”±å†…æ ¸è‡ªåŠ¨æ‰«æç©ºé—²è®¾å¤‡å·ç»™å®ƒ</span></span><br><span class="line"><span class="comment">// @dev         è®¾å¤‡ç¼–å·</span></span><br><span class="line"><span class="comment">// @firstminor  æ¬¡è®¾å¤‡å·çš„èµ·å§‹ç¼–å·</span></span><br><span class="line"><span class="comment">// @count       è¦ç”³è¯·å¤šå°‘ä¸ªè¿ç»­çš„è®¾å¤‡å·</span></span><br><span class="line"><span class="comment">// @name        è®¾å¤‡åç§°ï¼Œå°†å‡ºç°åœ¨/proc/devicesä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">alloc_chrdev_region</span><span class="params">(<span class="keyword">dev_t</span> *dev, <span class="keyword">unsigned</span> firstminor, <span class="keyword">unsigned</span> count, <span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€æ³¨å†Œï¼Œå¿…é¡»ç¡®ä¿è¯¥è®¾å¤‡å·æ˜¯ç©ºé—²çš„</span></span><br><span class="line"><span class="comment">// @first   è¦æ³¨å†Œçš„èµ·å§‹è®¾å¤‡å·ï¼Œä¸»+æ¬¡</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">register_chrdev_region</span><span class="params">(<span class="keyword">dev_t</span> first, <span class="keyword">unsigned</span> count, <span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</span><br></pre></td></tr></table></figure>

<p>âš ï¸æ³¨æ„âš ï¸ï¼šåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼ºçƒˆå»ºè®®ä»…é€šè¿‡<strong>åŠ¨æ€åˆ†é…</strong>çš„æ–¹å¼æ³¨å†Œè®¾å¤‡ï¼Œå› ä¸ºè¯´ä¸å‡†ä½ è‡ªå·±è§„åˆ’å¥½çš„è®¾å¤‡ç¼–å·ä¼šåœ¨æœªæ¥è¢«Linuxå†…æ ¸ç»™å ç”¨äº†ã€‚</p>
<p>å­—ç¬¦è®¾å¤‡çš„æ³¨å†Œå¤§ä½“åˆ†ä¸¤æ­¥ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ä¸€ä¸ª<code>cdev</code>å­—ç¬¦è®¾å¤‡çš„æ•°æ®ç»“æ„ï¼Œå‘å†…æ ¸è¯´æ˜è‡ªå·±æ˜¯å­—ç¬¦è®¾å¤‡</li>
<li>åˆ†é…ä¸€ä¸ªè®¾å¤‡å·ä¸cdevç»‘å®šèµ·æ¥</li>
</ol>
<p>ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæœ€çº¯ç²¹çš„å­—ç¬¦è®¾å¤‡æ³¨å†Œå’Œæ³¨é”€çš„å®ç°ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/init.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/cdev.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦è®¾å¤‡ç»“æ„ä½“ï¼Œè¯¥å­—ç¬¦è®¾å¤‡çš„æ ¸å¿ƒæ•°æ®è¡¨ç¤º</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">cdev</span> <span class="title">cdev</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é©±åŠ¨çš„ä¸»è®¾å¤‡ç¼–å·ï¼Œæ¯ç§ç±»å‹çš„è®¾å¤‡éƒ½æœ‰å”¯ä¸€ç¼–å·</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">dev_t</span> devno = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡å—åŠ è½½å‡½æ•°ï¼šæ³¨å†Œå­—ç¬¦è®¾å¤‡</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> __init <span class="title">meme_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1. å‘å†…æ ¸ç”³è¯·åˆ†é…ä¸€ä¸ªä¸»è®¾å¤‡å·ï¼Œæ­¤è®¾å¤‡å·ä»0å¼€å§‹ï¼Œåˆ†é…1ä¸ªï¼Œåç§°ä¸ºmeme</span></span><br><span class="line">    <span class="keyword">if</span> (alloc_chrdev_region(&amp;devno, <span class="number">0</span>, <span class="number">1</span>, <span class="string">&quot;meme&quot;</span>) &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">        printk(KERN_ERR<span class="string">&quot;init fail\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> (<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. åˆå§‹åŒ–cdevç»“æ„ä½“ï¼Œå¹¶ä¸fopsæ–‡ä»¶æ“ä½œä¹‹é—´å»ºç«‹è”ç³»</span></span><br><span class="line">    cdev_init(&amp;cdev, &amp;fops);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. æ­£å¼å‘å†…æ ¸æ³¨å†Œä¸€ä¸ªå­—ç¬¦è®¾å¤‡</span></span><br><span class="line">    cdev_add(&amp;cdev, devno, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å†ŒæˆåŠŸåæ‰“å°å‡ºè¯¥è®¾å¤‡çš„ä¸»ã€æ¬¡è®¾å¤‡å·</span></span><br><span class="line">    printk(KERN_ALERT<span class="string">&quot;meme init: %d:%d\n&quot;</span>, MAJOR(devno), MINOR(devno));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">module_init(meme_init);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡å—å¸è½½å‡½æ•°ï¼šæ³¨é”€å­—ç¬¦è®¾å¤‡</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> __exit <span class="title">meme_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1. å‘å†…æ ¸æ³¨é”€è¯¥å­—ç¬¦è®¾å¤‡</span></span><br><span class="line">    cdev_del(&amp;cdev);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. å‘å†…æ ¸ç”³è¯·é‡Šæ”¾è¯¥è®¾å¤‡å·</span></span><br><span class="line">    unregister_chrdev_region(devno, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    printk(<span class="string">&quot;meme free\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">module_exit(meme_exit);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‚ä¸ƒæ‚å…«çš„ä¸œè¥¿</span></span><br><span class="line">MODULE_LICENSE(<span class="string">&quot;GPL v2&quot;</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">&quot;Philon&quot;</span>);</span><br><span class="line">MODULE_DESCRIPTION(<span class="string">&quot;A character device driver&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå­—ç¬¦è®¾å¤‡çš„æ³¨å†Œ/æ³¨é”€ä¸€èˆ¬æ˜¯åœ¨æ¨¡å—çš„åŠ è½½å’Œå¸è½½å‡½æ•°ä¸­å®ç°çš„ï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸ç®€å•ï¼š<br>ç”³è¯·è®¾å¤‡å· â€“&gt; åˆå§‹åŒ–å­—ç¬¦è®¾å¤‡ â€“&gt; å†…æ ¸æ·»åŠ å­—ç¬¦è®¾å¤‡ â€“&gt; å†…æ ¸åˆ é™¤å­—ç¬¦è®¾å¤‡ â€“&gt; é‡Šæ”¾è®¾å¤‡å·</p>
<p>å…³äº<code>cdev_init / cdev_add / cdev_del</code>ç­‰å‡½æ•°æ²¡æœ‰å±•å¼€è¯´æ˜æ˜¯å› ä¸ºåç»­æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œä¸è¦æ‹˜æ³¥äºæ­¤ã€‚ä¸è¿‡æ³¨æ„<code>cdev_init(&amp;cdev, &amp;fops)</code>è¿™è¡Œï¼Œfopsæ˜¯æ¥ä¸‹æ¥è¦å­¦ä¹ çš„ä¸€ä¸ªéå¸¸é‡è¦çš„æ•°æ®ç»“æ„â€”â€”<strong>æ–‡ä»¶æ“ä½œ</strong>ã€‚</p>
<h2 id="å­—ç¬¦è®¾å¤‡çš„æ–‡ä»¶æ“ä½œ"><a href="#å­—ç¬¦è®¾å¤‡çš„æ–‡ä»¶æ“ä½œ" class="headerlink" title="å­—ç¬¦è®¾å¤‡çš„æ–‡ä»¶æ“ä½œ"></a>å­—ç¬¦è®¾å¤‡çš„æ–‡ä»¶æ“ä½œ</h2><p>å› ä¸ºLinuxçš„ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œç†è®ºä¸Šåœ¨ç”¨æˆ·å±‚ä»»ä½•è®¾å¤‡éƒ½å¯ä»¥é€šè¿‡æ–‡ä»¶ç›¸å…³çš„APIå‡½æ•°è°ƒç”¨è®¾å¤‡ï¼Œè€Œä½œä¸ºè®¾å¤‡é©±åŠ¨æœ¬èº«ï¼Œå¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†å·¥ä½œå°±æ˜¯æŠŠç”¨æˆ·å±‚çš„å„ç§æ–‡ä»¶æ“ä½œå…³è”åˆ°å„ç§é©±åŠ¨å‡½æ•°å½“ä¸­ï¼Œè€Œè¿™ç¦»ä¸å¼€ä¸€ä¸ªç»“æ„ä½“<code>struct file_operations</code>ï¼Œå…ˆæ¥çœ‹çœ‹å†…æ ¸å¯¹å…¶å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">file_operations</span> &#123;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">module</span> *<span class="title">owner</span>;</span></span><br><span class="line">        <span class="keyword">loff_t</span> (*llseek) (struct file *, <span class="keyword">loff_t</span>, <span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">ssize_t</span> (*read) (struct file *, <span class="keyword">char</span> __user *, <span class="keyword">size_t</span>, <span class="keyword">loff_t</span> *);</span><br><span class="line">        <span class="keyword">ssize_t</span> (*write) (struct file *, <span class="keyword">const</span> <span class="keyword">char</span> __user *, <span class="keyword">size_t</span>, <span class="keyword">loff_t</span> *);</span><br><span class="line">        <span class="keyword">ssize_t</span> (*read_iter) (struct kiocb *, struct iov_iter *);</span><br><span class="line">        <span class="keyword">ssize_t</span> (*write_iter) (struct kiocb *, struct iov_iter *);</span><br><span class="line">        <span class="keyword">int</span> (*iterate) (struct file *, struct dir_context *);</span><br><span class="line">        <span class="keyword">int</span> (*iterate_shared) (struct file *, struct dir_context *);</span><br><span class="line">        <span class="keyword">__poll_t</span> (*poll) (struct file *, struct poll_table_struct *);</span><br><span class="line">        <span class="keyword">long</span> (*unlocked_ioctl) (struct file *, <span class="keyword">unsigned</span> <span class="keyword">int</span>, <span class="keyword">unsigned</span> <span class="keyword">long</span>);</span><br><span class="line">        <span class="keyword">long</span> (*compat_ioctl) (struct file *, <span class="keyword">unsigned</span> <span class="keyword">int</span>, <span class="keyword">unsigned</span> <span class="keyword">long</span>);</span><br><span class="line">        <span class="keyword">int</span> (*mmap) (struct file *, struct vm_area_struct *);</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">long</span> mmap_supported_flags;</span><br><span class="line">        <span class="keyword">int</span> (*open) (struct inode *, struct file *);</span><br><span class="line">        <span class="keyword">int</span> (*flush) (struct file *, <span class="keyword">fl_owner_t</span> id);</span><br><span class="line">        <span class="keyword">int</span> (*release) (struct inode *, struct file *);</span><br><span class="line">        <span class="keyword">int</span> (*fsync) (struct file *, <span class="keyword">loff_t</span>, <span class="keyword">loff_t</span>, <span class="keyword">int</span> datasync);</span><br><span class="line">        <span class="keyword">int</span> (*fasync) (<span class="keyword">int</span>, struct file *, <span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">int</span> (*lock) (struct file *, <span class="keyword">int</span>, struct file_lock *);</span><br><span class="line">        <span class="keyword">ssize_t</span> (*sendpage) (struct file *, struct page *, <span class="keyword">int</span>, <span class="keyword">size_t</span>, <span class="keyword">loff_t</span> *, <span class="keyword">int</span>);</span><br><span class="line">        <span class="function"><span class="keyword">unsigned</span> <span class="title">long</span> <span class="params">(*get_unmapped_area)</span><span class="params">(struct file *, <span class="keyword">unsigned</span> <span class="keyword">long</span>, <span class="keyword">unsigned</span> <span class="keyword">long</span>, <span class="keyword">unsigned</span> <span class="keyword">long</span>, <span class="keyword">unsigned</span> <span class="keyword">long</span>)</span></span>;</span><br><span class="line">        <span class="keyword">int</span> (*check_flags)(<span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">int</span> (*flock) (struct file *, <span class="keyword">int</span>, struct file_lock *);</span><br><span class="line">        <span class="keyword">ssize_t</span> (*splice_write)(struct pipe_inode_info *, struct file *, <span class="keyword">loff_t</span> *, <span class="keyword">size_t</span>, <span class="keyword">unsigned</span> <span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">ssize_t</span> (*splice_read)(struct file *, <span class="keyword">loff_t</span> *, struct pipe_inode_info *, <span class="keyword">size_t</span>, <span class="keyword">unsigned</span> <span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">int</span> (*setlease)(struct file *, <span class="keyword">long</span>, struct file_lock **, <span class="keyword">void</span> **);</span><br><span class="line">        <span class="keyword">long</span> (*fallocate)(struct file *file, <span class="keyword">int</span> mode, <span class="keyword">loff_t</span> offset,</span><br><span class="line">                          <span class="keyword">loff_t</span> len);</span><br><span class="line">        <span class="keyword">void</span> (*show_fdinfo)(struct seq_file *m, struct file *f);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CONFIG_MMU</span></span><br><span class="line">        <span class="keyword">unsigned</span> (*mmap_capabilities)(struct file *);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">        <span class="keyword">ssize_t</span> (*copy_file_range)(struct file *, <span class="keyword">loff_t</span>, struct file *,</span><br><span class="line">                        <span class="keyword">loff_t</span>, <span class="keyword">size_t</span>, <span class="keyword">unsigned</span> <span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">loff_t</span> (*remap_file_range)(struct file *file_in, <span class="keyword">loff_t</span> pos_in,</span><br><span class="line">                                   struct file *file_out, <span class="keyword">loff_t</span> pos_out,</span><br><span class="line">                                   <span class="keyword">loff_t</span> len, <span class="keyword">unsigned</span> <span class="keyword">int</span> remap_flags);</span><br><span class="line">        <span class="keyword">int</span> (*fadvise)(struct file *, <span class="keyword">loff_t</span>, <span class="keyword">loff_t</span>, <span class="keyword">int</span>);</span><br><span class="line">&#125; __randomize_layout;</span><br></pre></td></tr></table></figure>

<p>ä¹ä¸€çœ‹ï¼Œå¾ˆå¤æ‚ï¼å…¶å®ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´å¯ä»¥ç®€å•ç†è§£ä¸ºâ€”â€”<strong>file_operationså°±æ˜¯ä¸€ä¸ªéœ€è¦ç»§æ‰¿å®ç°çš„interface</strong>ã€‚å› æ­¤ä¸è¦å»çº ç»“é‡Œé¢çš„å†…å®¹æœ‰å¤šå°‘ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬éƒ½æ˜¯æ ¹æ®éœ€è¦å»å®ç°å…¶ä¸­çš„éƒ¨åˆ†å‡½æ•°å³å¯ï¼Œç­‰å…·ä½“å®ç°çš„æ—¶å€™å†æ¥å‚è€ƒå¯¹åº”å‡½æ•°åœ¨å…¶ä¸­çš„å£°æ˜å½¢å¼ã€‚(é€šè¿‡è¯¥ç»“æ„ä½“æ‰“é€šäº†å†…æ ¸ä¸åº”ç”¨é—´çš„ä»»ç£äºŒè„‰)</p>
<h3 id="ä¸ºç”¨æˆ·å±‚å®ç°open-closeå’Œread-write"><a href="#ä¸ºç”¨æˆ·å±‚å®ç°open-closeå’Œread-write" class="headerlink" title="ä¸ºç”¨æˆ·å±‚å®ç°open/closeå’Œread/write"></a>ä¸ºç”¨æˆ·å±‚å®ç°open/closeå’Œread/write</h3><ul>
<li>openå’Œcloseä¸€èˆ¬éƒ½æ˜¯å¤„ç†ä¸€äº›è®¾å¤‡å¤ä½çš„å·¥ä½œ(æˆ–è€…å¹²è„†ä¸åšä»»ä½•å¤„ç†)ï¼Œä½†å¦‚æœæœ‰é€»è¾‘è¦æ”¾åœ¨open/closeé‡Œæ‰§è¡Œï¼ŒåŠ¡å¿…ç•™æ„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šé‡å¤å¤šæ¬¡æ‰“å¼€/å…³é—­åŒä¸€ä¸ªæ–‡ä»¶çš„æƒ…å†µã€‚</li>
<li>read/writeåœ¨å†…æ ¸ä¸­ä¸»è¦å›´ç»•<code>copy_to_user</code>å’Œ<code>copy_from_user</code>ä¸¤ä¸ªå‡½æ•°æ¥å¤„ç†ï¼Œå®ƒä»¬è´Ÿè´£æŠŠâ€œäº¤æ¢â€ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸æ¨¡å—çš„æ•°æ®ï¼Œä½†è¦ç‰¹åˆ«å°å¿ƒ<strong>æ–‡ä»¶åç§»ï¼Œä¸æ˜¯æ‰€æœ‰è®¾å¤‡åœ¨è¯»å†™çš„æ—¶å€™éƒ½éœ€è¦åç§»çš„</strong>ï¼æ¯”å¦‚è¯»å–LEDç¯çš„çŠ¶æ€ï¼Œæ¯æ¬¡éƒ½åº”è¯¥ä»å¤´å¼€å§‹è¯»ã€‚</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹åº”ç”¨æˆ·å±‚readè¯»å–å‡½æ•°ï¼Œé€šå¸¸ç”¨æˆ·æ¥æ”¶è®¾å¤‡å†…å®¹ï¼Œå¦‚ä¸²å£æ”¶æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">ssize_t</span> <span class="title">meme_read</span><span class="params">(struct file* filp, <span class="keyword">char</span> __user *buf, <span class="keyword">size_t</span> size, <span class="keyword">loff_t</span>* off)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰æ–‡ä»¶åç§»é‡å·²ç»è¶…å‡ºå†…å­˜å¤§å°ï¼Œç›´æ¥è¿”å›é”™è¯¯</span></span><br><span class="line">    <span class="keyword">if</span> (*off &gt;= meme.size) &#123;</span><br><span class="line">        <span class="keyword">return</span> -ENOMEM;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰å¯è®¿é—®å†…å­˜é•¿åº¦å°äºè¦è¯»å–çš„é•¿åº¦ï¼Œä»…è¯»å–å¯è®¿é—®é•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> ((*off + size) &gt; meme.size) &#123;</span><br><span class="line">        size = meme.size - *off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‹·è´å†…æ ¸æ•°æ®åˆ°ç”¨æˆ·ç©ºé—´</span></span><br><span class="line">    <span class="keyword">if</span> (copy_to_user(buf, filp-&gt;private_data + *off, size)) &#123;</span><br><span class="line">        <span class="keyword">return</span> -EFAULT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åç§»ç›¸åº”çš„è¯»å–é•¿åº¦</span></span><br><span class="line">    *off += size;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹åº”ç”¨æˆ·å±‚writeå†™å…¥å‡½æ•°ï¼Œé€šå¸¸ç”¨äºå†™å…¥è®¾å¤‡å†…å®¹ï¼Œå¦‚ä¸²å£å‘æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">ssize_t</span> <span class="title">meme_write</span><span class="params">(struct file* filp, <span class="keyword">const</span> <span class="keyword">char</span> __user *buf, <span class="keyword">size_t</span> size, <span class="keyword">loff_t</span>* off)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ–‡ä»¶åç§»è¶…å‡ºå†…å­˜é•¿åº¦ï¼Œå°±æ²¡å¿…è¦å†å†™äº†</span></span><br><span class="line">    <span class="keyword">if</span> (*off &gt;= meme.size) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœè¦å†™å…¥çš„æ•°æ®é•¿åº¦æ¯”å‰©ä½™å¯è®¿é—®çš„å†…å­˜é•¿åº¦è¿˜è¦å¤§ï¼Œä»…å†™å…¥å¯è®¿é—®çš„å†…å­˜é•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (*off + size &gt; meme.size) &#123;</span><br><span class="line">        size = meme.size - *off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‹·è´ç”¨æˆ·æ•°æ®åˆ°å†…æ ¸ç©ºé—´</span></span><br><span class="line">    <span class="keyword">if</span> (copy_from_user(filp-&gt;private_data + *off, buf, size)) &#123;</span><br><span class="line">        <span class="keyword">return</span> -EFAULT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åç§»ç›¸åº”çš„å†™å…¥å‡½æ•°</span></span><br><span class="line">    *off += size;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹åº”ç”¨æˆ·å±‚openæ‰“å¼€å‡½æ•°ï¼Œå°±æ˜¯æ‰“å¼€è®¾å¤‡æè¿°ç¬¦</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meme_open</span><span class="params">(struct inode* inode, struct file* filp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®è®¾å¤‡èŠ‚ç‚¹ï¼Œåˆ†é…å†…å­˜</span></span><br><span class="line">    <span class="keyword">if</span> (meme.data == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        meme.data = kmalloc(MEME_DEFAULT_DATA_SIZE, GFP_KERNEL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    filp-&gt;private_data = meme.data;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹åº”ç”¨æˆ·å±‚closeå…³é—­å‡½æ•°ï¼Œå°±æ˜¯å…³é—­è®¾å¤‡æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meme_close</span><span class="params">(struct inode* inode, struct file* filp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// nothing todo</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶æ“ä½œç»“æ„ä½“ï¼Œè¡¨ç¤ºå†…æ ¸æ¨¡å—ä¸ç”¨æˆ·å±‚çš„å‡½æ•°å¯¹åº”å…³ç³»</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">file_operations</span> <span class="title">fops</span> =</span> &#123;</span><br><span class="line">    .owner = THIS_MODULE, <span class="comment">// è¿™å…¶å®æ˜¯ä¸ªç»“æ„ä½“ï¼Œæ¯”å¦‚THIS_MODULE-&gt;name</span></span><br><span class="line">    .read = meme_read,</span><br><span class="line">    .write = meme_write,</span><br><span class="line">    .open = meme_open,</span><br><span class="line">    .release = meme_close,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä»£ç å¾ˆç®€å•ï¼Œè¯¥è¯´çš„æ³¨é‡Šéƒ½å·²ç»è¯´äº†ï¼Œé™¤äº†file_operationsé‡Œçš„è¿™å¥ï¼š<code>.owner = THIS_MODULE</code>ã€‚é¦–å…ˆè¦ç›´åˆ°THIS_MODULEæ˜¯ä¸€ä¸ªç»“æ„ä½“å®šä¹‰ï¼Œä¹‹æ‰€ä»¥æŠŠå®ƒæŒ‡å‘owner(æ¨¡å—è‡ªèº«)æ˜¯ä¸ºäº†é˜²æ­¢æ¨¡å—æ­£åœ¨è¿›è¡Œå…¶ä»–æ“ä½œ(å¦‚è¯»å†™)æ—¶ï¼Œè¢«rmmodå¸è½½ã€‚æ¯ä¸ªä»¥æ¨¡å—å½¢å¼å­˜åœ¨çš„é©±åŠ¨ï¼Œæœ€å¥½éƒ½æŠŠè¿™å¥åŠ ä¸Šï¼</p>
<h2 id="è®¾å¤‡èŠ‚ç‚¹ä¸æ“ä½œ"><a href="#è®¾å¤‡èŠ‚ç‚¹ä¸æ“ä½œ" class="headerlink" title="è®¾å¤‡èŠ‚ç‚¹ä¸æ“ä½œ"></a>è®¾å¤‡èŠ‚ç‚¹ä¸æ“ä½œ</h2><p>è®¾å¤‡èŠ‚ç‚¹æ˜¯æ˜¯ç”¨æˆ·å±‚ä¸å†…æ ¸æ¨¡å—æ²Ÿé€šçš„æ¡¥æ¢ï¼</p>
<p>ä½œä¸ºåˆå­¦è€…çš„æˆ‘æ›¾ä¸€åº¦è®¤ä¸º/devç›®å½•ä¸‹çš„èŠ‚ç‚¹å°±æ˜¯è®¾å¤‡æœ¬èº«ï¼Œæ˜¾ç„¶è¿™ç§çœ‹æ³•å¾ˆå¹¼ç¨šï¼Œå†…æ ¸çœŸæ­£æŠŠè®¾å¤‡å’Œé©±åŠ¨æš´éœ²åœ¨/procå’Œ/sysç›®å½•(å†è¯´ä¸€éï¼Œå…¶å®æ˜¯æ–‡ä»¶ç³»ç»Ÿï¼ï¼)è€Œè®¾å¤‡èŠ‚ç‚¹æ˜¯åœ¨ç”¨æˆ·å±‚åˆ›å»ºçš„ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼Œå®ƒçš„åˆ›å»ºå’Œåˆ é™¤å‡ ä¹ä¸å½±å“å†…æ ¸å¯¹è®¾å¤‡æœ¬èº«çš„ç®¡ç†ã€‚</p>
<p>è®¾å¤‡èŠ‚ç‚¹çš„åˆ›å»ºå‘½ä»¤ä¸ºï¼š<code>mknod &lt;node_name&gt; &lt;type&gt; &lt;major&gt; &lt;minor&gt;</code></p>
<p>æŠŠmemeç¼–è¯‘å¥½ä¹‹åå®é™…æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†é©±åŠ¨æ¨¡å—æ‹·è´åˆ°é•œåƒ</span></span><br><span class="line">$ <span class="built_in">cd</span> ~/varm/os/</span><br><span class="line">$ sudo mount -o loop rootfs.ext3 /mnt</span><br><span class="line">$ sudo cp ../drivers/meme/meme.ko /mnt</span><br><span class="line">$ sudo umount /mnt</span><br><span class="line">$ ./power_on.sh <span class="comment"># å¯åŠ¨varmç³»ç»Ÿ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯qemuè™šæ‹Ÿæœºå†…æ“ä½œ</span></span><br><span class="line">/$ insmod meme.ko </span><br><span class="line">meme: loading out-of-tree module taints kernel.</span><br><span class="line">meme init: 250:0 <span class="comment"># ğŸ‘ˆå­—ç¬¦è®¾å¤‡æ³¨å†ŒæˆåŠŸï¼Œä¸»è®¾å¤‡å·250ï¼Œæ¬¡è®¾å¤‡å·0</span></span><br><span class="line"></span><br><span class="line">/$ cat /proc/devices</span><br><span class="line">Character devices:</span><br><span class="line">  1 mem</span><br><span class="line">  2 pty</span><br><span class="line">  ...</span><br><span class="line">250 meme <span class="comment"># ğŸ‘ˆé€šè¿‡/proc/devicesä¹Ÿå¯ä»¥çœ‹åˆ°æ¨¡å—ä¿¡æ¯</span></span><br><span class="line">251 rpmb</span><br><span class="line">252 usbmon</span><br><span class="line">253 rtc</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ï¼Œæ ¹æ®è®¾å¤‡å·</span></span><br><span class="line">/$ mknod /dev/meme c 250 0</span><br><span class="line"><span class="comment"># ç”¨echoå‘½ä»¤å†™å†…å®¹åˆ°è®¾å¤‡èŠ‚ç‚¹</span></span><br><span class="line">/$ <span class="built_in">echo</span> <span class="string">&quot;I am Philon, I want to be a creator!&quot;</span> &gt;&gt; /dev/meme </span><br><span class="line"><span class="comment"># ç”¨catå‘½ä»¤ä»è®¾å¤‡èŠ‚ç‚¹è¯»å†…å®¹</span></span><br><span class="line">/$ cat /dev/meme </span><br><span class="line">I am Philon, I want to be a creator! <span class="comment"># ğŸ‘ˆè¯´æ˜è¯»å†™ã€å¼€å…³å‡½æ•°éƒ½æˆåŠŸäº†</span></span><br><span class="line">4 	(?U</span><br><span class="line">           ?U</span><br><span class="line">             ?U</span><br><span class="line">             444  TT?i????~,?~f??</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„æ“ä½œä¸­å¯ä»¥çœ‹åˆ°ï¼Œmemeé©±åŠ¨çš„åŸºæœ¬æ–‡ä»¶æ“ä½œåŠŸèƒ½å·²ç»å…·å¤‡ï¼Œä¹‹æ‰€ä»¥æœ€åè¯»å‡ºæ¥çš„å†…å®¹æœ‰ä¹±ç ï¼Œæ˜¯å› ä¸ºè¿™æ˜¯ä¸€ä¸ªè®¾å¤‡ï¼Œä¸æ˜¯æ™®é€šæ–‡ä»¶ï¼Œè¯¥è®¾å¤‡å¼ºåˆ¶æœ‰<code>0x100</code>çš„å­˜å‚¨ç©ºé—´ï¼Œæ¯æ¬¡éƒ½ä¼šè¢«å…¨éƒ¨è¯»å‡ºæ¥ã€‚</p>
<h2 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h2><ul>
<li>å­—ç¬¦è®¾å¤‡æ˜¯ä¸€ç§é€šè¿‡é¡ºåºè¯»å†™æ¥æ“ä½œçš„è®¾å¤‡</li>
<li>ä¸»è®¾å¤‡å·è¡¨ç¤ºè®¾å¤‡ç±»å‹ï¼Œæ¬¡è®¾å¤‡å·è¡¨ç¤ºè®¾å¤‡å®ä¾‹å·</li>
<li>file_operationså®šä¹‰äº†æ–‡ä»¶æ“ä½œå‡½æ•°çš„æ¥å£</li>
<li>è®¾å¤‡èŠ‚ç‚¹æ˜¯åœ¨ç”¨æˆ·å±‚åˆ›å»ºçš„ç‰¹æ®Šæ–‡ä»¶</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/36/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/36/" class="post-title-link" itemprop="url">å¤§å¸ˆç¥è¯</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-08 08:21:46" itemprop="dateCreated datePublished" datetime="2019-04-08T08:21:46+08:00">2019-04-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/36/" class="post-meta-item leancloud_visitors" data-flag-title="å¤§å¸ˆç¥è¯" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/36/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/36/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_36/">The Guru Myth</a></p>
<p>ä»»ä½•åœ¨è½¯ä»¶é¢†åŸŸå·¥ä½œæ—¶é—´é•¿çš„äººéƒ½ä¼šå¬è¿‡è¿™æ ·çš„é—®é¢˜ï¼š</p>
<blockquote>
<p>æˆ‘ç¢°åˆ°ä¸€ä¸ªXYZå¼‚å¸¸ï¼Œä½ çŸ¥é“è¿™æ˜¯ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p>
</blockquote>
<p>è¿™äº›æé—®å¾ˆå°‘ä¼šåŒ…å«å †æ ˆè·Ÿè¸ªã€é”™è¯¯æ—¥å¿—ã€æˆ–ä»»ä½•å…³äºé—®é¢˜çš„ä¸Šä¸‹æ–‡ã€‚ä»–ä»¬ä¼¼ä¹è®¤ä¸ºä½ æ˜¯åœ¨ä¸åŒçš„å¹³é¢ä¸Šæ“ä½œï¼Œå³ä¾¿ä¸åŸºäºè¯æ®çš„åˆ†æï¼Œä¹Ÿèƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚ä»–ä»¬è®¤ä¸ºä½ æ˜¯å¤§å¸ˆã€‚</p>
<p>æˆ‘ä»¬æœŸå¾…é‚£äº›å¯¹è½¯ä»¶é™Œç”Ÿçš„äººæå‡ºè¿™æ ·çš„é—®é¢˜ï¼šå¯¹ä»–ä»¬è€Œè¨€ï¼Œç³»ç»Ÿçœ‹ä¸Šå»æ˜¯æœ‰é­”åŠ›çš„ã€‚ä½†è®©æˆ‘æ‹…å¿ƒçš„æ˜¯åœ¨è½¯ä»¶è®ºå›é‡Œä¹Ÿçœ‹åˆ°è¿™ç§è¯ã€‚ç±»ä¼¼çš„é—®é¢˜åœ¨ç¨‹åºè®¾è®¡ç‰ˆå—ä¸­å‡ºç°ï¼Œä¾‹å¦‚â€œæˆ‘æ­£åœ¨æ„å»ºåº“å­˜ç®¡ç†ã€‚æˆ‘æ˜¯å¦è¦ç”¨<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%B9%90%E8%A7%82%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6">ä¹è§‚é”</a>ï¼Ÿâ€è®½åˆºæ˜¯çš„ï¼Œæé—®äººå¾€å¾€æ¯”å›ç­”è€…èƒ½æ›´å¥½çš„è§£ç­”è¿™ä¸ªé—®é¢˜ã€‚æé—®è€…è‚¯å®šçŸ¥é“ä¸Šä¸‹æ–‡ã€å¿…å¤‡æ¡ä»¶ï¼Œå¹¶èƒ½è¯»åˆ°æœ‰åˆ©å’Œä¸åˆ©çš„ä¸åŒç­–ç•¥ã€‚ä½†ä»–ä»¬å·²ç»å¯„å¸Œæœ›äºä½ ï¼Œåœ¨ä¸è¦ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹ç»™äºˆä»–ä»¬æ™ºæ…§çš„ç­”æ¡ˆã€‚ä»–ä»¬æƒ³è¦çš„æ˜¯é­”æ³•ã€‚</p>
<p>æ˜¯æ—¶å€™ä¸ºäº†è½¯ä»¶è¡Œä¸šé©±æ•£è¿™ç§å¤§å¸ˆç¥è¯äº†ã€‚â€œå¤§å¸ˆâ€æ˜¯äººã€‚ä»–ä»¬åƒæˆ‘ä»¬ä¸€æ ·æ˜¯é€šè¿‡é€»è¾‘å’Œç³»ç»Ÿæ€§åœ°åˆ†æé—®é¢˜ã€‚ä»–ä»¬ä¹Ÿåˆ©ç”¨å¿ƒé‡Œçš„æ·å¾„å’Œç›´è§‰ã€‚å›é¡¾ä¸€ä¸‹ä½ è§è¿‡çš„æœ€ä¼˜ç§€çš„ç¨‹åºå‘˜ï¼šå¯èƒ½åœ¨æŸä¸€ç‚¹ä¸Šï¼Œä»–çŸ¥é“çš„æ¯”ä½ ç°åœ¨åšçš„è¿˜å°‘ã€‚å¦‚æœä¸€ä¸ªäººçœ‹èµ·æ¥åƒå¤§å¸ˆï¼Œé‚£æ˜¯ä»–å¤šå¹´çš„å­¦ä¹ å’Œå®Œå–„æ€ç»´çš„è¿‡ç¨‹ã€‚ä¸€ä¸ªâ€œå¤§å¸ˆâ€åªæ˜¯ä¸€ä¸ªæœ‰ç€æ— ç©·æ— å°½å¥½å¥‡å¿ƒçš„èªæ˜äººã€‚</p>
<p>å½“ç„¶ï¼Œå¤©èµ„ä¹Ÿå­˜åœ¨å·¨å¤§çš„ä¸ç¡®å®šæ€§ã€‚å¾ˆå¤šé»‘å®¢éƒ½æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´èªæ˜ã€çŸ¥è¯†æ¸Šåšã€ç”Ÿäº§åŠ›æ›´é«˜ã€‚å°½ç®¡è¿™æ ·ï¼Œæ­ç©¿å¤§å¸ˆç¥è¯ä¹Ÿå…·æœ‰ç§¯æçš„å½±å“ã€‚ä¾‹å¦‚ï¼Œå½“å’Œä¸€ä¸ªæ¯”æˆ‘èªæ˜çš„å®¶ä¼™å·¥ä½œçš„æ—¶å€™ï¼Œæˆ‘ä¼šå¹²ä¸€äº›è·‘è…¿çš„æ´»ï¼Œä»¥æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡æ¥æœ‰æ•ˆåˆ©ç”¨ä»–æˆ–å¥¹çš„èƒ½åŠ›ã€‚ç§»é™¤å¤§å¸ˆç¥è¯ä¹Ÿæ„å‘³ç€ç§»é™¤äº†æ„ŸçŸ¥éšœç¢ã€‚æ²¡æœ‰äº†é­”æ³•å±éšœï¼Œæˆ‘çœ‹åˆ°äº†è‡ªå·±å¯ä»¥æŒç»­è¿›æ­¥ã€‚</p>
<p>æœ€åï¼Œè½¯ä»¶é¢†åŸŸçš„æœ€å¤§éšœç¢ä¹‹ä¸€æ˜¯é‚£äº›åšå®šä¼ æ’­å¤§å¸ˆç¥è¯çš„èªæ˜äººã€‚å¯èƒ½æ˜¯å‡ºäºè‡ªå°Šå¿ƒï¼Œæˆ–è€…æ˜¯åœ¨å®¢æˆ·æˆ–é¢†å¯¼é‚£é‡Œå¢åŠ ä¸€ç‚¹ä»·å€¼çš„ç­–ç•¥ã€‚è®½åˆºçš„æ˜¯ï¼Œè¿™ç§æ€åº¦åè€Œä¼šå¯¼è‡´èªæ˜äººè´¬å€¼ï¼Œç›´åˆ°ä»–ä»¬çš„è´¡çŒ®æˆé•¿ä¸å¦‚ä»–ä»¬çš„åŒè¡Œã€‚æˆ‘ä»¬ä¸éœ€è¦å¤§å¸ˆã€‚æˆ‘ä»¬éœ€è¦æ„¿æ„åŸ¹å…»ä»–æ‰€åœ¨é¢†åŸŸä¸“å®¶çš„ä¸“å®¶ã€‚è¿™æ˜¯æˆ‘ä»¬æ‰€æœ‰äººçš„ç©ºé—´ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/books/%E5%88%9B%E5%A7%8B%E4%BA%BA%E6%89%8B%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/books/%E5%88%9B%E5%A7%8B%E4%BA%BA%E6%89%8B%E8%AE%B0/" class="post-title-link" itemprop="url">è‡ªç„¶è€Œç„¶â€”â€”ã€Šåˆ›å§‹äººæ‰‹è®°ã€‹è¯»ä¹¦æ„Ÿæ‚Ÿ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-07 22:45:00" itemprop="dateCreated datePublished" datetime="2019-04-07T22:45:00+08:00">2019-04-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">è¯»ä¹¦</span></a>
                </span>
            </span>

          
            <span id="/books/%E5%88%9B%E5%A7%8B%E4%BA%BA%E6%89%8B%E8%AE%B0/" class="post-meta-item leancloud_visitors" data-flag-title="è‡ªç„¶è€Œç„¶â€”â€”ã€Šåˆ›å§‹äººæ‰‹è®°ã€‹è¯»ä¹¦æ„Ÿæ‚Ÿ" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/books/%E5%88%9B%E5%A7%8B%E4%BA%BA%E6%89%8B%E8%AE%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/books/%E5%88%9B%E5%A7%8B%E4%BA%BA%E6%89%8B%E8%AE%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æœ¬å‘¨åˆ°æ­å·å‡ºå·®ï¼Œç¬¬ä¸€æ¬¡ä½å…¨å­£é…’åº—ï¼Œåœ¨é™„è¿‘ä¸€å®¶ç»™äººä»¿ä½›ç©¿è¶Šåˆ°80å¹´ä»£çš„å¦‚å®¶é…’åº—çš„è¡¬æ‰˜ä¸‹ï¼Œå…¨å­£ç®€ç›´é—ªçäº†æˆ‘çš„ç‹—çœ¼ã€‚é‚£è£…ä¿®ã€é‚£æ ¼è°ƒã€é‚£é—¨é¢ï¼Œåªèƒ½ç”¨ä¸¤ä¸ªå­—æ¥å½¢å®¹â€”â€”å†…æ•›ğŸ˜‚ï¼Œä½†æ˜¯ï¼Œå…¨å­£ä¸æ˜¯æˆ‘ä½è¿‡æœ€å¥¢åçš„é…’åº—ï¼Œä½†ä¸€å®šæ˜¯æˆ‘ç›®å‰ä½è¿‡æœ€èˆ’æœçš„è¿é”é…’åº—ï¼Œä¹Ÿè®¸å¦‚å®ƒçš„è€æ¿æ‰€è¯´ï¼Œè¿™æ˜¯é¢å‘æ–°ä¸­äº§çš„ä¸­æ¡£å‹é…’åº—ï¼Œæ‰€ä»¥å¯¹æˆ‘ç­‰æ‰“å·¥ä¸€æ—è€Œè¨€ï¼Œå…¨å­£çš„é€¼æ ¼ï¼Œå¾ˆæ˜¯å—ç”¨ã€‚</p>
<p>è¯´åˆ°é€¼æ ¼ï¼Œæˆ‘è¿˜æ˜¯ç¬¬ä¸€æ¬¡è§æœ‰è¿é”é…’åº—ä¼šåœ¨å®¢äººçš„åºŠå¤´æŸœå‰æ”¾ä¸€æœ¬ä¹¦çš„ï¼Œç«¯èµ·ä¸€çœ‹ã€Šåˆ›å§‹äººæ‰‹è®°ï¼Œä¸€ä¸ªä¼ä¸šå®¶çš„æ€æƒ³ã€å·¥ä½œå’Œç”Ÿæ´»ã€‹ä½œè€…å­£ç¦ï¼Œå†çœ‹å°é¢ï¼šâ€œè¿™ç‰¹ä¹ˆè°å•Šï¼Ÿâ€ç¿»çœ‹ä¸€ä¸‹ï¼šâ€œå“¦ï¼Œè¿™å®¶é…’åº—çš„è€æ€»ï¼Œéš¾æ€ªâ€¦â€åæ­£é—²æ¥æ— äº‹ï¼Œå°±éšä¾¿ç¿»äº†ç¿»ï¼Œåˆ«è¯´ï¼Œå†™å¾—æŒºå¥½ï¼è¿™å°±æ˜¯æœ¬å‘¨æˆ‘è¯»æ­¤ä¹¦çš„å…¨éƒ¨åŸå› ã€‚</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/books/%E5%88%9B%E5%A7%8B%E4%BA%BA%E6%89%8B%E8%AE%B0/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/ArmLinuxDriver/chapter3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/ArmLinuxDriver/chapter3/" class="post-title-link" itemprop="url">ä¸‰ï¼šrootfså¯åŠ¨è¿‡ç¨‹è¯¦è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-07 22:25:32" itemprop="dateCreated datePublished" datetime="2019-04-07T22:25:32+08:00">2019-04-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ARM-Linux%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">ARM-Linuxé©±åŠ¨å¼€å‘</span></a>
                </span>
            </span>

          
            <span id="/ArmLinuxDriver/chapter3/" class="post-meta-item leancloud_visitors" data-flag-title="ä¸‰ï¼šrootfså¯åŠ¨è¿‡ç¨‹è¯¦è§£" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/ArmLinuxDriver/chapter3/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/ArmLinuxDriver/chapter3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>è¯è¯´ä¸Šå›ï¼šæ ¹æ–‡ä»¶ç³»ç»Ÿçš„<code>dev proc sys</code>ä¸‰ä¸ªç›®å½•å¹¶éæ™®é€šçš„ç›®å½•ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸æŒ‚è½½åˆ°ç¡¬ç›˜åˆ†åŒºï¼Œè€Œæ˜¯ç”±å†…æ ¸ä¸“é—¨ç®¡ç†çš„å†…å­˜åŒºåŸŸï¼Œä¾¿äºä»¥æ–‡ä»¶çš„å½¢å¼è®©ç”¨æˆ·å±‚ä¸å†…æ ¸å±‚çš„äº¤äº’ã€‚è€Œç”±äºæˆ‘ä»¬ç¬¬ä¸€èŠ‚å®šåˆ¶çš„æœ€å°Linuxæ“ä½œç³»ç»Ÿæ˜¯ä¸ªâ€œé˜‰å‰²ç‰ˆâ€ï¼Œå¹¶ä¸å­˜åœ¨<code>proc sys</code>ä¸¤ä¸ªç›®å½•ï¼Œè€Œä¸”<code>dev</code>ç›®å½•å®è´¨ä¸Šä¹Ÿæ˜¯æ‰‹åŠ¨åˆ›å»ºçš„ï¼Œéšæ ¹ç›®å½•ç›´æ¥æŒ‚è½½åˆ°ç¡¬ç›˜ï¼Œç»ˆå½’ä¸ç¬¦åˆâ€œæ±Ÿæ¹–è§„çŸ©â€ã€‚</p>
<p>å› æ­¤ä¸ºäº†ä¹‹åé©±åŠ¨å¼€å‘åšé“ºå«ï¼Œæœ¬ç« èŠ‚ä¸»è¦è¯´æ˜Linuxæ–‡ä»¶ç³»ç»Ÿçš„å¯åŠ¨é¡ºåºï¼Œè§£é‡Šæ¸…æ¥šrootfsåŠ è½½ä¹‹åæ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æŠŠè¿™äº›ç‰¹æ®Šçš„ç›®å½•æŒ‚è½½åˆ°ä¸ä¹‹å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿå½“ä¸­çš„ã€‚æ‰€ä»¥æœ¬å›ç®—æ˜¯ä¸€ä¸ªç•ªå¤–ç¯‡ï¼</p>
<h2 id="æ ¹æ–‡ä»¶ç³»ç»Ÿåˆå§‹åŒ–"><a href="#æ ¹æ–‡ä»¶ç³»ç»Ÿåˆå§‹åŒ–" class="headerlink" title="æ ¹æ–‡ä»¶ç³»ç»Ÿåˆå§‹åŒ–"></a>æ ¹æ–‡ä»¶ç³»ç»Ÿåˆå§‹åŒ–</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“åµŒå…¥å¼æ“ä½œç³»ç»Ÿçš„å¯åŠ¨æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼šu-boot â€“&gt; kernel â€“&gt; rootfs<br>ä½†rootfsè¢«åŠ è½½ä¹‹åè¿˜æœ‰å¾ˆç¹æ‚çš„è¿‡ç¨‹ï¼Œæ˜¯è¿™æ ·çš„ï¼š rootfs â€“&gt; /sbin/init â€“&gt; /etc/inittab â€“&gt; /etc/rcN.d â€“&gt; /etc/init.d/rcS</p>
<ul>
<li><code>init</code>æ˜¯ç³»ç»Ÿå¯åŠ¨åçš„ç¬¬ä¸€ä¸ªç¨‹åºï¼Œå®ƒçš„è¿›ç¨‹IDä¸º1ï¼Œä¹‹åçš„è¿›ç¨‹éƒ½æ˜¯å®ƒçš„åä»£ï¼Œ</li>
<li><code>inittab</code>æ˜¯åˆå§‹åŒ–è¡¨ï¼Œç›¸å½“äºinitçš„é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®ä¸åŒçš„è¿è¡Œçº§åˆ«æ‰§è¡Œä¸åŒçš„è„šæœ¬æˆ–å‘½ä»¤</li>
<li><code>rcN.d</code>æ˜¯ä¸åŒè¿è¡Œçº§åˆ«çš„åˆå§‹åŒ–â€œåŠŸèƒ½æ¸…å•â€ï¼Œé…åˆinittabä½¿ç”¨</li>
<li><code>rcS</code>æ˜¯åˆå§‹åŒ–è„šæœ¬</li>
</ul>
<h3 id="å…³äºLinuxè¿è¡Œçº§åˆ«"><a href="#å…³äºLinuxè¿è¡Œçº§åˆ«" class="headerlink" title="å…³äºLinuxè¿è¡Œçº§åˆ«"></a>å…³äºLinuxè¿è¡Œçº§åˆ«</h3><p>è¿è¡Œçº§åˆ«åœ¨åµŒå…¥å¼Linuxå’ŒPC-Linuxä¸­çš„åŒºåˆ«æ˜¯å¾ˆå¤§çš„ï¼Œå› ä¸ºPC-Linuxä¸€èˆ¬æ˜¯è·‘åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¤šç”¨æˆ·ã€å‡çº§ã€ç»´æŠ¤ã€æ¢å¤ç­‰åœºæ™¯ï¼Œé¢å¯¹ä¼—å¤šçš„åå°æœåŠ¡ï¼Œæ¯ç§åœºæ™¯éƒ½éœ€è¦å®šåˆ¶ä¸åŒçš„å¯åŠ¨ç­–ç•¥ï¼Œæ‰€ä»¥æ‰å­•è‚²é™¤äº†â€œè¿è¡Œçº§åˆ«â€è¿™ä¸ªæ¦‚å¿µã€‚åµŒå…¥å¼Linux(æˆ–è€…è¯´busyboxç‰ˆæ–‡ä»¶ç³»ç»Ÿ)å°±æ²¡é‚£ä¹ˆå¤æ‚äº†ï¼Œæ™ºèƒ½ç»ˆç«¯å¾€å¾€ä¸ä¼šæœ‰å¤šç”¨æˆ·å’Œç»´æŠ¤çš„åœºæ™¯ï¼Œå¦‚æœæ­»æœºäº†ï¼Œå°±ç”¨é”…é“²æ‹ä¸€æ‹ï¼Œæ‰€ä»¥<strong>busyboxä¿ç•™äº†Linuxè¿è¡Œçº§åˆ«çš„æœºåˆ¶ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰ä½¿ç”¨</strong>ã€‚</p>
<p>ä¸ºäº†ä¹‹åè®²æ¸…æ¥š<code>inittabè¯­æ³•</code>ï¼Œäº†è§£ä¸€ç‚¹è¿è¡Œçº§åˆ«çš„çŸ¥è¯†ä¹Ÿä¸åã€‚</p>
<p>Linuxä¸‹æœ‰æ— æ•°çš„æœåŠ¡è¦è·‘ï¼Œç§°ä¹‹ä¸ºå®ˆæŠ¤è¿›ç¨‹(Daemon)ï¼Œæ¯”å¦‚<code>httpd sshd ftpd</code>ç­‰ç­‰ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬å¸Œæœ›è¿™äº›æœåŠ¡èƒ½å¼€æœºå¯åŠ¨ï¼Œæ‰€ä»¥ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹éƒ½è®©ä½ æŠŠè¦å¼€æœºå¯åŠ¨çš„å‘½ä»¤å†™åˆ°<code>/etc/init.d/rcS</code>æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªå›ºç„¶æ²¡é”™ï¼Œä½†å¿½ç•¥äº†ä¸€ç‚¹ï¼Œè¯¥è„šæœ¬æ˜¯â€œæ— è„‘â€åŠ è½½çš„ï¼Œå‡å¦‚æˆ‘ä»¬è¦å¯¹ç³»ç»Ÿè¿›è¡Œæ¢å¤å‡ºå‚è®¾ç½®ï¼Œé‚£ä¹ˆå‰é¢çš„ä¸‰ä¸ªæœåŠ¡åœ¨ç³»ç»Ÿé‡å¯åæ ¹æœ¬æ²¡å¿…è¦è¿è¡Œäº†ï¼›æœ‰æ—¶å€™ä¸ºäº†æ’æŸ¥ç³»ç»Ÿbugï¼Œå¯åŠ¨ä¸€å †å¤šä½™çš„æœåŠ¡åè€Œé€ æˆéšœç¢ç­‰ã€‚å…³äºåœ¨ä¸åŒçš„æ¨¡å¼ä¸‹æ‰§è¡Œä¸åŒçš„å¼€æœºå¯åŠ¨æ–¹æ¡ˆï¼Œå°±æ˜¯Linuxçš„<strong>è¿è¡Œçº§åˆ«</strong>ã€‚</p>
<p>æ‰€è°“è¿è¡Œçº§åˆ«å°±æ˜¯å­—é¢æ„æ€ï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸‹å®šåˆ¶ä¸åŒçš„åå°æœåŠ¡ï¼ŒLinuxä¸€å…±7ç§è¿è¡Œçº§åˆ«(0-6)ï¼š</p>
<table>
<thead>
<tr>
<th align="center">Level</th>
<th align="center">Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">å…³æœº</td>
<td>ä¸è¦è®¾ç½®ä¸ºinitdefaultåŠ¨ä½œ</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">å•ç”¨æˆ·æ¨¡å¼</td>
<td>rootæƒé™ï¼Œå¸¸ç”¨äºç³»ç»Ÿæ¢å¤/ç»´æŠ¤</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">å¤šç”¨æˆ·æ¨¡å¼(åœç”¨ç½‘ç»œ)</td>
<td>ç™»é™†åè¿›å…¥å‘½ä»¤è¡Œ</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">å¤šç”¨æˆ·æ¨¡å¼(å¯ç”¨ç½‘ç»œ)</td>
<td>ç™»é™†åè¿›å…¥å‘½ä»¤è¡Œï¼Œæœ€å¸¸è§</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">æœªä½¿ç”¨/é¢„ç•™</td>
<td></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">å›¾å½¢ç•Œé¢æ¨¡å¼</td>
<td>ç™»é™†åè¿›å…¥GUIç•Œé¢ï¼ŒPCä¸Šæœ€å¸¸è§</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">é‡å¯</td>
<td>ä¸è¦è®¾ç½®ä¸ºinitdefaultåŠ¨ä½œ</td>
</tr>
</tbody></table>
<p>å¯ä»¥é€šè¿‡<code>runlevel</code>å‘½ä»¤æŸ¥çœ‹è‡ªå·±çš„ç³»ç»Ÿå½“å‰å¤„äºå“ªä¸ªè¿è¡Œçº§åˆ«ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ runlevel </span><br><span class="line">N 5 <span class="comment"># è¡¨ç¤ºå½“å‰è¿è¡Œåœ¨GUIæ¨¡å¼</span></span><br></pre></td></tr></table></figure>

<p>âš ï¸ ä¸€èˆ¬è€Œè¨€0ã€1ã€6çš„è¿è¡Œçº§åˆ«éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†2-5åˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆè¿è¡Œçº§åˆ«ï¼Œä¸åŒçš„Linuxå‘è¡Œç‰ˆä¸ä¸€æ ·ã€‚</p>
<h3 id="å…³äºinittab"><a href="#å…³äºinittab" class="headerlink" title="å…³äºinittab"></a>å…³äºinittab</h3><p>å…³äºinittabæ–‡ä»¶éœ€è¦æŒæ¡çš„åªæœ‰ä¸¤ç‚¹ï¼š</p>
<ol>
<li>å®ƒæ˜¯initè¿›ç¨‹çš„é…ç½®æ–‡ä»¶ï¼Œ<strong>PC-Linux</strong>çš„inittabå…·ä½“è¯´æ˜å¯å‚è€ƒğŸ‘‰<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E19683-01/817-0716/6mggehbrk/index.html">oracleå®˜æ–¹æ‰‹å†Œ</a></li>
<li>å®ƒæœ‰è‡ªå·±çš„è¯­æ³•è§„åˆ™ï¼Œ<code>&#39;&lt;id&gt;:&lt;runlevels&gt;:&lt;action&gt;:&lt;process&gt;&#39;</code>è¡¨ç¤º<code>&#39;å”¯ä¸€æ ‡ç¤º:è¿è¡Œçº§åˆ«:æ‰§è¡ŒåŠ¨ä½œ:å‘½ä»¤ç¨‹åº&#39;</code></li>
</ol>
<p><strong>(ç”±äºbusyboxä¸­çš„initæœºåˆ¶ä¸åŒäºPC-Linuxï¼Œä»¥ä¸‹å†…å®¹ä»…ä»¥åµŒå…¥å¼ç«¯busyboxç‰ˆæœ¬ä¸ºä¸»ï¼Œå…·ä½“å‚è€ƒğŸ‘‰<a target="_blank" rel="noopener" href="https://git.busybox.net/busybox/plain/examples/inittab?h=1_8_stable">busybox inittab</a>)</strong></p>
<p>âš ï¸ <strong>id</strong>åœ¨busyboxé‡Œå¹¶ä¸ä½œä¸ºæ ‡ç¤ºï¼Œè€Œæ˜¯ç”¨äºæŒ‡å®šå¯åŠ¨ç¨‹åºçš„ttyï¼Œé€šå¸¸ä¸ºç¼ºçœå€¼<br>âš ï¸ <strong>runlevels</strong>åœ¨busyboxä¸­è¢«å®Œå…¨å¿½ç•¥ï¼Œæ€»æ˜¯ä¸ºç¼ºçœå€¼</p>
<p><strong>æ‰§è¡ŒåŠ¨ä½œ&lt;action&gt;</strong></p>
<p>actionè¡¨ç¤ºä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ‰§è¡Œç¨‹åºï¼Œæœ‰å¾ˆå¤šç§åŠ¨ä½œå¯é€‰ï¼š</p>
<table>
<thead>
<tr>
<th align="center">Action</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>sysinit</code></td>
<td align="left">ç³»ç»Ÿåˆå§‹åŒ–æ—¶è§¦å‘ï¼Œæœ€å…ˆè¢«æ‰§è¡Œ</td>
</tr>
<tr>
<td align="center"><code>respawn</code></td>
<td align="left">å¦‚æœç¨‹åºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå¿½ç•¥å®ƒï¼›å¦‚æœç¨‹åºæŒ‚äº†ï¼Œé‡å¯å®ƒï¼›å¦‚æœç¨‹åºå·²ç»åœ¨è·‘äº†ï¼Œè·³è¿‡å®ƒ</td>
</tr>
<tr>
<td align="center"><code>askfirst</code></td>
<td align="left">ç›¸å½“äº<code>respawn</code>ï¼Œä½†æ‰§è¡Œå‘½ä»¤å‰ä¼šå…ˆæ˜¾ç¤ºâ€Please press Enter to activate this console.â€ï¼Œç­‰åˆ°ç”¨æˆ·å›è½¦åæ‰æ‰§è¡Œ</td>
</tr>
<tr>
<td align="center"><code>wait</code></td>
<td align="left">å¯åŠ¨ç¨‹åºå¹¶ç­‰å®ƒè¿è¡Œç»“æŸï¼Œç„¶åå†æ‰§è¡Œä¹‹åçš„ç¨‹åº</td>
</tr>
<tr>
<td align="center"><code>once</code></td>
<td align="left">å¯åŠ¨ç¨‹åºï¼Œä¸ç­‰å¾…ï¼Œæ­»äº†ä¹Ÿä¸ç®¡</td>
</tr>
<tr>
<td align="center"><code>restart</code></td>
<td align="left">å½“æ”¶åˆ°é‡å¯ä¿¡å·æ—¶è§¦å‘</td>
</tr>
<tr>
<td align="center"><code>ctrlaltdel</code></td>
<td align="left">å½“æŒ‰ä¸‹<code>&#39;ctrl+alt+del&#39;</code>ç»„åˆé”®åè§¦å‘</td>
</tr>
<tr>
<td align="center"><code>shutdown</code></td>
<td align="left">å½“å…³æœºæ—¶è§¦å‘</td>
</tr>
</tbody></table>
<p><strong>å‘½ä»¤ç¨‹åº&lt;process&gt;</strong></p>
<p>å°±æ˜¯å¸¸è§„çš„å‘½ä»¤è¡Œï¼Œå¦‚æœæœ‰ç‰¹æ®Šè¦æ±‚ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>exec sh</code>æ¥æ‰§è¡Œã€‚</p>
<h3 id="åˆ¶ä½œä¸€ä¸ªç®€å•çš„inittab"><a href="#åˆ¶ä½œä¸€ä¸ªç®€å•çš„inittab" class="headerlink" title="åˆ¶ä½œä¸€ä¸ªç®€å•çš„inittab"></a>åˆ¶ä½œä¸€ä¸ªç®€å•çš„inittab</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç³»ç»Ÿåˆå§‹åŒ–æ—¶ï¼Œæ‰§è¡ŒrcSè„šæœ¬</span></span><br><span class="line">::sysinit:/etc/init.d/rcS</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœç”¨ä¸²å£ç»ˆç«¯ç™»é™†ï¼Œè¦æ±‚ç”¨æˆ·å…ˆæŒ‰ä¸€ä¸‹å›è½¦æ‰èƒ½è¿›å…¥ï¼Œå¹¶é…ç½®ä¸²å£é€šä¿¡å‚æ•°</span></span><br><span class="line">::askfirst:/sbin/getty 115200 ttyS0</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šå…¶ä»–ç»ˆç«¯ç™»é™†çš„æ–¹å¼</span></span><br><span class="line">tty2::askfirst:-/bin/sh</span><br><span class="line">tty3::askfirst:-/bin/sh</span><br><span class="line">tty4::askfirst:-/bin/sh</span><br><span class="line"></span><br><span class="line">::restart:/sbin/init</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³æœºè¦å¸è½½æœ‰å…³é©±åŠ¨ï¼Œåœç”¨äº¤æ¢ç©ºé—´</span></span><br><span class="line">::shutdown:/bin/umount -a -r</span><br><span class="line">::shutdown:/sbin/swapoff -a</span><br></pre></td></tr></table></figure>

<p>ä»é…ç½®ä¸­çš„ç¬¬2è¡Œå°±èƒ½çœ‹å‡ºï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å¼€æœºå¯åŠ¨çš„ç¨‹åºéƒ½å¿…é¡»å¸è½½/etc/init.d/rcSè¿™ä¸ªåœ°æ–¹äº†ğŸ˜„ã€‚rcSå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„shellè„šæœ¬ï¼Œæƒ³æ€ä¹ˆå†™éƒ½è¡Œï¼Œè¾¾åˆ°ç›®çš„å³å¯ã€‚é€šå¸¸æˆ‘ä»¬ä¼šåœ¨å…¶ä¸­å®Œæˆç½‘ç»œé…ç½®ã€å„ç§åå°æœåŠ¡å¯åŠ¨ã€ç¯å¢ƒåˆå§‹åŒ–ç­‰ç­‰ã€‚</p>
<h2 id="æ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨æŒ‚è½½"><a href="#æ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨æŒ‚è½½" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨æŒ‚è½½"></a>æ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨æŒ‚è½½</h2><p>åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨ä¹‹å‰ï¼Œéœ€è¦å…ˆç¡®ä¿Linuxç¯å¢ƒå°±ç»ªï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬å¾ˆåº•å±‚çš„å„ç§æ–‡ä»¶ç³»ç»Ÿå’Œé©±åŠ¨çš„æŒ‚è½½ã€‚è®¾æƒ³ä¸€ä¸ªç½‘ç»œæ‘„åƒæœºï¼Œåœ¨å¼€æœºååº”ç”¨ç¨‹åºå¼€å§‹é‡‡é›†å›¾åƒç¼–è§£ç å¹¶é€šè¿‡ç½‘ç»œä¸Šä¼ åˆ°æœåŠ¡ç«¯ï¼Œç»“æœå‘ç°/devä¸‹æ ¹æœ¬æ²¡æœ‰è®¾å¤‡æ–‡ä»¶ï¼Œå°è¯•ç”¨psçœ‹ä¸€ä¸‹è¿›ç¨‹åˆ—è¡¨ï¼Œç»“æœå•¥ä¹Ÿæ²¡æœ‰ï¼Œå‘ç°/procç›®å½•æ˜¯ç©ºçš„ï¼Œä¼šä¸ä¼šå¾ˆå´©æºƒï¼Œèµ¶ç´§æ‹¿é”…é“²æ‹ä¸€æ‹ğŸ˜‚ã€‚</p>
<p>å› æ­¤ï¼Œå¼€æœºè‡ªåŠ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œé¦–å…ˆå¯ä»¥æ˜ç¡®rootfså·²ç»è¢«å†…æ ¸è‡ªåŠ¨æŒ‚è½½åˆ°æ ¹ç›®å½•äº†ï¼Œæ ¹æ®ä¸Šä¸€å°èŠ‚çš„å­¦ä¹ å¯çŸ¥ï¼Œè‡³å°‘è¿˜æœ‰4ä¸ªæ–‡ä»¶ç³»ç»Ÿéœ€è¦æŒ‚è½½ï¼Œå¯¹åº”å‘½ä»¤ä¸º</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mount -t proc proc /proc    <span class="comment"># è¿›ç¨‹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½</span></span><br><span class="line">mount -t sysfs sysfs /sys   <span class="comment"># å­ç³»ç»Ÿæ–‡ä»¶ç³»ç»ŸæŒ‚è½½</span></span><br><span class="line">mount -t tmpfs tmpfs /dev   <span class="comment"># è®¾å¤‡æè¿°ç¬¦ä¸è¦ç›´æ¥æŒ‚è½½åˆ°flashï¼Œé¿å…é¢‘ç¹è¯»å†™</span></span><br><span class="line">mount -t tmpfs tmpfs /tmp   <span class="comment"># å°±æ˜¯ä¸ªå—å†…å­˜ï¼Œæ‰ç”µä¸ä¿æŒï¼Œæ‰€ä»¥å«ä¸´æ—¶</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å½“ç„¶å¯ä»¥æŠŠè¿™äº›å‘½ä»¤æ·»åŠ åˆ°<code>/etc/init.d/rcS</code>è„šæœ¬ï¼Œå¦‚æœéœ€è¦å¸è½½æ—¶åˆä¸€æ¡æ¡çš„umountï¼Œä¸è§‰å¾—è¿™æ ·å¾ˆéº»çƒ¦ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹ä¾¿ç‚¹çš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½æ–¹å¼ã€‚</p>
<h3 id="etc-fstabæ–‡ä»¶è§£æ"><a href="#etc-fstabæ–‡ä»¶è§£æ" class="headerlink" title="/etc/fstabæ–‡ä»¶è§£æ"></a>/etc/fstabæ–‡ä»¶è§£æ</h3><p><code>fstab</code>ç¿»è¯‘è¿‡æ¥å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿé…ç½®è¡¨ï¼Œé…åˆå‘½ä»¤<code>mount -a</code>å’Œ<code>umount -a</code>ä½¿ç”¨ï¼Œå‘½ä»¤ä¼šæ ¹æ®é…ç½®è¡¨çš„å†…å®¹é€æ¡æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿåˆ°æŒ‡å®šçš„æŒ‚è½½ç‚¹ã€‚</p>
<p>fstabåŒæ ·æœ‰è‡ªå·±çš„æ ¼å¼è¦æ±‚ï¼Œä¸€è¡Œå†…å®¹è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ï¼Œå†…å®¹ä¸ºï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾å¤‡æˆ–ç›®æ ‡  æŒ‚è½½ç‚¹        fsç±»å‹  é€‰é¡¹       æ˜¯å¦å¤‡ä»½  æ˜¯å¦æ£€æŸ¥</span></span><br><span class="line"><span class="comment"># device    mount-point  type   options    dump    pass</span></span><br><span class="line">proc        /proc        proc   defaults    0       0</span><br><span class="line">sysfs       /sys         sysfs  defaults    0       0</span><br><span class="line">tmpfs       /dev         tmpfs   defaults   0       0</span><br><span class="line">tmpfs       /tmp         tmpfs   defaults   0       0</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ/etc/fstabå·²å­˜åœ¨ï¼Œåªéœ€æ‰‹åŠ¨è¾“å…¥<code>mount -a</code>ï¼Œå°±ä¼šæ ¹æ®é…ç½®è‡ªåŠ¨æŠŠè¡¨é‡Œçš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¸Šã€‚å¦‚æœæƒ³å¼€æœºè‡ªåŠ¨æŒ‚è½½æ€ä¹ˆåŠï¼Œè¿˜è®°å¾—<code>/etc/inittab</code>ä¹ˆğŸ˜ï¼Ÿæ·»åŠ ä¸¤è¡Œï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">::sysinit:/bin/mount -a       <span class="comment"># å¼€æœºè‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line">::shutdown:/bin/umount -a -r  <span class="comment"># å…³æœºè‡ªåŠ¨å¸è½½</span></span><br></pre></td></tr></table></figure>

<h2 id="å®Œå–„varmçš„rootfs"><a href="#å®Œå–„varmçš„rootfs" class="headerlink" title="å®Œå–„varmçš„rootfs"></a>å®Œå–„varmçš„rootfs</h2><p>æ˜ç™½äº†rootfsçš„å¯åŠ¨è¿‡ç¨‹ä»¥åŠå…¶å®ƒæ–‡ä»¶ç³»ç»Ÿçš„è‡ªåŠ¨æŒ‚è½½åŸç†ï¼Œæ¥ä¸‹æ¥å°±è¯¥å®Œå–„ä¹‹å‰åšå¥½çš„â€œé˜‰å‰²ç‰ˆâ€Linuxäº†ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/varm/os/rootfs</span><br><span class="line">$ mkdir -p etc/init.d proc sys dev tmp <span class="comment"># åˆ›å»ºç›¸å…³ç›®å½•</span></span><br><span class="line">$ vim etc/inittab <span class="comment"># åˆ›å»ºinité…ç½®è¡¨</span></span><br><span class="line"><span class="comment"># ä»¥ä¸‹ä¸ºinittabå†…å®¹</span></span><br><span class="line"><span class="comment">#   ::sysinit:/bin/mount -a  </span></span><br><span class="line"><span class="comment">#   ::sysinit:/etc/init.d/rcS</span></span><br><span class="line"><span class="comment">#   ::askfirst:/bin/sh       </span></span><br><span class="line"><span class="comment">#   ::ctrlaltdel:/sbin/reboot</span></span><br><span class="line"><span class="comment">#   ::shutdown:/sbin/swapoff -a</span></span><br><span class="line"><span class="comment">#   ::shutdown:/bin/umount -a -r</span></span><br><span class="line"><span class="comment">#   ::restart:/sbin/init</span></span><br><span class="line"></span><br><span class="line">$ vim etc/fstab <span class="comment"># åˆ›å»ºè‡ªåŠ¨æŒ‚è½½é…ç½®è¡¨</span></span><br><span class="line"><span class="comment"># ä»¥ä¸‹ä¸ºfstabå†…å®¹</span></span><br><span class="line"><span class="comment">#   proc        /proc        proc   defaults    0       0</span></span><br><span class="line"><span class="comment">#   sysfs       /sys         sysfs  defaults    0       0</span></span><br><span class="line"><span class="comment">#   tmpfs       /dev         tmpfs   defaults   0       0</span></span><br><span class="line"><span class="comment">#   tmpfs       /tmp         tmpfs   defaults   0       0</span></span><br><span class="line"></span><br><span class="line">$ vim etc/init.d/rcS <span class="comment"># åˆ›å»ºå¼€æœºå¯åŠ¨è„šæœ¬</span></span><br><span class="line"><span class="comment"># ä»¥ä¸‹ä¸ºrcSå†…å®¹</span></span><br><span class="line"><span class="comment">#   #! /bin/sh</span></span><br><span class="line"><span class="comment">#   for i in 1 2 3 4</span></span><br><span class="line"><span class="comment">#   do</span></span><br><span class="line"><span class="comment">#       /bin/mknod /dev/tty$i c 4 $i</span></span><br><span class="line"><span class="comment">#   done</span></span><br><span class="line">$ chmod +x etc/init.d/rcS <span class="comment"># è„šæœ¬å¿…é¡»æœ‰â€œå¯æ‰§è¡Œâ€æƒé™</span></span><br></pre></td></tr></table></figure>

<p>å®Œæˆrootfsçš„æ”¹é€ åï¼Œé‡æ–°å°†å…¶å†™å…¥é•œåƒæ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/varm/os</span><br><span class="line">$ sudo mount -o loop rootfs.ext3 /mnt</span><br><span class="line">$ sudo cp -r rootfs/* /mnt</span><br><span class="line">$ sudo umount /mnt</span><br></pre></td></tr></table></figure>

<h2 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h2><ul>
<li>åµŒå…¥å¼Linuxçš„æ–‡ä»¶ç³»ç»Ÿå¯åŠ¨é¡ºåºä¸ºinit â€“&gt; inittab â€“&gt; fstab â€“&gt; rcS</li>
<li>inittabçš„åŸºæœ¬è¯­æ³•ä¸º<code>&#39;&lt;id&gt;:&lt;runlevels&gt;:&lt;action&gt;:&lt;process&gt;&#39;</code></li>
<li>fstabçš„åŸºæœ¬è¯­æ³•ä¸º<code>&#39;device mount-point type options dump pass&#39;</code></li>
<li>/etc/init.d/rcSå°±æ˜¯ä¸€ä¸ªæ™®é€šè„šæœ¬ï¼Œå¼€æœºå¯åŠ¨çš„å…¥å£</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/97ThingsEveryProgrammerShouldKnow/35/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97ThingsEveryProgrammerShouldKnow/35/" class="post-title-link" itemprop="url">APIè®¾è®¡é»„é‡‘æ³•åˆ™</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-04 07:30:02" itemprop="dateCreated datePublished" datetime="2019-04-04T07:30:02+08:00">2019-04-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" itemprop="url" rel="index"><span itemprop="name">ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„97ä»¶äº‹</span></a>
                </span>
            </span>

          
            <span id="/97ThingsEveryProgrammerShouldKnow/35/" class="post-meta-item leancloud_visitors" data-flag-title="APIè®¾è®¡é»„é‡‘æ³•åˆ™" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/97ThingsEveryProgrammerShouldKnow/35/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/97ThingsEveryProgrammerShouldKnow/35/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_35/">The Golden Rule of API Design</a></p>
<p>APIè®¾è®¡å¾ˆéš¾ï¼Œå°¤å…¶æ˜¯å¤§å‹çš„è®¾è®¡ã€‚å¦‚æœä½ æ­£åœ¨ä¸ºæˆç™¾ä¸Šåƒçš„ç”¨æˆ·è®¾è®¡ä¸€æ¬¾APIï¼Œä½ ä¸å¾—ä¸æ€è€ƒæœªæ¥ä½ å¯èƒ½ä½œå‡ºä½•ç§æ”¹å˜ï¼Œä»¥åŠè¿™äº›æ”¹å˜æ˜¯å¦ä¼šç»™å®¢æˆ·çš„ä»£ç é€ æˆç ´åã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ ä¸å¾—ä¸è€ƒè™‘è¿™äº›APIçš„ç”¨æˆ·ä¼šå¦‚ä½•å½±å“ä½ ã€‚å¦‚æœä½ çš„APIç±»ä¸­æœ‰ä¸€ä¸ªç±»ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„å†…éƒ¨æ–¹æ³•ï¼Œä½ å°±ä¸å¾—ä¸æ¨èç”¨æˆ·å¯ä»¥é€šè¿‡ç»§æ‰¿ä¸€ä¸ªå­ç±»å¹¶é‡å†™æ­¤æ–¹æ³•ï¼Œä½†è¿™å¯èƒ½ä¼šæˆä¸ºç¾éš¾ã€‚ä½ æ— æ³•æ”¹å˜è¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºç”¨æˆ·å·²ç»ç»™å®ƒèµ‹äºˆäº†ä¸åŒçš„å«ä¹‰ã€‚ä½ åœ¨ä¹‹åçš„å†…éƒ¨å®ç°ä¹Ÿå°†å—åˆ°ç”¨æˆ·çš„æ”¯é…ã€‚</p>
<p>APIå¼€å‘è€…æœ‰å¾ˆå¤šæ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯é”å®šAPIã€‚å¦‚æœä½ ç”¨Javaå®ç°ï¼Œå¯èƒ½ä¼šåœ¨ä¼šè®©å¾ˆå¤šç±»å’Œæ–¹æ³•åŠ ä¸Šfinalã€‚åœ¨C#ä¸­ï¼Œä½ å¯èƒ½ä¼šè®©ç±»å’Œæ–¹æ³•åŠ ä¸Šsealedã€‚ä¸ç®¡ä½ ç”¨ä»€ä¹ˆè¯­è¨€ï¼Œä½ å¯èƒ½éƒ½æƒ³é€šè¿‡å•ä¸€æ¨¡å¼æˆ–é™æ€å·¥å‚æ–¹æ³•æ¥å±•ç¤ºä½ çš„APIï¼Œä»è€Œå¯ä»¥ä¿æŠ¤å®ƒä»¬ä¸è®©ä»–äººæœ‰è¦†ç›–çš„è¡Œä¸ºï¼ŒåŒæ—¶åœ¨ä½¿ç”¨ä½ çš„ä»£ç æ—¶ï¼Œèƒ½å¤Ÿé™åˆ¶ä½å®ƒä»¬çš„é€‰æ‹©ã€‚è¿™çœ‹ä¼¼å…¨éƒ¨çš„åŸå› ï¼Œä½†ï¼Œæ˜¯çœŸçš„å—ï¼Ÿ</p>
<p>è¿‡å»çš„åå¹´é‡Œï¼Œæˆ‘ä»¬é€æ¸è®¤è¯†åˆ°äº†å•å…ƒæµ‹è¯•æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ï¼Œä½†è¿™ä¸€æ•™è®­å¹¶æ²¡æœ‰å®Œå…¨æ¸—é€åˆ°æ•´ä¸ªè¡Œä¸šã€‚å…¶è¿¹è±¡å……æ–¥åœ¨æˆ‘ä»¬å‘¨å›´ã€‚è®©ä¸€ä¸ªæœªç»æµ‹è¯•çš„ç±»éšæ„ç”¨äºç¬¬ä¸‰æ–¹APIï¼Œå¹¶å°è¯•ä¸ºå®ƒå†™å•å…ƒæµ‹è¯•ã€‚å¤§éƒ¨åˆ†æ—¶é—´ï¼Œä½ éƒ½ä¼šæ‰å‘é‡Œã€‚ä½ ä¼šå‘ç°è¿™äº›ä»£ç æ‰€ä½¿ç”¨çš„APIåƒæ˜¯ç”¨èƒ¶æ°´ç²˜èµ·æ¥çš„ä¸€æ ·ã€‚æ²¡æœ‰åŠæ³•æ¨¡æ‹Ÿè¿™äº›APIç±»ï¼Œä½ åªèƒ½é€šè¿‡â€œæ„Ÿè§‰â€æ¥å’Œä»–ä»¬äº¤æµï¼Œæˆ–è€…æä¾›è¿”å›å€¼è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™éƒ½ä¼šå˜å¥½ï¼Œä½†åªæœ‰åœ¨æˆ‘ä»¬è®¾è®¡APIæ—¶ï¼Œæ‰å¼€å§‹å°†æµ‹è¯•è§†ä¸ºçœŸå®ç”¨ä¾‹ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒæ¯”ä»…ä»…æµ‹è¯•ä¸€ä¸‹ä»£ç è¦å¤æ‚ä¸€äº›ã€‚é‚£å°±æ˜¯<strong>APIè®¾è®¡é»„é‡‘æ³•åˆ™</strong>ï¼š<em>ä»…ä¸ºä½ å¼€å‘çš„APIå†™æµ‹è¯•æ˜¯ä¸å¤Ÿçš„ï¼›ä½ ä¸å¾—ä¸ä¸ºä½¿ç”¨äº†ä½ çš„APIçš„ä»£ç å†™å•å…ƒæµ‹è¯•ã€‚å½“ä½ è¿™ä¹ˆåšäº†ï¼Œä½ å°±èƒ½æŒæ¡ç”¨æˆ·åœ¨æµ‹è¯•ä»–ä»¬çš„ä»£ç æ—¶ä¸å¾—ä¸é¢å¯¹çš„å›°éš¾</em>ã€‚</p>
<p>æ²¡æœ‰åŠæ³•è®©å¼€å‘è€…åœ¨æµ‹è¯•ä½¿ç”¨ä½ APIçš„ä»£ç æ—¶å˜å¾—å®¹æ˜“ã€‚<code>static</code>ã€<code>final</code>å’Œ<code>sealed</code>æœ¬èº«å¹¶ä¸æ˜¯åçš„ç»“æ„ã€‚æœ‰æ—¶å®ƒä»¬å¾ˆæœ‰ç”¨ã€‚ä½†æ›´é‡è¦çš„æ˜¯æ„è¯†åˆ°æµ‹è¯•é—®é¢˜ï¼Œç„¶åè§£å†³ï¼Œä½ å¿…é¡»äº²èº«ç»å†ã€‚ä¸€æ—¦ä½ æ‹¥æœ‰(è¿™ç§ç»éªŒ)ï¼Œä½ å°±å¯ä»¥åƒå…¶ä»–è®¾è®¡æŒ‘æˆ˜ä¸€æ ·è§£å†³å®ƒã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ixx.life/books/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Philon">
      <meta itemprop="description" content="ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‡ªå¢äººç”Ÿ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/books/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">ã€Šæ·±åº¦å­¦ä¹ ã€‹ç®€è¯„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-04-01 07:49:48" itemprop="dateCreated datePublished" datetime="2019-04-01T07:49:48+08:00">2019-04-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">è¯»ä¹¦</span></a>
                </span>
            </span>

          
            <span id="/books/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="post-meta-item leancloud_visitors" data-flag-title="ã€Šæ·±åº¦å­¦ä¹ ã€‹ç®€è¯„" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/books/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/books/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li>æœ¬ä¹¦æˆ‘çœ‹äº†å¤§åŠï¼Œä¸æƒ³è¯»äº†</li>
<li>æš‚æ—¶ä¸æ‰“ç®—å¯¹è¿™æœ¬ä¹¦å†™è¯»ä¹¦ç¬”è®°æˆ–æ„Ÿæ‚Ÿ</li>
<li>æˆ‘éå¸¸ä¸»ç®¡åœ°è®¤ä¸ºè¿™æœ¬ä¹¦æ˜¯ä¸€æœ¬å­¦æœ¯ç±»æŠ¥å‘Šï¼Œä¸é€‚åˆå½“ç§‘æ™®</li>
</ol>
<p>ã€Šæ·±åº¦å­¦ä¹ ï¼Œæ™ºèƒ½æ—¶ä»£çš„æ ¸å¿ƒé©±åŠ¨åŠ›é‡ã€‹æ˜¯å¾®ä¿¡é˜…è¯»æ¨é€ç»™æˆ‘çš„ï¼Œè²Œä¼¼åˆšæ¨å‡ºï¼Œè€Œä¸”çœ‹äº†ä»–äººç®€è¯„è¯´æ­¤ä¹¦å¯ä»¥å½“ä½œæ·±åº¦å­¦ä¹ çš„å…¥é—¨åŠå…¶ç®€å²çš„äº†è§£ã€‚æˆ‘å¿ƒæƒ³é‚£æ­¤ä¹¦åº”è¯¥æ˜¯æœ¬ç§‘æ™®ç±»çš„ä¹¦ç±å§ï¼Œç„¶è€Œæˆ‘æƒ³å¤šäº†ï¼Œä¸çŸ¥æ˜¯ç¿»è¯‘è¿˜æ˜¯åŸè‘—æœ¬èº«çš„é—®é¢˜ï¼Œæœ¬ä¹¦è·Ÿåƒæ˜¯ä½œè€…æ»¡æ€€æ¿€æƒ…åœ°å›é¡¾è¿‡å¾€ï¼Œä¹¦ä¸­çš„ç¡®è®²è¿°äº†è®¡ç®—æœºå¦‚ä½•ä¸€æ­¥æ­¥å‘å±•â€œè®¤çŸ¥â€ï¼Œä½†é™¤éä½ æœ‰è¾ƒå¥½çš„æ•°å­¦åŠŸåº•å’Œäººå·¥æ™ºèƒ½å†å²èƒŒæ™¯ï¼Œå¦åˆ™åŸºæœ¬è·Ÿä¸ä¸Šä½œè€…çš„èŠ‚å¥(å°¤å…¶æ˜¯ç¬¬äºŒéƒ¨åˆ†ï¼Œåæ­£æˆ‘æ˜¯ä¸è¡Œ)ã€‚å› æ­¤ï¼Œä»…ä»…æ˜¯ä¹¦æœ¬èº«ï¼Œæˆ‘è®¤ä¸ºå†™å¾—å¹¶ä¸å¥½ã€‚å½“ç„¶è¿™å¹¶ä¸ä»£è¡¨ä½œè€…ä¸“ä¸šæ°´å¹³ä¸å¤Ÿï¼Œæ°æ°ç›¸åï¼Œä¹¦ä¸­å¯¹æœºå™¨è¯†åˆ«å‘å±•å„ä¸ªé˜¶æ®µä¸­å‡ºç°çš„ç®—æ³•åŠå…¶åŸç†çš„é€å½»ä»‹ç»ï¼Œéƒ½èƒ½çœ‹å‡ºä½œè€…çš„ä¸“ä¸šçŸ¥è¯†é‚£æ˜¯ç›¸å½“å‰å®³çš„ã€‚</p>
<p>å…³äºæ·±åº¦å­¦ä¹ è¿˜æœ‰å¦å¤–ä¸€æœ¬â€œåŒåâ€ä¹¦ã€ŠDeep Learning: Adaptive Computation and Machine Learning seriesã€‹ï¼Œåˆå«åšâ€œèŠ±ä¹¦â€ï¼Œè²Œä¼¼è¯„ä»·ä¹Ÿæé«˜ï¼Œæˆ‘å¯¹æ­¤ä¹¦çš„å…´è¶£ä¹Ÿå¾ˆå¤§ï¼Œä½†åº”è¯¥ä»æœ¬ä¹¦ä¸­æ±²å–æ•™è®­ï¼Œä¸‹ä¸€æ¬¡æˆ‘ä¼šé€‰æ‹©æŠŠå®ƒå½“ä½œæŠ€æœ¯ç±»ä¹¦ç±æ¥ç²¾åº¦ï¼Œå¹¶å†™å­¦ä¹ ç¬”è®°ã€‚</p>
<p>è¯´æ¥æƒ­æ„§ï¼Œæˆ‘ä¸ªäººä½œä¸ºç¨‹åºå‘˜å¤šå¹´ï¼Œå…¶å®å¯¹æ•°å­¦å’Œç®—æ³•éƒ½æ²¡æ‰å®çš„åŸºç¡€ã€‚æˆ‘çŸ¥é“å†å²ä¸Šå¾ˆå¤šéª¨ç°çº§å¤§ç¥å…¶å®éƒ½æ˜¯ä»æ•°å­¦çš„è§’åº¦åœ¨æ€è€ƒç¨‹åºçš„é—®é¢˜ï¼Œå¾ˆç‰›é€¼ï¼Œå¾ˆç¾¡æ…•ï¼Œçœ‹æ¥æˆ‘ä¹Ÿè¯¥è®¤çœŸå¯¹å¾…è‡ªå·±çš„æ•°å­¦äº†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Philon"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Philon</p>
  <div class="site-description" itemprop="description">ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è¶³è¿¹</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">177</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">77</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/philon" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;philon" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ixx.life</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Y5scg9Ix4iae04UOae0uJSJA-gzGzoHsz',
      appKey     : 'U9hHApgNVDExYRJqXvUs5ykr',
      placeholder: "è¯´ç‚¹ä»€ä¹ˆå§...",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
